import{a as co,d as td,h as rd}from"./chunk-VLWDJKXC.js";import{c as Xl,g as Zl}from"./chunk-BY6DCZCR.js";import{a as wl}from"./chunk-VY3ISNGW.js";import{a as io,b as fd}from"./chunk-QMWBZIPD.js";import"./chunk-XAOOZMC3.js";import"./chunk-O3EHYMBF.js";import{E as ed,H as hd,a as hl,b as Ji,d as El,e as Sl,f as _l,g as oo,l as Gl,s as ql,y as Wl}from"./chunk-GZXKXJ5E.js";import{a as Ml,d as Hl,e as Q,f as Ne,g as Z,h as ld,i as dd,k as md}from"./chunk-XAFHITOY.js";import{a as kn}from"./chunk-34UTD3KU.js";import{a as no}from"./chunk-3BFBFXZU.js";import{a as vd}from"./chunk-FUECYEJ2.js";import{a as ao,d as Jl}from"./chunk-2TPQTORY.js";import{b as _r}from"./chunk-Q7TNZ4SW.js";import{a as Ln,e as Ql}from"./chunk-6HINEH7Y.js";import{d as od}from"./chunk-TNG5SNWV.js";import{a as gd}from"./chunk-UU7RNPRD.js";import{a as or,b as Qs}from"./chunk-6IYD5VZ3.js";import{c as dl,h as fl,i as ro}from"./chunk-53WUJSV4.js";import{a as Nl}from"./chunk-7AGSA5H3.js";import{c as sd,e as ia,g as ad,m as cd}from"./chunk-HJ4GLC7I.js";import{a as uo,e as nd}from"./chunk-ELNLNDZ3.js";import{b as H,c as Mt,f as ml,g as qs,j as Yr,k as Ws,l as eo}from"./chunk-QKI3PLZJ.js";import"./chunk-F6XMG7MJ.js";import{p as pl}from"./chunk-GHGEILSU.js";import{a as gl,b as vl,c as yl}from"./chunk-MYBZA4T6.js";import{a as Pn,b as id,g as pd}from"./chunk-ESJ4OOFV.js";import{a as ud}from"./chunk-PMME3L4G.js";import"./chunk-LEWSH4KN.js";import{$ as kl,Ba as W,Z as Ol,a as xl,aa as Gr,ba as qr,ca as ta,da as so,ea as Dl,fa as Ll,ga as Pl,ha as Ul,ia as Fl,ja as Bl,ka as ra,la as Vl,ma as Dn,na as zl,o as Rl,oa as Tt,pa as jl,qa as $l,ra as sr,s as Il,sa as na,va as Kl,ya as Yl}from"./chunk-5NYTGQAW.js";import"./chunk-2STKFTPR.js";import{A as Ee,Ab as dt,Ac as Xi,Ba as In,Bb as Ot,Ca as On,Cb as Nn,Ec as il,Fa as $i,G as Cn,Gb as Ks,H as fe,I as Vs,Id as Xs,Jb as Wi,Jd as to,K as ae,Ka as Ki,Kb as Nt,Kd as bl,La as Yi,Lc as ol,Ld as Zs,M as bt,Md as Js,N as ju,Nc as sl,Nd as Tl,O as $u,Oc as Ys,Od as Al,P as wn,Pd as Hr,Qd as Cl,Ra as js,Rc as Mn,S as Ht,Sc as Hs,Sd as ea,Tc as Gs,Uc as al,Va as Xu,Vc as cl,W as Ku,Wc as ul,Xa as et,Xb as Sr,Xc as Zi,Zb as Qi,_a as Zu,_c as ll,a as b,aa as ir,ab as $r,b as P,ba as Yu,c as Uu,ca as Hu,da as Ke,ea as Gu,fb as Hi,fc as rl,ga as zs,gb as tt,ha as ji,i as Bs,ja as qu,jb as Ju,ka as ut,la as q,lb as Gi,m as Fu,n as zi,na as N,nb as el,o as Bu,oa as Je,pa as Oe,pb as tl,pc as Kr,q as Vu,qa as y,qb as lt,r as zu,ra as Se,rb as $s,t as X,ta as Wu,tb as qi,u as nr,va as xn,wa as Rn,x as An,xa as Qu,y as w,zc as nl}from"./chunk-QBEKUWWN.js";function yd(r){return new q(3e3,!1)}function dv(){return new q(3100,!1)}function fv(){return new q(3101,!1)}function pv(r){return new q(3001,!1)}function hv(r){return new q(3003,!1)}function mv(r){return new q(3004,!1)}function gv(r,e){return new q(3005,!1)}function vv(){return new q(3006,!1)}function yv(){return new q(3007,!1)}function Ev(r,e){return new q(3008,!1)}function Sv(r){return new q(3002,!1)}function _v(r,e,t,n,i){return new q(3010,!1)}function bv(){return new q(3011,!1)}function Tv(){return new q(3012,!1)}function Av(){return new q(3200,!1)}function Cv(){return new q(3202,!1)}function wv(){return new q(3013,!1)}function xv(r){return new q(3014,!1)}function Rv(r){return new q(3015,!1)}function Iv(r){return new q(3016,!1)}function Ov(r,e){return new q(3404,!1)}function Nv(r){return new q(3502,!1)}function Mv(r){return new q(3503,!1)}function kv(){return new q(3300,!1)}function Dv(r){return new q(3504,!1)}function Lv(r){return new q(3301,!1)}function Pv(r,e){return new q(3302,!1)}function Uv(r){return new q(3303,!1)}function Fv(r,e){return new q(3400,!1)}function Bv(r){return new q(3401,!1)}function Vv(r){return new q(3402,!1)}function zv(r,e){return new q(3505,!1)}function ar(r){switch(r.length){case 0:return new Yr;case 1:return r[0];default:return new Ws(r)}}function Md(r,e,t=new Map,n=new Map){let i=[],o=[],s=-1,a=null;if(e.forEach(c=>{let u=c.get("offset"),l=u==s,d=l&&a||new Map;c.forEach((f,p)=>{let h=p,m=f;if(p!=="offset")switch(h=r.normalizePropertyName(h,i),m){case eo:m=t.get(p);break;case Mt:m=n.get(p);break;default:m=r.normalizeStyleValue(p,h,m,i);break}d.set(h,m)}),l||o.push(d),a=d,s=u}),i.length)throw Nv(i);return o}function wa(r,e,t,n){switch(e){case"start":r.onStart(()=>n(t&&oa(t,"start",r)));break;case"done":r.onDone(()=>n(t&&oa(t,"done",r)));break;case"destroy":r.onDestroy(()=>n(t&&oa(t,"destroy",r)));break}}function oa(r,e,t){let n=t.totalTime,i=!!t.disabled,o=xa(r.element,r.triggerName,r.fromState,r.toState,e||r.phaseName,n??r.totalTime,i),s=r._data;return s!=null&&(o._data=s),o}function xa(r,e,t,n,i="",o=0,s){return{element:r,triggerName:e,fromState:t,toState:n,phaseName:i,totalTime:o,disabled:!!s}}function nt(r,e,t){let n=r.get(e);return n||r.set(e,n=t),n}function Ed(r){let e=r.indexOf(":"),t=r.substring(1,e),n=r.slice(e+1);return[t,n]}var jv=typeof document>"u"?null:document.documentElement;function Ra(r){let e=r.parentNode||r.host||null;return e===jv?null:e}function $v(r){return r.substring(1,6)=="ebkit"}var br=null,Sd=!1;function Kv(r){br||(br=Yv()||{},Sd=br.style?"WebkitAppearance"in br.style:!1);let e=!0;return br.style&&!$v(r)&&(e=r in br.style,!e&&Sd&&(e="Webkit"+r.charAt(0).toUpperCase()+r.slice(1)in br.style)),e}function Yv(){return typeof document<"u"?document.body:null}function kd(r,e){for(;e;){if(e===r)return!0;e=Ra(e)}return!1}function Dd(r,e,t){if(t)return Array.from(r.querySelectorAll(e));let n=r.querySelector(e);return n?[n]:[]}var Ia=(()=>{class r{validateStyleProperty(t){return Kv(t)}containsElement(t,n){return kd(t,n)}getParentElement(t){return Ra(t)}query(t,n,i){return Dd(t,n,i)}computeStyle(t,n,i){return i||""}animate(t,n,i,o,s,a=[],c){return new Yr(i,o)}static \u0275fac=function(n){return new(n||r)};static \u0275prov=N({token:r,factory:r.\u0275fac})}return r})(),Cr=class{static NOOP=new Ia},wr=class{};var Hv=1e3,Ld="{{",Gv="}}",Pd="ng-enter",da="ng-leave",lo="ng-trigger",go=".ng-trigger",_d="ng-animating",fa=".ng-animating";function Gt(r){if(typeof r=="number")return r;let e=r.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:pa(parseFloat(e[1]),e[2])}function pa(r,e){switch(e){case"s":return r*Hv;default:return r}}function vo(r,e,t){return r.hasOwnProperty("duration")?r:qv(r,e,t)}function qv(r,e,t){let n=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,i,o=0,s="";if(typeof r=="string"){let a=r.match(n);if(a===null)return e.push(yd(r)),{duration:0,delay:0,easing:""};i=pa(parseFloat(a[1]),a[2]);let c=a[3];c!=null&&(o=pa(parseFloat(c),a[4]));let u=a[5];u&&(s=u)}else i=r;if(!t){let a=!1,c=e.length;i<0&&(e.push(dv()),a=!0),o<0&&(e.push(fv()),a=!0),a&&e.splice(c,0,yd(r))}return{duration:i,delay:o,easing:s}}function Wv(r){return r.length?r[0]instanceof Map?r:r.map(e=>new Map(Object.entries(e))):[]}function kt(r,e,t){e.forEach((n,i)=>{let o=Oa(i);t&&!t.has(i)&&t.set(i,r.style[o]),r.style[o]=n})}function Ar(r,e){e.forEach((t,n)=>{let i=Oa(n);r.style[i]=""})}function Un(r){return Array.isArray(r)?r.length==1?r[0]:ml(r):r}function Qv(r,e,t){let n=e.params||{},i=Ud(r);i.length&&i.forEach(o=>{n.hasOwnProperty(o)||t.push(pv(o))})}var ha=new RegExp(`${Ld}\\s*(.+?)\\s*${Gv}`,"g");function Ud(r){let e=[];if(typeof r=="string"){let t;for(;t=ha.exec(r);)e.push(t[1]);ha.lastIndex=0}return e}function Bn(r,e,t){let n=`${r}`,i=n.replace(ha,(o,s)=>{let a=e[s];return a==null&&(t.push(hv(s)),a=""),a.toString()});return i==n?r:i}var Xv=/-+([a-z0-9])/g;function Oa(r){return r.replace(Xv,(...e)=>e[1].toUpperCase())}function Zv(r,e){return r===0||e===0}function Jv(r,e,t){if(t.size&&e.length){let n=e[0],i=[];if(t.forEach((o,s)=>{n.has(s)||i.push(s),n.set(s,o)}),i.length)for(let o=1;o<e.length;o++){let s=e[o];i.forEach(a=>s.set(a,Na(r,a)))}}return e}function rt(r,e,t){switch(e.type){case H.Trigger:return r.visitTrigger(e,t);case H.State:return r.visitState(e,t);case H.Transition:return r.visitTransition(e,t);case H.Sequence:return r.visitSequence(e,t);case H.Group:return r.visitGroup(e,t);case H.Animate:return r.visitAnimate(e,t);case H.Keyframes:return r.visitKeyframes(e,t);case H.Style:return r.visitStyle(e,t);case H.Reference:return r.visitReference(e,t);case H.AnimateChild:return r.visitAnimateChild(e,t);case H.AnimateRef:return r.visitAnimateRef(e,t);case H.Query:return r.visitQuery(e,t);case H.Stagger:return r.visitStagger(e,t);default:throw mv(e.type)}}function Na(r,e){return window.getComputedStyle(r)[e]}var ey=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),yo=class extends wr{normalizePropertyName(e,t){return Oa(e)}normalizeStyleValue(e,t,n,i){let o="",s=n.toString().trim();if(ey.has(t)&&n!==0&&n!=="0")if(typeof n=="number")o="px";else{let a=n.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(gv(e,n))}return s+o}};var Eo="*";function ty(r,e){let t=[];return typeof r=="string"?r.split(/\s*,\s*/).forEach(n=>ry(n,t,e)):t.push(r),t}function ry(r,e,t){if(r[0]==":"){let c=ny(r,t);if(typeof c=="function"){e.push(c);return}r=c}let n=r.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(n==null||n.length<4)return t.push(Rv(r)),e;let i=n[1],o=n[2],s=n[3];e.push(bd(i,s));let a=i==Eo&&s==Eo;o[0]=="<"&&!a&&e.push(bd(s,i))}function ny(r,e){switch(r){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,n)=>parseFloat(n)>parseFloat(t);case":decrement":return(t,n)=>parseFloat(n)<parseFloat(t);default:return e.push(Iv(r)),"* => *"}}var fo=new Set(["true","1"]),po=new Set(["false","0"]);function bd(r,e){let t=fo.has(r)||po.has(r),n=fo.has(e)||po.has(e);return(i,o)=>{let s=r==Eo||r==i,a=e==Eo||e==o;return!s&&t&&typeof i=="boolean"&&(s=i?fo.has(r):po.has(r)),!a&&n&&typeof o=="boolean"&&(a=o?fo.has(e):po.has(e)),s&&a}}var Fd=":self",iy=new RegExp(`s*${Fd}s*,?`,"g");function Bd(r,e,t,n){return new ma(r).build(e,t,n)}var Td="",ma=class{_driver;constructor(e){this._driver=e}build(e,t,n){let i=new ga(t);return this._resetContextStyleTimingState(i),rt(this,Un(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector=Td,e.collectedStyles=new Map,e.collectedStyles.set(Td,new Map),e.currentTime=0}visitTrigger(e,t){let n=t.queryCount=0,i=t.depCount=0,o=[],s=[];return e.name.charAt(0)=="@"&&t.errors.push(vv()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==H.State){let c=a,u=c.name;u.toString().split(/\s*,\s*/).forEach(l=>{c.name=l,o.push(this.visitState(c,t))}),c.name=u}else if(a.type==H.Transition){let c=this.visitTransition(a,t);n+=c.queryCount,i+=c.depCount,s.push(c)}else t.errors.push(yv())}),{type:H.Trigger,name:e.name,states:o,transitions:s,queryCount:n,depCount:i,options:null}}visitState(e,t){let n=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(n.containsDynamicStyles){let o=new Set,s=i||{};n.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{Ud(c).forEach(u=>{s.hasOwnProperty(u)||o.add(u)})})}),o.size&&t.errors.push(Ev(e.name,[...o.values()]))}return{type:H.State,name:e.name,style:n,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let n=rt(this,Un(e.animation),t),i=ty(e.expr,t.errors);return{type:H.Transition,matchers:i,animation:n,queryCount:t.queryCount,depCount:t.depCount,options:Tr(e.options)}}visitSequence(e,t){return{type:H.Sequence,steps:e.steps.map(n=>rt(this,n,t)),options:Tr(e.options)}}visitGroup(e,t){let n=t.currentTime,i=0,o=e.steps.map(s=>{t.currentTime=n;let a=rt(this,s,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:H.Group,steps:o,options:Tr(e.options)}}visitAnimate(e,t){let n=cy(e.timings,t.errors);t.currentAnimateTimings=n;let i,o=e.styles?e.styles:qs({});if(o.type==H.Keyframes)i=this.visitKeyframes(o,t);else{let s=e.styles,a=!1;if(!s){a=!0;let u={};n.easing&&(u.easing=n.easing),s=qs(u)}t.currentTime+=n.duration+n.delay;let c=this.visitStyle(s,t);c.isEmptyStep=a,i=c}return t.currentAnimateTimings=null,{type:H.Animate,timings:n,style:i,options:null}}visitStyle(e,t){let n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}_makeStyleAst(e,t){let n=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)typeof a=="string"?a===Mt?n.push(a):t.errors.push(Sv(a)):n.push(new Map(Object.entries(a)));let o=!1,s=null;return n.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o)){for(let c of a.values())if(c.toString().indexOf(Ld)>=0){o=!0;break}}}),{type:H.Style,styles:n,easing:s,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){let n=t.currentAnimateTimings,i=t.currentTime,o=t.currentTime;n&&o>0&&(o-=n.duration+n.delay),e.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,c)=>{let u=t.collectedStyles.get(t.currentQuerySelector),l=u.get(c),d=!0;l&&(o!=i&&o>=l.startTime&&i<=l.endTime&&(t.errors.push(_v(c,l.startTime,l.endTime,o,i)),d=!1),o=l.startTime),d&&u.set(c,{startTime:o,endTime:i}),t.options&&Qv(a,t.options,t.errors)})})}visitKeyframes(e,t){let n={type:H.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(bv()),n;let i=1,o=0,s=[],a=!1,c=!1,u=0,l=e.steps.map(E=>{let x=this._makeStyleAst(E,t),k=x.offset!=null?x.offset:ay(x.styles),A=0;return k!=null&&(o++,A=x.offset=k),c=c||A<0||A>1,a=a||A<u,u=A,s.push(A),x});c&&t.errors.push(Tv()),a&&t.errors.push(Av());let d=e.steps.length,f=0;o>0&&o<d?t.errors.push(Cv()):o==0&&(f=i/(d-1));let p=d-1,h=t.currentTime,m=t.currentAnimateTimings,g=m.duration;return l.forEach((E,x)=>{let k=f>0?x==p?1:f*x:s[x],A=k*g;t.currentTime=h+m.delay+A,m.duration=A,this._validateStyleAst(E,t),E.offset=k,n.styles.push(E)}),n}visitReference(e,t){return{type:H.Reference,animation:rt(this,Un(e.animation),t),options:Tr(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:H.AnimateChild,options:Tr(e.options)}}visitAnimateRef(e,t){return{type:H.AnimateRef,animation:this.visitReference(e.animation,t),options:Tr(e.options)}}visitQuery(e,t){let n=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;let[o,s]=oy(e.selector);t.currentQuerySelector=n.length?n+" "+o:o,nt(t.collectedStyles,t.currentQuerySelector,new Map);let a=rt(this,Un(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:H.Query,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:a,originalSelector:e.selector,options:Tr(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(wv());let n=e.timings==="full"?{duration:0,delay:0,easing:"full"}:vo(e.timings,t.errors,!0);return{type:H.Stagger,animation:rt(this,Un(e.animation),t),timings:n,options:null}}};function oy(r){let e=!!r.split(/\s*,\s*/).find(t=>t==Fd);return e&&(r=r.replace(iy,"")),r=r.replace(/@\*/g,go).replace(/@\w+/g,t=>go+"-"+t.slice(1)).replace(/:animating/g,fa),[r,e]}function sy(r){return r?b({},r):null}var ga=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(e){this.errors=e}};function ay(r){if(typeof r=="string")return null;let e=null;if(Array.isArray(r))r.forEach(t=>{if(t instanceof Map&&t.has("offset")){let n=t;e=parseFloat(n.get("offset")),n.delete("offset")}});else if(r instanceof Map&&r.has("offset")){let t=r;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function cy(r,e){if(r.hasOwnProperty("duration"))return r;if(typeof r=="number"){let o=vo(r,e).duration;return sa(o,0,"")}let t=r;if(t.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=sa(0,0,"");return o.dynamic=!0,o.strValue=t,o}let i=vo(t,e);return sa(i.duration,i.delay,i.easing)}function Tr(r){return r?(r=b({},r),r.params&&(r.params=sy(r.params))):r={},r}function sa(r,e,t){return{duration:r,delay:e,easing:t}}function Ma(r,e,t,n,i,o,s=null,a=!1){return{type:1,element:r,keyframes:e,preStyleProps:t,postStyleProps:n,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}var Vn=class{_map=new Map;get(e){return this._map.get(e)||[]}append(e,t){let n=this._map.get(e);n||this._map.set(e,n=[]),n.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},uy=1,ly=":enter",dy=new RegExp(ly,"g"),fy=":leave",py=new RegExp(fy,"g");function Vd(r,e,t,n,i,o=new Map,s=new Map,a,c,u=[]){return new va().buildKeyframes(r,e,t,n,i,o,s,a,c,u)}var va=class{buildKeyframes(e,t,n,i,o,s,a,c,u,l=[]){u=u||new Vn;let d=new ya(e,t,u,i,o,l,[]);d.options=c;let f=c.delay?Gt(c.delay):0;d.currentTimeline.delayNextStep(f),d.currentTimeline.setStyles([s],null,d.errors,c),rt(this,n,d);let p=d.timelines.filter(h=>h.containsAnimation());if(p.length&&a.size){let h;for(let m=p.length-1;m>=0;m--){let g=p[m];if(g.element===t){h=g;break}}h&&!h.allowOnlyTimelineStyles()&&h.setStyles([a],null,d.errors,c)}return p.length?p.map(h=>h.buildKeyframes()):[Ma(t,[],[],[],0,f,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let n=t.subInstructions.get(t.element);if(n){let i=t.createSubContext(e.options),o=t.currentTimeline.currentTime,s=this._visitSubInstructions(n,i,i.options);o!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){let n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,n),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,n){for(let i of e){let o=i?.delay;if(o){let s=typeof o=="number"?o:Gt(Bn(o,i?.params??{},t.errors));n.delayNextStep(s)}}}_visitSubInstructions(e,t,n){let o=t.currentTimeline.currentTime,s=n.duration!=null?Gt(n.duration):null,a=n.delay!=null?Gt(n.delay):null;return s!==0&&e.forEach(c=>{let u=t.appendInstructionToTimeline(c,s,a);o=Math.max(o,u.duration+u.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),rt(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let n=t.subContextCount,i=t,o=e.options;if(o&&(o.params||o.delay)&&(i=t.createSubContext(o),i.transformIntoNewTimeline(),o.delay!=null)){i.previousNode.type==H.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=So);let s=Gt(o.delay);i.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>rt(this,s,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>n&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let n=[],i=t.currentTimeline.currentTime,o=e.options&&e.options.delay?Gt(e.options.delay):0;e.steps.forEach(s=>{let a=t.createSubContext(e.options);o&&a.delayNextStep(o),rt(this,s,a),i=Math.max(i,a.currentTimeline.currentTime),n.push(a.currentTimeline)}),n.forEach(s=>t.currentTimeline.mergeTimelineCollectedStyles(s)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let n=e.strValue,i=t.params?Bn(n,t.params,t.errors):n;return vo(i,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let n=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),i.snapshotCurrentStyles());let o=e.style;o.type==H.Keyframes?this.visitKeyframes(o,t):(t.incrementTime(n.duration),this.visitStyle(o,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let n=t.currentTimeline,i=t.currentAnimateTimings;!i&&n.hasCurrentStyleProperties()&&n.forwardFrame();let o=i&&i.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(o):n.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let n=t.currentAnimateTimings,i=t.currentTimeline.duration,o=n.duration,a=t.createSubContext().currentTimeline;a.easing=n.easing,e.styles.forEach(c=>{let u=c.offset||0;a.forwardTime(u*o),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+o),t.previousNode=e}visitQuery(e,t){let n=t.currentTimeline.currentTime,i=e.options||{},o=i.delay?Gt(i.delay):0;o&&(t.previousNode.type===H.Style||n==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=So);let s=n,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((u,l)=>{t.currentQueryIndex=l;let d=t.createSubContext(e.options,u);o&&d.delayNextStep(o),u===t.element&&(c=d.currentTimeline),rt(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe();let f=d.currentTimeline.currentTime;s=Math.max(s,f)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let n=t.parentContext,i=t.currentTimeline,o=e.timings,s=Math.abs(o.duration),a=s*(t.currentQueryTotal-1),c=s*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":c=a-c;break;case"full":c=n.currentStaggerTime;break}let l=t.currentTimeline;c&&l.delayNextStep(c);let d=l.currentTime;rt(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=i.currentTime-d+(i.startTime-n.currentTimeline.startTime)}},So={},ya=class r{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=So;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(e,t,n,i,o,s,a,c){this._driver=e,this.element=t,this.subInstructions=n,this._enterClassName=i,this._leaveClassName=o,this.errors=s,this.timelines=a,this.currentTimeline=c||new _o(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let n=e,i=this.options;n.duration!=null&&(i.duration=Gt(n.duration)),n.delay!=null&&(i.delay=Gt(n.delay));let o=n.params;if(o){let s=i.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!t||!s.hasOwnProperty(a))&&(s[a]=Bn(o[a],s,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let n=e.params={};Object.keys(t).forEach(i=>{n[i]=t[i]})}}return e}createSubContext(e=null,t,n){let i=t||this.element,o=new r(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,n||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=So,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,n){let i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(n??0)+e.delay,easing:""},o=new Ea(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,n,i,o,s){let a=[];if(i&&a.push(this.element),e.length>0){e=e.replace(dy,"."+this._enterClassName),e=e.replace(py,"."+this._leaveClassName);let c=n!=1,u=this._driver.query(this.element,e,c);n!==0&&(u=n<0?u.slice(u.length+n,u.length):u.slice(0,n)),a.push(...u)}return!o&&a.length==0&&s.push(xv(t)),a}},_o=class r{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(e,t,n,i){this._driver=e,this.element=t,this.startTime=n,this._elementTimelineStylesLookup=i,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new r(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=uy,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,n]of this._globalTimelineStyles)this._backFill.set(t,n||Mt),this._currentKeyframe.set(t,Mt);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,n,i){t&&this._previousKeyframe.set("easing",t);let o=i&&i.params||{},s=hy(e,this._globalTimelineStyles);for(let[a,c]of s){let u=Bn(c,o,n);this._pendingStyles.set(a,u),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Mt),this._updateStyle(a,u)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,n)=>{let i=this._styleSummary.get(n);(!i||t.time>i.time)&&this._updateStyle(n,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,n=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((a,c)=>{let u=new Map([...this._backFill,...a]);u.forEach((l,d)=>{l===eo?e.add(d):l===Mt&&t.add(d)}),n||u.set("offset",c/this.duration),i.push(u)});let o=[...e.values()],s=[...t.values()];if(n){let a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return Ma(this.element,i,o,s,this.duration,this.startTime,this.easing,!1)}},Ea=class extends _o{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(e,t,n,i,o,s,a=!1){super(e,t,s.delay),this.keyframes=n,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:n,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){let o=[],s=n+t,a=t/s,c=new Map(e[0]);c.set("offset",0),o.push(c);let u=new Map(e[0]);u.set("offset",Ad(a)),o.push(u);let l=e.length-1;for(let d=1;d<=l;d++){let f=new Map(e[d]),p=f.get("offset"),h=t+p*n;f.set("offset",Ad(h/s)),o.push(f)}n=s,t=0,i="",e=o}return Ma(this.element,e,this.preStyleProps,this.postStyleProps,n,t,i,!0)}};function Ad(r,e=3){let t=Math.pow(10,e-1);return Math.round(r*t)/t}function hy(r,e){let t=new Map,n;return r.forEach(i=>{if(i==="*"){n??=e.keys();for(let o of n)t.set(o,Mt)}else for(let[o,s]of i)t.set(o,s)}),t}function Cd(r,e,t,n,i,o,s,a,c,u,l,d,f){return{type:0,element:r,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:o,toState:n,toStyles:s,timelines:a,queriedElements:c,preStyleProps:u,postStyleProps:l,totalTime:d,errors:f}}var aa={},bo=class{_triggerName;ast;_stateStyles;constructor(e,t,n){this._triggerName=e,this.ast=t,this._stateStyles=n}match(e,t,n,i){return my(this.ast.matchers,e,t,n,i)}buildStyles(e,t,n){let i=this._stateStyles.get("*");return e!==void 0&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,n):new Map}build(e,t,n,i,o,s,a,c,u,l){let d=[],f=this.ast.options&&this.ast.options.params||aa,p=a&&a.params||aa,h=this.buildStyles(n,p,d),m=c&&c.params||aa,g=this.buildStyles(i,m,d),E=new Set,x=new Map,k=new Map,A=i==="void",S={params:zd(m,f),delay:this.ast.options?.delay},C=l?[]:Vd(e,t,this.ast.animation,o,s,h,g,S,u,d),V=0;return C.forEach(z=>{V=Math.max(z.duration+z.delay,V)}),d.length?Cd(t,this._triggerName,n,i,A,h,g,[],[],x,k,V,d):(C.forEach(z=>{let T=z.element,O=nt(x,T,new Set);z.preStyleProps.forEach(Pe=>O.add(Pe));let ye=nt(k,T,new Set);z.postStyleProps.forEach(Pe=>ye.add(Pe)),T!==t&&E.add(T)}),Cd(t,this._triggerName,n,i,A,h,g,C,[...E.values()],x,k,V))}};function my(r,e,t,n,i){return r.some(o=>o(e,t,n,i))}function zd(r,e){let t=b({},e);return Object.entries(r).forEach(([n,i])=>{i!=null&&(t[n]=i)}),t}var Sa=class{styles;defaultParams;normalizer;constructor(e,t,n){this.styles=e,this.defaultParams=t,this.normalizer=n}buildStyles(e,t){let n=new Map,i=zd(e,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,a)=>{s&&(s=Bn(s,i,t));let c=this.normalizer.normalizePropertyName(a,t);s=this.normalizer.normalizeStyleValue(a,c,s,t),n.set(a,s)})}),n}};function gy(r,e,t){return new _a(r,e,t)}var _a=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(e,t,n){this.name=e,this.ast=t,this._normalizer=n,t.states.forEach(i=>{let o=i.options&&i.options.params||{};this.states.set(i.name,new Sa(i.style,o,n))}),wd(this.states,"true","1"),wd(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new bo(e,i,this.states))}),this.fallbackTransition=vy(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,n,i){return this.transitionFactories.find(s=>s.match(e,t,n,i))||null}matchStyles(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}};function vy(r,e,t){let n=[(s,a)=>!0],i={type:H.Sequence,steps:[],options:null},o={type:H.Transition,animation:i,matchers:n,options:null,queryCount:0,depCount:0};return new bo(r,o,e)}function wd(r,e,t){r.has(e)?r.has(t)||r.set(t,r.get(e)):r.has(t)&&r.set(e,r.get(t))}var yy=new Vn,ba=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n}register(e,t){let n=[],i=[],o=Bd(this._driver,t,n,i);if(n.length)throw Mv(n);this._animations.set(e,o)}_buildPlayer(e,t,n){let i=e.element,o=Md(this._normalizer,e.keyframes,t,n);return this._driver.animate(i,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,n={}){let i=[],o=this._animations.get(e),s,a=new Map;if(o?(s=Vd(this._driver,t,o,Pd,da,new Map,new Map,n,yy,i),s.forEach(l=>{let d=nt(a,l.element,new Map);l.postStyleProps.forEach(f=>d.set(f,null))})):(i.push(kv()),s=[]),i.length)throw Dv(i);a.forEach((l,d)=>{l.forEach((f,p)=>{l.set(p,this._driver.computeStyle(d,p,Mt))})});let c=s.map(l=>{let d=a.get(l.element);return this._buildPlayer(l,new Map,d)}),u=ar(c);return this._playersById.set(e,u),u.onDestroy(()=>this.destroy(e)),this.players.push(u),u}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw Lv(e);return t}listen(e,t,n,i){let o=xa(t,"","","");return wa(this._getPlayer(e),n,o,i),()=>{}}command(e,t,n,i){if(n=="register"){this.register(e,i[0]);return}if(n=="create"){let s=i[0]||{};this.create(e,t,s);return}let o=this._getPlayer(e);switch(n){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e);break}}},xd="ng-animate-queued",Ey=".ng-animate-queued",ca="ng-animate-disabled",Sy=".ng-animate-disabled",_y="ng-star-inserted",by=".ng-star-inserted",Ty=[],jd={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Ay={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},At="__ng_removed",zn=class{namespaceId;value;options;get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let n=e&&e.hasOwnProperty("value"),i=n?e.value:e;if(this.value=wy(i),n){let o=e,{value:s}=o,a=Uu(o,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let n=this.options.params;Object.keys(t).forEach(i=>{n[i]==null&&(n[i]=t[i])})}}},Fn="void",ua=new zn(Fn),Ta=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(e,t,n){this.id=e,this.hostElement=t,this._engine=n,this._hostClassName="ng-tns-"+e,ft(t,this._hostClassName)}listen(e,t,n,i){if(!this._triggers.has(t))throw Pv(n,t);if(n==null||n.length==0)throw Uv(t);if(!xy(n))throw Fv(n,t);let o=nt(this._elementListeners,e,[]),s={name:t,phase:n,callback:i};o.push(s);let a=nt(this._engine.statesByElement,e,new Map);return a.has(t)||(ft(e,lo),ft(e,lo+"-"+t),a.set(t,ua)),()=>{this._engine.afterFlush(()=>{let c=o.indexOf(s);c>=0&&o.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw Bv(e);return t}trigger(e,t,n,i=!0){let o=this._getTrigger(t),s=new jn(this.id,t,e),a=this._engine.statesByElement.get(e);a||(ft(e,lo),ft(e,lo+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t),u=new zn(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&c&&u.absorbOptions(c.options),a.set(t,u),c||(c=ua),!(u.value===Fn)&&c.value===u.value){if(!Oy(c.params,u.params)){let m=[],g=o.matchStyles(c.value,c.params,m),E=o.matchStyles(u.value,u.params,m);m.length?this._engine.reportError(m):this._engine.afterFlush(()=>{Ar(e,g),kt(e,E)})}return}let f=nt(this._engine.playersByElement,e,[]);f.forEach(m=>{m.namespaceId==this.id&&m.triggerName==t&&m.queued&&m.destroy()});let p=o.matchTransition(c.value,u.value,e,u.params),h=!1;if(!p){if(!i)return;p=o.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:p,fromState:c,toState:u,player:s,isFallbackTransition:h}),h||(ft(e,xd),s.onStart(()=>{Wr(e,xd)})),s.onDone(()=>{let m=this.players.indexOf(s);m>=0&&this.players.splice(m,1);let g=this._engine.playersByElement.get(e);if(g){let E=g.indexOf(s);E>=0&&g.splice(E,1)}}),this.players.push(s),f.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,n)=>{this._elementListeners.set(n,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(n=>n.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let n=this._engine.driver.query(e,go,!0);n.forEach(i=>{if(i[At])return;let o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(s=>s.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,n,i){let o=this._engine.statesByElement.get(e),s=new Map;if(o){let a=[];if(o.forEach((c,u)=>{if(s.set(u,c.value),this._triggers.has(u)){let l=this.trigger(e,u,Fn,i);l&&a.push(l)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,s),n&&ar(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),n=this._engine.statesByElement.get(e);if(t&&n){let i=new Set;t.forEach(o=>{let s=o.name;if(i.has(s))return;i.add(s);let c=this._triggers.get(s).fallbackTransition,u=n.get(s)||ua,l=new zn(Fn),d=new jn(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:c,fromState:u,toState:l,player:d,isFallbackTransition:!0})})}}removeNode(e,t){let n=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(n.totalAnimations){let o=n.players.length?n.playersByQueriedElement.get(e):[];if(o&&o.length)i=!0;else{let s=e;for(;s=s.parentNode;)if(n.statesByElement.get(s)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)n.markElementAsRemoved(this.id,e,!1,t);else{let o=e[At];(!o||o===jd)&&(n.afterFlush(()=>this.clearElementCache(e)),n.destroyInnerAnimations(e),n._onRemovalComplete(e,t))}}insertNode(e,t){ft(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(n=>{let i=n.player;if(i.destroyed)return;let o=n.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==n.triggerName){let c=xa(o,n.triggerName,n.fromState.value,n.toState.value);c._data=e,wa(n.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(n)}),this._queue=[],t.sort((n,i)=>{let o=n.transition.ast.depCount,s=i.transition.ast.depCount;return o==0||s==0?o-s:this._engine.driver.containsElement(n.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},Aa=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(e,t)=>{};_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,n){this.bodyNode=e,this.driver=t,this._normalizer=n}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(n=>{n.queued&&e.push(n)})}),e}createNamespace(e,t){let n=new Ta(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}_balanceNamespaceList(e,t){let n=this._namespaceList,i=this.namespacesByHostElement;if(n.length-1>=0){let s=!1,a=this.driver.getParentElement(t);for(;a;){let c=i.get(a);if(c){let u=n.indexOf(c);n.splice(u+1,0,e),s=!0;break}a=this.driver.getParentElement(a)}s||n.unshift(e)}else n.push(e);return i.set(t,e),e}register(e,t){let n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}registerTrigger(e,t,n){let i=this._namespaceLookup[e];i&&i.register(t,n)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let n=this._fetchNamespace(e);this.namespacesByHostElement.delete(n.hostElement);let i=this._namespaceList.indexOf(n);i>=0&&this._namespaceList.splice(i,1),n.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,n=this.statesByElement.get(e);if(n){for(let i of n.values())if(i.namespaceId){let o=this._fetchNamespace(i.namespaceId);o&&t.add(o)}}return t}trigger(e,t,n,i){if(ho(t)){let o=this._fetchNamespace(e);if(o)return o.trigger(t,n,i),!0}return!1}insertNode(e,t,n,i){if(!ho(t))return;let o=t[At];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let s=this.collectedLeaveElements.indexOf(t);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){let s=this._fetchNamespace(e);s&&s.insertNode(t,n)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),ft(e,ca)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Wr(e,ca))}removeNode(e,t,n){if(ho(t)){let i=e?this._fetchNamespace(e):null;i?i.removeNode(t,n):this.markElementAsRemoved(e,t,!1,n);let o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,n)}else this._onRemovalComplete(t,n)}markElementAsRemoved(e,t,n,i,o){this.collectedLeaveElements.push(t),t[At]={namespaceId:e,setForRemoval:i,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,n,i,o){return ho(t)?this._fetchNamespace(e).listen(t,n,i,o):()=>{}}_buildInstruction(e,t,n,i,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,i,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,go,!0);t.forEach(n=>this.destroyActiveAnimationsForElement(n)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,fa,!0),t.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return ar(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[At];if(t&&t.setForRemoval){if(e[At]=jd,t.namespaceId){this.destroyInnerAnimations(e);let n=this._fetchNamespace(t.namespaceId);n&&n.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(ca)&&this.markElementAsDisabled(e,!1),this.driver.query(e,Sy,!0).forEach(n=>{this.markElementAsDisabled(n,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,i)=>this._balanceNamespaceList(n,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++){let i=this.collectedEnterElements[n];ft(i,_y)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let n=[];try{t=this._flushAnimations(n,e)}finally{for(let i=0;i<n.length;i++)n[i]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++){let i=this.collectedLeaveElements[n];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){let n=this._whenQuietFns;this._whenQuietFns=[],t.length?ar(t).onDone(()=>{n.forEach(i=>i())}):n.forEach(i=>i())}}reportError(e){throw Vv(e)}_flushAnimations(e,t){let n=new Vn,i=[],o=new Map,s=[],a=new Map,c=new Map,u=new Map,l=new Set;this.disabledNodes.forEach(R=>{l.add(R);let M=this.driver.query(R,Ey,!0);for(let D=0;D<M.length;D++)l.add(M[D])});let d=this.bodyNode,f=Array.from(this.statesByElement.keys()),p=Od(f,this.collectedEnterElements),h=new Map,m=0;p.forEach((R,M)=>{let D=Pd+m++;h.set(M,D),R.forEach(K=>ft(K,D))});let g=[],E=new Set,x=new Set;for(let R=0;R<this.collectedLeaveElements.length;R++){let M=this.collectedLeaveElements[R],D=M[At];D&&D.setForRemoval&&(g.push(M),E.add(M),D.hasAnimation?this.driver.query(M,by,!0).forEach(K=>E.add(K)):x.add(M))}let k=new Map,A=Od(f,Array.from(E));A.forEach((R,M)=>{let D=da+m++;k.set(M,D),R.forEach(K=>ft(K,D))}),e.push(()=>{p.forEach((R,M)=>{let D=h.get(M);R.forEach(K=>Wr(K,D))}),A.forEach((R,M)=>{let D=k.get(M);R.forEach(K=>Wr(K,D))}),g.forEach(R=>{this.processLeaveNode(R)})});let S=[],C=[];for(let R=this._namespaceList.length-1;R>=0;R--)this._namespaceList[R].drainQueuedTransitions(t).forEach(D=>{let K=D.player,Ie=D.element;if(S.push(K),this.collectedEnterElements.length){let Fe=Ie[At];if(Fe&&Fe.setForMove){if(Fe.previousTriggersValues&&Fe.previousTriggersValues.has(D.triggerName)){let Er=Fe.previousTriggersValues.get(D.triggerName),ct=this.statesByElement.get(D.element);if(ct&&ct.has(D.triggerName)){let Vi=ct.get(D.triggerName);Vi.value=Er,ct.set(D.triggerName,Vi)}}K.destroy();return}}let It=!d||!this.driver.containsElement(d,Ie),Ze=k.get(Ie),rr=h.get(Ie),he=this._buildInstruction(D,n,rr,Ze,It);if(he.errors&&he.errors.length){C.push(he);return}if(It){K.onStart(()=>Ar(Ie,he.fromStyles)),K.onDestroy(()=>kt(Ie,he.toStyles)),i.push(K);return}if(D.isFallbackTransition){K.onStart(()=>Ar(Ie,he.fromStyles)),K.onDestroy(()=>kt(Ie,he.toStyles)),i.push(K);return}let Pu=[];he.timelines.forEach(Fe=>{Fe.stretchStartingKeyframe=!0,this.disabledNodes.has(Fe.element)||Pu.push(Fe)}),he.timelines=Pu,n.append(Ie,he.timelines);let lv={instruction:he,player:K,element:Ie};s.push(lv),he.queriedElements.forEach(Fe=>nt(a,Fe,[]).push(K)),he.preStyleProps.forEach((Fe,Er)=>{if(Fe.size){let ct=c.get(Er);ct||c.set(Er,ct=new Set),Fe.forEach((Vi,Fs)=>ct.add(Fs))}}),he.postStyleProps.forEach((Fe,Er)=>{let ct=u.get(Er);ct||u.set(Er,ct=new Set),Fe.forEach((Vi,Fs)=>ct.add(Fs))})});if(C.length){let R=[];C.forEach(M=>{R.push(zv(M.triggerName,M.errors))}),S.forEach(M=>M.destroy()),this.reportError(R)}let V=new Map,z=new Map;s.forEach(R=>{let M=R.element;n.has(M)&&(z.set(M,M),this._beforeAnimationBuild(R.player.namespaceId,R.instruction,V))}),i.forEach(R=>{let M=R.element;this._getPreviousPlayers(M,!1,R.namespaceId,R.triggerName,null).forEach(K=>{nt(V,M,[]).push(K),K.destroy()})});let T=g.filter(R=>Nd(R,c,u)),O=new Map;Id(O,this.driver,x,u,Mt).forEach(R=>{Nd(R,c,u)&&T.push(R)});let Pe=new Map;p.forEach((R,M)=>{Id(Pe,this.driver,new Set(R),c,eo)}),T.forEach(R=>{let M=O.get(R),D=Pe.get(R);O.set(R,new Map([...M?.entries()??[],...D?.entries()??[]]))});let St=[],te=[],_t={};s.forEach(R=>{let{element:M,player:D,instruction:K}=R;if(n.has(M)){if(l.has(M)){D.onDestroy(()=>kt(M,K.toStyles)),D.disabled=!0,D.overrideTotalTime(K.totalTime),i.push(D);return}let Ie=_t;if(z.size>1){let Ze=M,rr=[];for(;Ze=Ze.parentNode;){let he=z.get(Ze);if(he){Ie=he;break}rr.push(Ze)}rr.forEach(he=>z.set(he,Ie))}let It=this._buildAnimation(D.namespaceId,K,V,o,Pe,O);if(D.setRealPlayer(It),Ie===_t)St.push(D);else{let Ze=this.playersByElement.get(Ie);Ze&&Ze.length&&(D.parentPlayer=ar(Ze)),i.push(D)}}else Ar(M,K.fromStyles),D.onDestroy(()=>kt(M,K.toStyles)),te.push(D),l.has(M)&&i.push(D)}),te.forEach(R=>{let M=o.get(R.element);if(M&&M.length){let D=ar(M);R.setRealPlayer(D)}}),i.forEach(R=>{R.parentPlayer?R.syncPlayerEvents(R.parentPlayer):R.destroy()});for(let R=0;R<g.length;R++){let M=g[R],D=M[At];if(Wr(M,da),D&&D.hasAnimation)continue;let K=[];if(a.size){let It=a.get(M);It&&It.length&&K.push(...It);let Ze=this.driver.query(M,fa,!0);for(let rr=0;rr<Ze.length;rr++){let he=a.get(Ze[rr]);he&&he.length&&K.push(...he)}}let Ie=K.filter(It=>!It.destroyed);Ie.length?Ry(this,M,Ie):this.processLeaveNode(M)}return g.length=0,St.forEach(R=>{this.players.push(R),R.onDone(()=>{R.destroy();let M=this.players.indexOf(R);this.players.splice(M,1)}),R.play()}),St}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,n,i,o){let s=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(s=a)}else{let a=this.playersByElement.get(e);if(a){let c=!o||o==Fn;a.forEach(u=>{u.queued||!c&&u.triggerName!=i||s.push(u)})}}return(n||i)&&(s=s.filter(a=>!(n&&n!=a.namespaceId||i&&i!=a.triggerName))),s}_beforeAnimationBuild(e,t,n){let i=t.triggerName,o=t.element,s=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:i;for(let c of t.timelines){let u=c.element,l=u!==o,d=nt(n,u,[]);this._getPreviousPlayers(u,l,s,a,t.toState).forEach(p=>{let h=p.getRealPlayer();h.beforeDestroy&&h.beforeDestroy(),p.destroy(),d.push(p)})}Ar(o,t.fromStyles)}_buildAnimation(e,t,n,i,o,s){let a=t.triggerName,c=t.element,u=[],l=new Set,d=new Set,f=t.timelines.map(h=>{let m=h.element;l.add(m);let g=m[At];if(g&&g.removedBeforeQueried)return new Yr(h.duration,h.delay);let E=m!==c,x=Iy((n.get(m)||Ty).map(V=>V.getRealPlayer())).filter(V=>{let z=V;return z.element?z.element===m:!1}),k=o.get(m),A=s.get(m),S=Md(this._normalizer,h.keyframes,k,A),C=this._buildPlayer(h,S,x);if(h.subTimeline&&i&&d.add(m),E){let V=new jn(e,a,m);V.setRealPlayer(C),u.push(V)}return C});u.forEach(h=>{nt(this.playersByQueriedElement,h.element,[]).push(h),h.onDone(()=>Cy(this.playersByQueriedElement,h.element,h))}),l.forEach(h=>ft(h,_d));let p=ar(f);return p.onDestroy(()=>{l.forEach(h=>Wr(h,_d)),kt(c,t.toStyles)}),d.forEach(h=>{nt(i,h,[]).push(p)}),p}_buildPlayer(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new Yr(e.duration,e.delay)}},jn=class{namespaceId;triggerName;element;_player=new Yr;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(e,t,n){this.namespaceId=e,this.triggerName=t,this.element=n}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,n)=>{t.forEach(i=>wa(e,n,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){nt(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function Cy(r,e,t){let n=r.get(e);if(n){if(n.length){let i=n.indexOf(t);n.splice(i,1)}n.length==0&&r.delete(e)}return n}function wy(r){return r??null}function ho(r){return r&&r.nodeType===1}function xy(r){return r=="start"||r=="done"}function Rd(r,e){let t=r.style.display;return r.style.display=e??"none",t}function Id(r,e,t,n,i){let o=[];t.forEach(c=>o.push(Rd(c)));let s=[];n.forEach((c,u)=>{let l=new Map;c.forEach(d=>{let f=e.computeStyle(u,d,i);l.set(d,f),(!f||f.length==0)&&(u[At]=Ay,s.push(u))}),r.set(u,l)});let a=0;return t.forEach(c=>Rd(c,o[a++])),s}function Od(r,e){let t=new Map;if(r.forEach(a=>t.set(a,[])),e.length==0)return t;let n=1,i=new Set(e),o=new Map;function s(a){if(!a)return n;let c=o.get(a);if(c)return c;let u=a.parentNode;return t.has(u)?c=u:i.has(u)?c=n:c=s(u),o.set(a,c),c}return e.forEach(a=>{let c=s(a);c!==n&&t.get(c).push(a)}),t}function ft(r,e){r.classList?.add(e)}function Wr(r,e){r.classList?.remove(e)}function Ry(r,e,t){ar(t).onDone(()=>r.processLeaveNode(e))}function Iy(r){let e=[];return $d(r,e),e}function $d(r,e){for(let t=0;t<r.length;t++){let n=r[t];n instanceof Ws?$d(n.players,e):e.push(n)}}function Oy(r,e){let t=Object.keys(r),n=Object.keys(e);if(t.length!=n.length)return!1;for(let i=0;i<t.length;i++){let o=t[i];if(!e.hasOwnProperty(o)||r[o]!==e[o])return!1}return!0}function Nd(r,e,t){let n=t.get(r);if(!n)return!1;let i=e.get(r);return i?n.forEach(o=>i.add(o)):e.set(r,n),t.delete(r),!0}var Qr=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(e,t)=>{};constructor(e,t,n){this._driver=t,this._normalizer=n,this._transitionEngine=new Aa(e.body,t,n),this._timelineEngine=new ba(e.body,t,n),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(e,t,n,i,o){let s=e+"-"+i,a=this._triggerCache[s];if(!a){let c=[],u=[],l=Bd(this._driver,o,c,u);if(c.length)throw Ov(i,c);a=gy(i,l,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,n,i){this._transitionEngine.insertNode(e,t,n,i)}onRemove(e,t,n){this._transitionEngine.removeNode(e,t,n)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,n,i){if(n.charAt(0)=="@"){let[o,s]=Ed(n),a=i;this._timelineEngine.command(o,t,s,a)}else this._transitionEngine.trigger(e,t,n,i)}listen(e,t,n,i,o){if(n.charAt(0)=="@"){let[s,a]=Ed(n);return this._timelineEngine.listen(s,t,a,o)}return this._transitionEngine.listen(e,t,n,i,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function Ny(r,e){let t=null,n=null;return Array.isArray(e)&&e.length?(t=la(e[0]),e.length>1&&(n=la(e[e.length-1]))):e instanceof Map&&(t=la(e)),t||n?new My(r,t,n):null}var My=(()=>{class r{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,n,i){this._element=t,this._startStyles=n,this._endStyles=i;let o=r.initialStylesByElement.get(t);o||r.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&kt(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(kt(this._element,this._initialStyles),this._endStyles&&(kt(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(r.initialStylesByElement.delete(this._element),this._startStyles&&(Ar(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ar(this._element,this._endStyles),this._endStyles=null),kt(this._element,this._initialStyles),this._state=3)}}return r})();function la(r){let e=null;return r.forEach((t,n)=>{ky(n)&&(e=e||new Map,e.set(n,t))}),e}function ky(r){return r==="display"||r==="position"}var To=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(e,t,n,i){this.element=e,this.keyframes=t,this.options=n,this._specialStyles=i,this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(n=>{t.push(Object.fromEntries(n))}),t}_triggerWebAnimation(e,t,n){return e.animate(this._convertKeyframesToObject(t),n)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((n,i)=>{i!=="offset"&&e.set(i,this._finished?n:Na(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}},Ao=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return kd(e,t)}getParentElement(e){return Ra(e)}query(e,t,n){return Dd(e,t,n)}computeStyle(e,t,n){return Na(e,t)}animate(e,t,n,i,o,s=[]){let a=i==0?"both":"forwards",c={duration:n,delay:i,fill:a};o&&(c.easing=o);let u=new Map,l=s.filter(p=>p instanceof To);Zv(n,i)&&l.forEach(p=>{p.currentSnapshot.forEach((h,m)=>u.set(m,h))});let d=Wv(t).map(p=>new Map(p));d=Jv(e,d,u);let f=Ny(e,d);return new To(e,d,c,f)}};var mo="@",Kd="@.disabled",Co=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(e,t,n,i){this.namespaceId=e,this.delegate=t,this.engine=n,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,n,i=!0){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,n){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,i){this.delegate.setAttribute(e,t,n,i)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,i){this.delegate.setStyle(e,t,n,i)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){t.charAt(0)==mo&&t==Kd?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n,i){return this.delegate.listen(e,t,n,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},Ca=class extends Co{factory;constructor(e,t,n,i,o){super(t,n,i,o),this.factory=e,this.namespaceId=t}setProperty(e,t,n){t.charAt(0)==mo?t.charAt(1)=="."&&t==Kd?(n=n===void 0?!0:!!n,this.disableAnimations(e,n)):this.engine.process(this.namespaceId,e,t.slice(1),n):this.delegate.setProperty(e,t,n)}listen(e,t,n,i){if(t.charAt(0)==mo){let o=Dy(e),s=t.slice(1),a="";return s.charAt(0)!=mo&&([s,a]=Ly(s)),this.engine.listen(this.namespaceId,o,s,a,c=>{let u=c._data||-1;this.factory.scheduleListenerCallback(u,n,c)})}return this.delegate.listen(e,t,n,i)}};function Dy(r){switch(r){case"body":return document.body;case"document":return document;case"window":return window;default:return r}}function Ly(r){let e=r.indexOf("."),t=r.substring(0,e),n=r.slice(e+1);return[t,n]}var wo=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(e,t,n){this.delegate=e,this.engine=t,this._zone=n,t.onRemovalComplete=(i,o)=>{o?.removeChild(null,i)}}createRenderer(e,t){let n="",i=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let u=this._rendererCache,l=u.get(i);if(!l){let d=()=>u.delete(i);l=new Co(n,i,this.engine,d),u.set(i,l)}return l}let o=t.id,s=t.id+"-"+this._currentId;this._currentId++,this.engine.register(s,e);let a=u=>{Array.isArray(u)?u.forEach(a):this.engine.registerTrigger(o,s,e,u.name,u)};return t.data.animation.forEach(a),new Ca(this,s,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,n){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(n));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(o=>{let[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),i.push([t,n])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(e){this.engine.flush(),this.delegate.componentReplaced?.(e)}};var Uy=(()=>{class r extends Qr{constructor(t,n,i){super(t,n,i)}ngOnDestroy(){this.flush()}static \u0275fac=function(n){return new(n||r)(y(nl),y(Cr),y(wr))};static \u0275prov=N({token:r,factory:r.\u0275fac})}return r})();function Fy(){return new yo}function By(r,e,t){return new wo(r,e,t)}var Hd=[{provide:wr,useFactory:Fy},{provide:Qr,useClass:Uy},{provide:Zu,useFactory:By,deps:[cl,Qr,Ki]}],Vy=[{provide:Cr,useClass:Ia},{provide:js,useValue:"NoopAnimations"},...Hd],Yd=[{provide:Cr,useFactory:()=>new Ao},{provide:js,useFactory:()=>"BrowserAnimations"},...Hd],Gd=(()=>{class r{static withConfig(t){return{ngModule:r,providers:t.disableAnimations?Vy:Yd}}static \u0275fac=function(n){return new(n||r)};static \u0275mod=tt({type:r});static \u0275inj=Je({providers:Yd,imports:[Zi]})}return r})();var jy=["app-delete-semester-toast",""];function $y(r,e){if(r&1&&(dt(0,"div"),Sr(1),Ot()),r&2){let t=Nt();qi(t.options.titleClass),tl("aria-label",t.title),et(),Qi(" ",t.title," ")}}function Ky(r,e){if(r&1&&Nn(0,"div",10),r&2){let t=Nt();qi(t.options.messageClass),lt("innerHTML",t.message,Xu)}}function Yy(r,e){if(r&1&&(dt(0,"div",11),Sr(1),Ot()),r&2){let t=Nt();qi(t.options.messageClass),et(),Qi(" ",t.message," ")}}function Hy(r,e){if(r&1){let t=Ks();dt(0,"a",12),Wi("click",function(i){In(t);let o=Nt();return On(o.action(i))})("keydown.enter",function(i){In(t);let o=Nt();return On(o.action(i))}),Sr(1),Ot()}if(r&2){let t=Nt();lt("tabindex",0),et(),Qi(" ",t.cancelString," ")}}function Gy(r,e){if(r&1){let t=Ks();dt(0,"a",13),Wi("click",function(){In(t);let i=Nt();return On(i.remove())})("keydown.enter",function(){In(t);let i=Nt();return On(i.remove())}),dt(1,"mat-icon",14),Sr(2,"close"),Ot()()}r&2&&lt("tabindex",0)}function qy(r,e){if(r&1&&(dt(0,"div",null,0),Nn(2,"div",15),Ot()),r&2){let t=Nt();et(2),$s("width",t.width+"%")}}var qd=(()=>{class r extends Sl{constructor(){super(...arguments),this.cancelString="Cancel",this.options=this.options}action(t){return t.stopPropagation(),this.toastPackage.triggerAction(),this.remove(),!1}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=$i(r)))(i||r)}})()}static{this.\u0275cmp=Hi({type:r,selectors:[["","app-delete-semester-toast",""]],features:[Ju],attrs:jy,decls:9,vars:8,consts:[["toastProgressBar",""],[1,"row",3,"keydown.escape"],[1,"message"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[1,"controls","text-right"],["class","btn btn-sm cancel-btn","role","button","aria-label","cancel",3,"tabindex","click","keydown.enter",4,"ngIf"],["class","btn btn-sm close-btn","role","button","aria-label","close",3,"tabindex","click","keydown.enter",4,"ngIf"],[4,"ngIf"],["role","alert",3,"innerHTML"],["role","alert"],["role","button","aria-label","cancel",1,"btn","btn-sm","cancel-btn",3,"click","keydown.enter","tabindex"],["role","button","aria-label","close",1,"btn","btn-sm","close-btn",3,"click","keydown.enter","tabindex"],[1,"close-icon"],[1,"toast-progress"]],template:function(n,i){n&1&&(dt(0,"div",1),Wi("keydown.escape",function(){return i.remove()}),dt(1,"div",2),Gi(2,$y,2,4,"div",3)(3,Ky,1,3,"div",4)(4,Yy,2,3,"div",5),Ot(),dt(5,"div",6),Gi(6,Hy,2,2,"a",7)(7,Gy,3,1,"a",8),Ot()(),Gi(8,qy,3,2,"div",9)),n&2&&($s("display",i.state.value==="inactive"?"none":""),et(2),lt("ngIf",i.title),et(),lt("ngIf",i.message&&i.options.enableHtml),et(),lt("ngIf",i.message&&!i.options.enableHtml),et(2),lt("ngIf",i.options.cancelButton),et(),lt("ngIf",i.options.closeButton),et(),lt("ngIf",i.options.progressBar))},dependencies:[yl,vl,il],styles:[`[_nghost-%COMP%]{position:relative;overflow:hidden;margin:0 0 6px;padding:0!important;min-height:48px;width:383px!important;min-width:373px!important;color:#fff;pointer-events:all;cursor:default!important;border-radius:3px;background-color:#424242;box-shadow:0 3px 6px #00000029;background-image:none}.row[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;font-size:var(--primary-font-size);color:#FFFFF;font-family:var(--usc-font-family);letter-spacing:.06px;line-height:20px}.row[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{z-index:2;padding-top:14px;padding-bottom:14px;padding-left:16px}.row[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{z-index:2;display:flex;align-items:center;padding-right:16px}.row[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;pointer-events:all;cursor:pointer;-webkit-backface-visibility:hidden;-webkit-transform:translateZ(0);display:flex}.row[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus-visible{outline:solid 4px var(--primary-focus-outline-color)}.row[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{text-decoration:underline}.row[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:not(focus-visible){padding:12px 32px}.row[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:focus-visible{padding:8px 32px}.row[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{transform:scale(.5)}.toast-progress[_ngcontent-%COMP%]{background-color:#fff;opacity:.9}.hide-progress-bar[_ngcontent-%COMP%]   .toast-progress[_ngcontent-%COMP%]{opacity:0}
/*# sourceMappingURL=custom-toast.component-2H2PKF5P.css.map */`]})}}return r})();var Qd=(()=>{class r{constructor(t){this.route=t,this.shouldBustCache=!1,this.route.queryParams.subscribe(n=>{this.shouldBustCache=n.nocache==="true"})}intercept(t,n){if(this.shouldBustCache){let i=t.url.includes("?")?`${t.url}&nocache=true`:`${t.url}?nocache=true`,o=t.clone({url:i});return n.handle(o)}return n.handle(t)}static{this.\u0275fac=function(n){return new(n||r)(y(Tl))}}static{this.\u0275prov=N({token:r,factory:r.\u0275fac})}}return r})();var xo=class{canDeactivate(e){return!1}};var Me={log:"log",debug:"debug",info:"info",warn:"warn",error:"error"},pt=console,cr={};Object.keys(Me).forEach(function(r){cr[r]=pt[r]});var $n="Datadog Browser SDK:",L={debug:cr.debug.bind(pt,$n),log:cr.log.bind(pt,$n),info:cr.info.bind(pt,$n),warn:cr.warn.bind(pt,$n),error:cr.error.bind(pt,$n)};function Ro(r,e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return r.apply(void 0,t)}catch(i){L.error(e,i)}}}var ne=function(r){return r.PAGEHIDE="pagehide",r.FEATURE_FLAGS="feature_flags",r.RESOURCE_PAGE_STATES="resource_page_states",r.PAGE_STATES="page_states",r.COLLECT_FLUSH_REASON="collect_flush_reason",r.NO_RESOURCE_DURATION_FROZEN_STATE="no_resource_duration_frozen_state",r.SCROLLMAP="scrollmap",r.INTERACTION_TO_NEXT_PAINT="interaction_to_next_paint",r.WEB_VITALS_ATTRIBUTION="web_vitals_attribution",r.DISABLE_REPLAY_INLINE_CSS="disable_replay_inline_css",r}(ne||{}),ka=new Set;function Da(r){r.forEach(function(e){ka.add(e)})}function me(r){return ka.has(r)}function La(){return ka}function ht(r){return r!==0&&Math.random()*100<=r}function xr(r,e){return+r.toFixed(e)}function ur(r){return Ct(r)&&r>=0&&r<=100}function Ct(r){return typeof r=="number"}var ie=1e3,oe=60*ie,Ua=60*oe,Qy=24*Ua,Xy=365*Qy;function Kn(r){return{relative:r,timeStamp:Zy(r)}}function Zy(r){var e=Ye()-performance.now();return e>Yn()?Math.round(lr(e,r)):Jy(r)}function Xd(){return Math.round(Ye()-lr(Yn(),performance.now()))}function J(r){return Ct(r)?xr(r*1e6,0):r}function Ye(){return new Date().getTime()}function $(){return Ye()}function Ae(){return performance.now()}function ce(){return{relative:Ae(),timeStamp:$()}}function Io(){return{relative:0,timeStamp:Yn()}}function pe(r,e){return e-r}function lr(r,e){return r+e}function Xr(r){return r-Yn()}function Jy(r){return Math.round(lr(Yn(),r))}function Zd(r){return r<Xy}var Pa;function Yn(){return Pa===void 0&&(Pa=performance.timing.navigationStart),Pa}var it=1024,Fa=1024*it,eE=/[^\u0000-\u007F]/;function qt(r){return eE.test(r)?window.TextEncoder!==void 0?new TextEncoder().encode(r).length:new Blob([r]).size:r.length}function Jd(r){for(var e=r.reduce(function(a,c){return a+c.length},0),t=new Uint8Array(e),n=0,i=0,o=r;i<o.length;i++){var s=o[i];t.set(s,n),n+=s.length}return t}function _e(r,e){return r.indexOf(e)!==-1}function Zr(r){if(Array.from)return Array.from(r);var e=[];if(r instanceof Set)r.forEach(function(n){return e.push(n)});else for(var t=0;t<r.length;t++)e.push(r[t]);return e}function mt(r,e){for(var t=0;t<r.length;t+=1){var n=r[t];if(e(n,t))return n}}function ef(r,e){for(var t=r.length-1;t>=0;t-=1){var n=r[t];if(e(n,t,r))return n}}function tf(r,e){Array.prototype.forEach.call(r,e)}function Dt(r){return Object.keys(r).map(function(e){return r[e]})}function Jr(r){return Object.keys(r).map(function(e){return[e,r[e]]})}function dr(r,e){return r.slice(0,e.length)===e}function rf(r,e){return r.slice(-e.length)===e}function nf(r,e){return r.matches?r.matches(e):r.msMatchesSelector?r.msMatchesSelector(e):!1}function Lt(r){return window.CSS&&window.CSS.escape?window.CSS.escape(r):r.replace(/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,function(e,t){return t?e==="\0"?"\uFFFD":"".concat(e.slice(0,-1),"\\").concat(e.charCodeAt(e.length-1).toString(16)," "):"\\".concat(e)})}function I(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.forEach(function(n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}),r}function Wt(r){return I({},r)}function en(r,e){return Object.keys(r).some(function(t){return r[t]===e})}function Be(r){return Object.keys(r).length===0}function of(r,e){for(var t={},n=0,i=Object.keys(r);n<i.length;n++){var o=i[n];t[o]=e(r[o])}return t}function He(){if(typeof globalThis=="object")return globalThis;Object.defineProperty(Object.prototype,"_dd_temp_",{get:function(){return this},configurable:!0});var r=_dd_temp_;return delete Object.prototype._dd_temp_,typeof r!="object"&&(typeof self=="object"?r=self:typeof window=="object"?r=window:r={}),r}function gt(r,e){var t=He(),n;return t.Zone&&typeof t.Zone.__symbol__=="function"&&(n=r[t.Zone.__symbol__(e)]),n||(n=r[e]),n}var tE=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))},Oo,sf=!1;function af(r){Oo=r}function Ba(r){sf=r}function Va(r,e,t){var n=t.value;t.value=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s=Oo?_(n):n;return s.apply(this,i)}}function _(r){return function(){return Ge(r,this,arguments)}}function Ge(r,e,t){try{return r.apply(e,t)}catch(n){if(No(n),Oo)try{Oo(n)}catch(i){No(i)}}}function No(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];sf&&L.error.apply(L,tE(["[MONITOR]"],r,!1))}function re(r,e){return gt(He(),"setTimeout")(_(r),e)}function Ve(r){gt(He(),"clearTimeout")(r)}function Pt(r,e){return gt(He(),"setInterval")(_(r),e)}function fr(r){gt(He(),"clearInterval")(r)}var F=function(){function r(e){this.onFirstSubscribe=e,this.observers=[]}return r.prototype.subscribe=function(e){var t=this;return!this.observers.length&&this.onFirstSubscribe&&(this.onLastUnsubscribe=this.onFirstSubscribe()||void 0),this.observers.push(e),{unsubscribe:function(){t.observers=t.observers.filter(function(n){return e!==n}),!t.observers.length&&t.onLastUnsubscribe&&t.onLastUnsubscribe()}}},r.prototype.notify=function(e){this.observers.forEach(function(t){return t(e)})},r}();function Mo(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=new F(function(){var n=r.map(function(i){return i.subscribe(function(o){return t.notify(o)})});return function(){return n.forEach(function(i){return i.unsubscribe()})}});return t}function ke(r,e,t){var n=t&&t.leading!==void 0?t.leading:!0,i=t&&t.trailing!==void 0?t.trailing:!0,o=!1,s,a;return{throttled:function(){for(var c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];if(o){s=c;return}n?r.apply(void 0,c):s=c,o=!0,a=re(function(){i&&s&&r.apply(void 0,s),o=!1,s=void 0},e)},cancel:function(){Ve(a),o=!1,s=void 0}}}function B(){}function ue(r){return r?(parseInt(r,10)^Math.random()*16>>parseInt(r,10)/4).toString(16):"".concat(1e7,"-").concat(1e3,"-").concat(4e3,"-").concat(8e3,"-").concat(1e11).replace(/[018]/g,ue)}function Hn(r,e){var t=new RegExp("(?:^|;)\\s*".concat(e,"\\s*=\\s*([^;]+)")),n=t.exec(r);return n?n[1]:void 0}function ko(r,e,t){t===void 0&&(t="");var n=r.charCodeAt(e-1),i=n>=55296&&n<=56319,o=i?e+1:e;return r.length<=o?r:"".concat(r.slice(0,o)).concat(t)}var ot=4*Ua,Do=15*oe;var Lo;function cf(){return Lo??(Lo=!!document.documentMode)}var Po;function uf(){return Po??(Po=!!window.chrome||/HeadlessChrome/.test(window.navigator.userAgent))}var Uo;function lf(){return Uo??(Uo=/^((?!chrome|android).)*safari/i.test(navigator.userAgent))}function Gn(r,e,t,n){var i=new Date;i.setTime(i.getTime()+t);var o="expires=".concat(i.toUTCString()),s=n&&n.crossSite?"none":"strict",a=n&&n.domain?";domain=".concat(n.domain):"",c=n&&n.secure?";secure":"";document.cookie="".concat(r,"=").concat(e,";").concat(o,";path=/;samesite=").concat(s).concat(a).concat(c)}function st(r){return Hn(document.cookie,r)}function Fo(r,e){Gn(r,"",0,e)}function df(r){if(document.cookie===void 0||document.cookie===null)return!1;try{var e="dd_cookie_test_".concat(ue()),t="test";Gn(e,t,oe,r);var n=st(e)===t;return Fo(e,r),n}catch(i){return L.error(i),!1}}var za;function ff(){if(za===void 0){for(var r="dd_site_test_".concat(ue()),e="test",t=window.location.hostname.split("."),n=t.pop();t.length&&!st(r);)n="".concat(t.pop(),".").concat(n),Gn(r,e,ie,{domain:n});Fo(r,{domain:n}),za=n}return za}var Ut="_dd_s";var pf=/^([a-z]+)=([a-z0-9-]+)$/,ja="&";function qn(r){return Be(r)}function Bo(r){r.expire=String(Ye()+Do)}function Vo(r){return Jr(r).map(function(e){var t=e[0],n=e[1];return"".concat(t,"=").concat(n)}).join(ja)}function zo(r){var e={};return rE(r)&&r.split(ja).forEach(function(t){var n=pf.exec(t);if(n!==null){var i=n[1],o=n[2];e[i]=o}}),e}function rE(r){return!!r&&(r.indexOf(ja)!==-1||pf.test(r))}var nE="_dd",iE="_dd_r",oE="_dd_l",sE="rum",aE="logs";function hf(r){var e=st(Ut);if(!e){var t=st(nE),n=st(iE),i=st(oE),o={};t&&(o.id=t),i&&/^[01]$/.test(i)&&(o[aE]=i),n&&/^[012]$/.test(n)&&(o[sE]=n),qn(o)||(Bo(o),r.persistSession(o))}}function mf(r){var e=dE(r);return df(e)?{type:"Cookie",cookieOptions:e}:void 0}function gf(r){var e={isLockEnabled:uf(),persistSession:cE(r),retrieveSession:uE,clearSession:lE(r)};return hf(e),e}function cE(r){return function(e){Gn(Ut,Vo(e),Do,r)}}function uE(){var r=st(Ut);return zo(r)}function lE(r){return function(){Fo(Ut,r)}}function dE(r){var e={};return e.secure=!!r.useSecureSessionCookie||!!r.useCrossSiteSessionCookie,e.crossSite=!!r.useCrossSiteSessionCookie,r.trackSessionAcrossSubdomains&&(e.domain=ff()),e}var fE="_dd_test_";function vf(){try{var r=ue(),e="".concat(fE).concat(r);localStorage.setItem(e,r);var t=localStorage.getItem(e);return localStorage.removeItem(e),r===t?{type:"LocalStorage"}:void 0}catch{return}}function yf(){return{isLockEnabled:!1,persistSession:pE,retrieveSession:hE,clearSession:mE}}function pE(r){localStorage.setItem(Ut,Vo(r))}function hE(){var r=localStorage.getItem(Ut);return zo(r)}function mE(){localStorage.removeItem(Ut)}var gE=10,vE=100,Sf=[],$o;function tn(r,e,t){var n;t===void 0&&(t=0);var i=e.isLockEnabled,o=e.retrieveSession,s=e.persistSession,a=e.clearSession;if($o||($o=r),r!==$o){Sf.push(r);return}if(i&&t>=vE){Ef(e);return}var c,u=o();if(i){if(u.lock){jo(r,e,t);return}if(c=ue(),u.lock=c,s(u),u=o(),u.lock!==c){jo(r,e,t);return}}var l=r.process(u);if(i&&(u=o(),u.lock!==c)){jo(r,e,t);return}if(l&&(qn(l)?a():(Bo(l),s(l))),i&&!(l&&qn(l))){if(u=o(),u.lock!==c){jo(r,e,t);return}delete u.lock,s(u),l=u}(n=r.after)===null||n===void 0||n.call(r,l||u),Ef(e)}function jo(r,e,t){re(function(){tn(r,e,t+1)},gE)}function Ef(r){$o=void 0;var e=Sf.shift();e&&tn(e,r)}var _f=ie;function bf(r){var e=mf(r);return!e&&r.allowFallbackToLocalStorage&&(e=vf()),e}function Tf(r,e,t){var n=new F,i=new F,o=r.type==="Cookie"?gf(r.cookieOptions):yf(),s=o.clearSession,a=o.retrieveSession,c=Pt(f,_f),u=k();function l(){var S;tn({process:function(C){var V=p(C);return S=h(V),V},after:function(C){S&&!m()&&x(C),u=C}},o)}function d(){tn({process:function(S){return m()?p(S):void 0}},o)}function f(){tn({process:function(S){return A(S)?void 0:{}},after:p},o)}function p(S){return A(S)||(S={}),m()&&(g(S)?E():u=S),S}function h(S){var C=t(S[e]),V=C.trackingType,z=C.isTracked;return S[e]=V,z&&!S.id&&(S.id=ue(),S.created=String(Ye())),z}function m(){return u[e]!==void 0}function g(S){return u.id!==S.id||u[e]!==S[e]}function E(){u={},i.notify()}function x(S){u=S,n.notify()}function k(){var S=a();return A(S)?S:{}}function A(S){return(S.created===void 0||Ye()-Number(S.created)<ot)&&(S.expire===void 0||Ye()<Number(S.expire))}return{expandOrRenewSession:ke(l,_f).throttled,expandSession:d,getSession:function(){return u},renewObservable:n,expireObservable:i,expire:function(){s(),p({})},stop:function(){fr(c)}}}function qe(r,e,t){if(typeof r!="object"||r===null)return JSON.stringify(r);var n=Rr(Object.prototype),i=Rr(Array.prototype),o=Rr(Object.getPrototypeOf(r)),s=Rr(r);try{return JSON.stringify(r,e,t)}catch{return"<error: unable to serialize object>"}finally{n(),i(),o(),s()}}function Rr(r){var e=r,t=e.toJSON;return t?(delete e.toJSON,function(){e.toJSON=t}):B}function Ir(r){return rn(r,EE()).href}function Cf(r){try{return!!rn(r)}catch{return!1}}function $a(r){return xf(rn(r))}function wf(r){var e=rn(r).pathname;return e[0]==="/"?e:"/".concat(e)}function rn(r,e){var t=yE();if(t)try{return e!==void 0?new t(r,e):new t(r)}catch(s){throw new Error("Failed to construct URL: ".concat(String(s)," ").concat(qe({url:r,base:e})))}if(e===void 0&&!/:/.test(r))throw new Error("Invalid URL: '".concat(r,"'"));var n=document,i=n.createElement("a");if(e!==void 0){n=document.implementation.createHTMLDocument("");var o=n.createElement("base");o.href=e,n.head.appendChild(o),n.body.appendChild(i)}return i.href=r,i}var Af=URL,Ko;function yE(){if(Ko===void 0)try{var r=new Af("http://test/path");Ko=r.href==="http://test/path"}catch{Ko=!1}return Ko?Af:void 0}function EE(){return xf(window.location)}function xf(r){if(r.origin&&r.origin!=="null")return r.origin;var e=r.host.replace(/(:80|:443)$/,"");return"".concat(r.protocol,"//").concat(e)}var Wn="datad0g.com",Ft="datadoghq.com",Ka="datadoghq.eu",Ya="ap1.datadoghq.com",Ha="ddog-gov.com";var SE={logs:"logs",rum:"rum",sessionReplay:"session-replay"},_E={logs:"logs",rum:"rum",sessionReplay:"replay"};function nn(r,e,t){var n=bE(r,e);return{build:function(i,o){var s=AE(r,e,t,i,o);return n(s)},urlPrefix:n(""),endpointType:e}}function bE(r,e){var t="/api/v2/".concat(_E[e]),n=r.proxy,i=r.proxyUrl;if(n){var o=Ir(n);return function(c){return"".concat(o,"?ddforward=").concat(encodeURIComponent("".concat(t,"?").concat(c)))}}var s=TE(r,e);if(n===void 0&&i){var a=Ir(i);return function(c){return"".concat(a,"?ddforward=").concat(encodeURIComponent("https://".concat(s).concat(t,"?").concat(c)))}}return function(c){return"https://".concat(s).concat(t,"?").concat(c)}}function TE(r,e){var t=r.site,n=t===void 0?Ft:t,i=r.internalAnalyticsSubdomain;if(i&&n===Ft)return"".concat(i,".").concat(Ft);var o=n.split("."),s=o.pop(),a=n!==Ya?"".concat(SE[e],"."):"";return"".concat(a,"browser-intake-").concat(o.join("-"),".").concat(s)}function AE(r,e,t,n,i){var o=r.clientToken,s=r.internalAnalyticsSubdomain,a=i.retry,c=i.flushReason,u=i.encoding,l=["sdk_version:".concat("4.50.1"),"api:".concat(n)].concat(t);c&&me(ne.COLLECT_FLUSH_REASON)&&l.push("flush_reason:".concat(c)),a&&l.push("retry_count:".concat(a.count),"retry_after:".concat(a.lastFailureStatus));var d=["ddsource=browser","ddtags=".concat(encodeURIComponent(l.join(","))),"dd-api-key=".concat(o),"dd-evp-origin-version=".concat(encodeURIComponent("4.50.1")),"dd-evp-origin=browser","dd-request-id=".concat(ue())];return u&&d.push("dd-evp-encoding=".concat(u)),e==="rum"&&d.push("batch_time=".concat($())),s&&d.reverse(),d.join("&")}var CE=200;function Rf(r){var e=r.env,t=r.service,n=r.version,i=r.datacenter,o=[];return e&&o.push(Yo("env",e)),t&&o.push(Yo("service",t)),n&&o.push(Yo("version",n)),i&&o.push(Yo("datacenter",i)),o}var wE=/[^a-z0-9_:./-]/;function Yo(r,e){var t=CE-r.length-1;(e.length>t||wE.test(e))&&L.warn("".concat(r," value doesn't meet tag requirements and will be sanitized"));var n=e.replace(/,/g,"_");return"".concat(r,":").concat(n)}function If(r){var e=Rf(r),t=xE(r,e),n=Dt(t).map(function(o){return o.urlPrefix}),i=RE(r,n,e);return I({isIntakeUrl:function(o){return n.some(function(s){return o.indexOf(s)===0})},replica:i,site:r.site||Ft},t)}function xE(r,e){return{logsEndpointBuilder:nn(r,"logs",e),rumEndpointBuilder:nn(r,"rum",e),sessionReplayEndpointBuilder:nn(r,"sessionReplay",e)}}function RE(r,e,t){if(r.replica){var n=I({},r,{site:Ft,clientToken:r.replica.clientToken}),i={logsEndpointBuilder:nn(n,"logs",t),rumEndpointBuilder:nn(n,"rum",t)};return e.push.apply(e,Dt(i).map(function(o){return o.urlPrefix})),I({applicationId:r.replica.applicationId},i)}}var Qt={ALLOW:"allow",MASK:"mask",MASK_USER_INPUT:"mask-user-input"};function on(r){var e,t,n;if(!r||!r.clientToken){L.error("Client Token is not configured, we will not send any data.");return}var i=(e=r.sessionSampleRate)!==null&&e!==void 0?e:r.sampleRate;if(i!==void 0&&!ur(i)){L.error("Session Sample Rate should be a number between 0 and 100");return}if(r.telemetrySampleRate!==void 0&&!ur(r.telemetrySampleRate)){L.error("Telemetry Sample Rate should be a number between 0 and 100");return}if(r.telemetryConfigurationSampleRate!==void 0&&!ur(r.telemetryConfigurationSampleRate)){L.error("Telemetry Configuration Sample Rate should be a number between 0 and 100");return}return Array.isArray(r.enableExperimentalFeatures)&&Da(r.enableExperimentalFeatures.filter(function(o){return en(ne,o)})),I({beforeSend:r.beforeSend&&Ro(r.beforeSend,"beforeSend threw an error:"),sessionStoreStrategyType:bf(r),sessionSampleRate:i??100,telemetrySampleRate:(t=r.telemetrySampleRate)!==null&&t!==void 0?t:20,telemetryConfigurationSampleRate:(n=r.telemetryConfigurationSampleRate)!==null&&n!==void 0?n:5,service:r.service,silentMultipleInit:!!r.silentMultipleInit,batchBytesLimit:16*it,eventRateLimiterThreshold:3e3,maxTelemetryEventsPerPage:15,flushTimeout:30*ie,batchMessagesLimit:50,messageBytesLimit:256*it},If(r))}function sn(r){var e,t,n=(e=r.proxy)!==null&&e!==void 0?e:r.proxyUrl;return{session_sample_rate:(t=r.sessionSampleRate)!==null&&t!==void 0?t:r.sampleRate,telemetry_sample_rate:r.telemetrySampleRate,telemetry_configuration_sample_rate:r.telemetryConfigurationSampleRate,use_before_send:!!r.beforeSend,use_cross_site_session_cookie:r.useCrossSiteSessionCookie,use_secure_session_cookie:r.useSecureSessionCookie,use_proxy:n!==void 0?!!n:void 0,silent_multiple_init:r.silentMultipleInit,track_session_across_subdomains:r.trackSessionAcrossSubdomains,track_resources:r.trackResources,track_long_task:r.trackLongTasks,allow_fallback_to_local_storage:!!r.allowFallbackToLocalStorage,store_contexts_across_pages:!!r.storeContextsAcrossPages}}var Qn="?";function xe(r){var e=[],t=Ga(r,"stack"),n=String(r);return t&&dr(t,n)&&(t=t.slice(n.length)),t&&t.split(`
`).forEach(function(i){var o=NE(i)||kE(i)||LE(i)||FE(i);o&&(!o.func&&o.line&&(o.func=Qn),e.push(o))}),{message:Ga(r,"message"),name:Ga(r,"name"),stack:e}}var Of="((?:file|https?|blob|chrome-extension|native|eval|webpack|snippet|<anonymous>|\\w+\\.|\\/).*?)",an="(?::(\\d+))",IE=new RegExp("^\\s*at (.*?) ?\\(".concat(Of).concat(an,"?").concat(an,"?\\)?\\s*$"),"i"),OE=new RegExp("\\((\\S*)".concat(an).concat(an,"\\)"));function NE(r){var e=IE.exec(r);if(e){var t=e[2]&&e[2].indexOf("native")===0,n=e[2]&&e[2].indexOf("eval")===0,i=OE.exec(e[2]);return n&&i&&(e[2]=i[1],e[3]=i[2],e[4]=i[3]),{args:t?[e[2]]:[],column:e[4]?+e[4]:void 0,func:e[1]||Qn,line:e[3]?+e[3]:void 0,url:t?void 0:e[2]}}}var ME=new RegExp("^\\s*at ?".concat(Of).concat(an,"?").concat(an,"??\\s*$"),"i");function kE(r){var e=ME.exec(r);if(e)return{args:[],column:e[3]?+e[3]:void 0,func:Qn,line:e[2]?+e[2]:void 0,url:e[1]}}var DE=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;function LE(r){var e=DE.exec(r);if(e)return{args:[],column:e[4]?+e[4]:void 0,func:e[1]||Qn,line:+e[3],url:e[2]}}var PE=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,UE=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function FE(r){var e=PE.exec(r);if(e){var t=e[3]&&e[3].indexOf(" > eval")>-1,n=UE.exec(e[3]);return t&&n&&(e[3]=n[1],e[4]=n[2],e[5]=void 0),{args:e[2]?e[2].split(","):[],column:e[5]?+e[5]:void 0,func:e[1]||Qn,line:e[4]?+e[4]:void 0,url:e[3]}}}function Ga(r,e){if(!(typeof r!="object"||!r||!(e in r))){var t=r[e];return typeof t=="string"?t:void 0}}function Ho(r,e,t){var n=r[e],i=t(n),o=function(){if(typeof i=="function")return i.apply(this,arguments)};return r[e]=o,{stop:function(){r[e]===o?r[e]=n:i=n}}}function Re(r,e,t){var n=t.before,i=t.after;return Ho(r,e,function(o){return function(){var s=arguments,a;return n&&Ge(n,this,s),typeof o=="function"&&(a=o.apply(this,s)),i&&Ge(i,this,s),a}})}function Or(r,e,t){var n=Object.getOwnPropertyDescriptor(r,e);if(!n||!n.set||!n.configurable)return{stop:B};var i=function(s,a){re(function(){t(s,a)},0)},o=function(s){n.set.call(this,s),i(this,s)};return Object.defineProperty(r,e,{set:o}),{stop:function(){var s;((s=Object.getOwnPropertyDescriptor(r,e))===null||s===void 0?void 0:s.set)===o?Object.defineProperty(r,e,n):i=B}}}var BE=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?([\s\S]*)$/;function qa(r){var e=VE(r).stop,t=jE(r).stop;return{stop:function(){e(),t()}}}function VE(r){return Re(window,"onerror",{before:function(e,t,n,i,o){var s;if(o instanceof Error)s=xe(o);else{var a=[{url:t,column:i,line:n}],c=zE(e),u=c.name,l=c.message;s={name:u,message:l,stack:a}}r(s,o??e)}})}function zE(r){var e,t,n;return{}.toString.call(r)==="[object String]"&&(e=BE.exec(r),t=e[1],n=e[2]),{name:t,message:n}}function jE(r){return Re(window,"onunhandledrejection",{before:function(e){var t=e.reason||"Empty reason",n=xe(t);r(n,t)}})}var $E=220*it,KE="$",YE=3;function ge(r,e){var t;e===void 0&&(e=$E);var n=Rr(Object.prototype),i=Rr(Array.prototype),o=[],s=new WeakMap,a=Wa(r,KE,void 0,o,s),c=((t=JSON.stringify(a))===null||t===void 0?void 0:t.length)||0;if(c>e){Qa(e,"discarded",r);return}for(;o.length>0&&c<e;){var u=o.shift(),l=0;if(Array.isArray(u.source))for(var d=0;d<u.source.length;d++){var f=Wa(u.source[d],u.path,d,o,s);if(f!==void 0?c+=JSON.stringify(f).length:c+=4,c+=l,l=1,c>e){Qa(e,"truncated",r);break}u.target[d]=f}else for(var d in u.source)if(Object.prototype.hasOwnProperty.call(u.source,d)){var f=Wa(u.source[d],u.path,d,o,s);if(f!==void 0&&(c+=JSON.stringify(f).length+l+d.length+YE,l=1),c>e){Qa(e,"truncated",r);break}u.target[d]=f}}return n(),i(),a}function Wa(r,e,t,n,i){var o=qE(r);if(!o||typeof o!="object")return HE(o);var s=GE(o);if(s!=="[Object]"&&s!=="[Array]"&&s!=="[Error]")return s;var a=r;if(i.has(a))return"[Reference seen at ".concat(i.get(a),"]");var c=t!==void 0?"".concat(e,".").concat(t):e,u=Array.isArray(o)?[]:{};return i.set(a,c),n.push({source:o,target:u,path:c}),u}function HE(r){return typeof r=="bigint"?"[BigInt] ".concat(r.toString()):typeof r=="function"?"[Function] ".concat(r.name||"unknown"):typeof r=="symbol"?"[Symbol] ".concat(r.description||r.toString()):r}function GE(r){try{if(r instanceof Event)return{isTrusted:r.isTrusted};var e=Object.prototype.toString.call(r),t=e.match(/\[object (.*)\]/);if(t&&t[1])return"[".concat(t[1],"]")}catch{}return"[Unserializable]"}function qE(r){var e=r;if(e&&typeof e.toJSON=="function")try{return e.toJSON()}catch{}return r}function Qa(r,e,t){L.warn("The data provided has been ".concat(e," as it is over the limit of ").concat(r," characters:"),t)}var Go="No stack, consider using an instance of Error";function Nr(r){var e=r.stackTrace,t=r.originalError,n=r.handlingStack,i=r.startClocks,o=r.nonErrorPrefix,s=r.source,a=r.handling,c=t instanceof Error,u=WE(e,c,o,t),l=QE(c,e)?vt(e):Go,d=c?XE(t,s):void 0,f=e?.name,p=Xa(t);return{startClocks:i,source:s,handling:a,handlingStack:n,originalError:t,type:f,message:u,stack:l,causes:d,fingerprint:p}}function WE(r,e,t,n){return r?.message&&r?.name?r.message:e?"Empty message":"".concat(t," ").concat(qe(ge(n)))}function QE(r,e){return e===void 0?!1:r?!0:e.stack.length>0&&(e.stack.length>1||e.stack[0].url!==void 0)}function Xa(r){return r instanceof Error&&"dd_fingerprint"in r?String(r.dd_fingerprint):void 0}function vt(r){var e=Ja(r);return r.stack.forEach(function(t){var n=t.func==="?"?"<anonymous>":t.func,i=t.args&&t.args.length>0?"(".concat(t.args.join(", "),")"):"",o=t.line?":".concat(t.line):"",s=t.line&&t.column?":".concat(t.column):"";e+=`
  at `.concat(n).concat(i," @ ").concat(t.url).concat(o).concat(s)}),e}function Za(r){var e;return(e=/@ (.+)/.exec(r))===null||e===void 0?void 0:e[1]}function Ja(r){return"".concat(r.name||"Error",": ").concat(r.message)}function Xn(){var r=2,e=new Error,t;if(!e.stack)try{throw e}catch{}return Ge(function(){var n=xe(e);n.stack=n.stack.slice(r),t=vt(n)}),t}function XE(r,e){for(var t=r,n=[];t?.cause instanceof Error&&n.length<10;){var i=xe(t.cause);n.push({message:t.cause.message,source:e,type:i?.name,stack:i&&vt(i)}),t=t.cause}return n.length?n:void 0}var Y={AGENT:"agent",CONSOLE:"console",CUSTOM:"custom",LOGGER:"logger",NETWORK:"network",SOURCE:"source",REPORT:"report"};function Zn(r){return qa(function(e,t){r.notify(Nr({stackTrace:e,originalError:t,startClocks:ce(),nonErrorPrefix:"Uncaught",source:Y.SOURCE,handling:"unhandled"}))})}function Jn(r){var e=I({version:"4.50.1",onReady:function(t){t()}},r);return Object.defineProperty(e,"_setDebug",{get:function(){return Ba},enumerable:!1}),e}function ei(r,e,t){var n=r[e];r[e]=t,n&&n.q&&n.q.forEach(function(i){return Ro(i,"onReady callback threw an error:")()})}function G(r,e,t,n,i){return se(r,e,[t],n,i)}function se(r,e,t,n,i){var o=i===void 0?{}:i,s=o.once,a=o.capture,c=o.passive,u=_(s?function(p){f(),n(p)}:n),l=c?{capture:a,passive:c}:a,d=gt(e,"addEventListener");t.forEach(function(p){return d.call(e,p,u,l)});function f(){var p=gt(e,"removeEventListener");t.forEach(function(h){return p.call(e,h,u,l)})}return{stop:f}}var We={intervention:"intervention",deprecation:"deprecation",cspViolation:"csp_violation"};function ti(r,e){var t=[];_e(e,We.cspViolation)&&t.push(JE(r));var n=e.filter(function(i){return i!==We.cspViolation});return n.length&&t.push(ZE(n)),Mo.apply(void 0,t)}function ZE(r){var e=new F(function(){if(window.ReportingObserver){var t=_(function(i,o){return i.forEach(function(s){e.notify(eS(s))})}),n=new window.ReportingObserver(t,{types:r,buffered:!0});return n.observe(),function(){n.disconnect()}}});return e}function JE(r){var e=new F(function(){var t=G(r,document,"securitypolicyviolation",function(n){e.notify(tS(n))}).stop;return t});return e}function eS(r){var e=r.type,t=r.body;return{type:e,subtype:t.id,message:"".concat(e,": ").concat(t.message),stack:Nf(t.id,t.message,t.sourceFile,t.lineNumber,t.columnNumber)}}function tS(r){var e=We.cspViolation,t="'".concat(r.blockedURI,"' blocked by '").concat(r.effectiveDirective,"' directive");return{type:We.cspViolation,subtype:r.effectiveDirective,message:"".concat(e,": ").concat(t),stack:Nf(r.effectiveDirective,r.originalPolicy?"".concat(t,' of the policy "').concat(ko(r.originalPolicy,100,"..."),'"'):"no policy",r.sourceFile,r.lineNumber,r.columnNumber)}}function Nf(r,e,t,n,i){return t?vt({name:r,message:e,stack:[{func:"?",url:t,line:n??void 0,column:i??void 0}]}):void 0}function Xt(r,e){var t=window.__ddBrowserSdkExtensionCallback;t&&t({type:r,payload:e})}function ze(r){return r===null?"null":Array.isArray(r)?"array":typeof r}function qo(r,e,t){if(t===void 0&&(t=rS()),e===void 0)return r;if(typeof e!="object"||e===null)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){var n=e.flags||[e.global?"g":"",e.ignoreCase?"i":"",e.multiline?"m":"",e.sticky?"y":"",e.unicode?"u":""].join("");return new RegExp(e.source,n)}if(!t.hasAlreadyBeenSeen(e)){if(Array.isArray(e)){for(var i=Array.isArray(r)?r:[],o=0;o<e.length;++o)i[o]=qo(i[o],e[o],t);return i}var s=ze(r)==="object"?r:{};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(s[a]=qo(s[a],e[a],t));return s}}function Zt(r){return qo(void 0,r)}function le(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];for(var t,n=0,i=r;n<i.length;n++){var o=i[n];o!=null&&(t=qo(t,o))}return t}function rS(){if(typeof WeakSet<"u"){var r=new WeakSet;return{hasAlreadyBeenSeen:function(t){var n=r.has(t);return n||r.add(t),n}}}var e=[];return{hasAlreadyBeenSeen:function(t){var n=e.indexOf(t)>=0;return n||e.push(t),n}}}var Wo={log:"log",configuration:"configuration"};var nS=["https://www.datadoghq-browser-agent.com","https://www.datad0g-browser-agent.com","https://d3uc069fcn7uxw.cloudfront.net","https://d20xtzwzcl0ceb.cloudfront.net","http://localhost","<anonymous>"],iS=[Ha],Bt={maxEventsPerPage:0,sentEventCount:0,telemetryEnabled:!1,telemetryConfigurationEnabled:!1},ec;function cn(r,e){var t,n=new F;Bt.telemetryEnabled=!_e(iS,e.site)&&ht(e.telemetrySampleRate),Bt.telemetryConfigurationEnabled=Bt.telemetryEnabled&&ht(e.telemetryConfigurationSampleRate);var i=oS();ec=function(s){if(Bt.telemetryEnabled){var a=o(r,s,i);n.notify(a),Xt("telemetry",a)}},af(pr),I(Bt,{maxEventsPerPage:e.maxTelemetryEventsPerPage,sentEventCount:0});function o(s,a,c){return le({type:"telemetry",date:$(),service:s,version:"4.50.1",source:"browser",_dd:{format_version:2},telemetry:le(a,{runtime_env:c}),experimental_features:Zr(La())},t!==void 0?t():{})}return{setContextProvider:function(s){t=s},observable:n,enabled:Bt.telemetryEnabled}}function oS(){return{is_local_file:window.location.protocol==="file:",is_worker:"WorkerGlobalScope"in self}}function un(r){return r.site===Wn}function Ce(r,e){No(Me.debug,r,e),tc(I({type:Wo.log,message:r,status:"debug"},e))}function pr(r,e){tc(I({type:Wo.log,status:"error"},sS(r),e))}function ln(r){Bt.telemetryConfigurationEnabled&&tc({type:Wo.configuration,configuration:r})}function tc(r){ec&&Bt.sentEventCount<Bt.maxEventsPerPage&&(Bt.sentEventCount+=1,ec(r))}function sS(r){if(r instanceof Error){var e=xe(r);return{error:{kind:e.name,stack:vt(aS(e))},message:e.message}}return{error:{stack:Go},message:"".concat("Uncaught"," ").concat(qe(r))}}function aS(r){return r.stack=r.stack.filter(function(e){return!e.url||nS.some(function(t){return dr(e.url,t)})}),r}var Qo=1/0,Mf=oe,at=function(){function r(e,t){var n=this;this.expireDelay=e,this.maxEntries=t,this.entries=[],this.clearOldValuesInterval=Pt(function(){return n.clearOldValues()},Mf)}return r.prototype.add=function(e,t){var n=this,i={value:e,startTime:t,endTime:Qo,remove:function(){var o=n.entries.indexOf(i);o>=0&&n.entries.splice(o,1)},close:function(o){i.endTime=o}};return this.maxEntries&&this.entries.length>=this.maxEntries&&this.entries.pop(),this.entries.unshift(i),i},r.prototype.find=function(e){e===void 0&&(e=Qo);for(var t=0,n=this.entries;t<n.length;t++){var i=n[t];if(i.startTime<=e){if(e<=i.endTime)return i.value;break}}},r.prototype.closeActive=function(e){var t=this.entries[0];t&&t.endTime===Qo&&t.close(e)},r.prototype.findAll=function(e,t){e===void 0&&(e=Qo),t===void 0&&(t=0);var n=lr(e,t);return this.entries.filter(function(i){return i.startTime<=n&&e<=i.endTime}).map(function(i){return i.value})},r.prototype.reset=function(){this.entries=[]},r.prototype.stop=function(){fr(this.clearOldValuesInterval)},r.prototype.clearOldValues=function(){for(var e=Ae()-this.expireDelay;this.entries.length>0&&this.entries[this.entries.length-1].endTime<e;)this.entries.pop()},r}();var lS=oe,dS=ot,ri=[];function ni(r,e,t){var n=Tf(r.sessionStoreStrategyType,e,t);ri.push(function(){return n.stop()});var i=new at(dS);ri.push(function(){return i.stop()}),n.renewObservable.subscribe(function(){i.add(o(),Ae())}),n.expireObservable.subscribe(function(){i.closeActive(Ae())}),n.expandOrRenewSession(),i.add(o(),Io().relative),fS(r,function(){return n.expandOrRenewSession()}),pS(r,function(){return n.expandSession()});function o(){return{id:n.getSession().id,trackingType:n.getSession()[e]}}return{findActiveSession:function(s){return i.find(s)},renewObservable:n.renewObservable,expireObservable:n.expireObservable,expire:n.expire}}function fS(r,e){var t=se(r,window,["click","touchstart","keydown","scroll"],e,{capture:!0,passive:!0}).stop;ri.push(t)}function pS(r,e){var t=function(){document.visibilityState==="visible"&&e()},n=G(r,document,"visibilitychange",t).stop;ri.push(n);var i=Pt(t,lS);ri.push(function(){fr(i)})}function Xo(r){return r>=500}function Zo(r){try{return r.clone()}catch{return}}var hS=80*it,mS=32,kf=3*Fa,gS=oe,Df=ie;function rc(r,e,t,n,i){e.transportStatus===0&&e.queuedPayloads.size()===0&&e.bandwidthMonitor.canHandle(r)?Pf(r,e,t,{onSuccess:function(){return Uf(0,e,t,n,i)},onFailure:function(){e.queuedPayloads.enqueue(r),Lf(e,t,n,i)}}):e.queuedPayloads.enqueue(r)}function Lf(r,e,t,n){r.transportStatus===2&&re(function(){var i=r.queuedPayloads.first();Pf(i,r,e,{onSuccess:function(){r.queuedPayloads.dequeue(),r.currentBackoffTime=Df,Uf(1,r,e,t,n)},onFailure:function(){r.currentBackoffTime=Math.min(gS,r.currentBackoffTime*2),Lf(r,e,t,n)}})},r.currentBackoffTime)}function Pf(r,e,t,n){var i=n.onSuccess,o=n.onFailure;e.bandwidthMonitor.add(r),t(r,function(s){e.bandwidthMonitor.remove(r),vS(s)?(e.transportStatus=e.bandwidthMonitor.ongoingRequestCount>0?1:2,r.retry={count:r.retry?r.retry.count+1:1,lastFailureStatus:s.status},o()):(e.transportStatus=0,i())})}function Uf(r,e,t,n,i){r===0&&e.queuedPayloads.isFull()&&!e.queueFullReported&&(i({message:"Reached max ".concat(n," events size queued for upload: ").concat(kf/Fa,"MiB"),source:Y.AGENT,startClocks:ce()}),e.queueFullReported=!0);var o=e.queuedPayloads;for(e.queuedPayloads=Bf();o.size()>0;)rc(o.dequeue(),e,t,n,i)}function vS(r){return r.type!=="opaque"&&(r.status===0&&!navigator.onLine||r.status===408||r.status===429||Xo(r.status))}function Ff(){return{transportStatus:0,currentBackoffTime:Df,bandwidthMonitor:yS(),queuedPayloads:Bf(),queueFullReported:!1}}function Bf(){var r=[];return{bytesCount:0,enqueue:function(e){this.isFull()||(r.push(e),this.bytesCount+=e.bytesCount)},first:function(){return r[0]},dequeue:function(){var e=r.shift();return e&&(this.bytesCount-=e.bytesCount),e},size:function(){return r.length},isFull:function(){return this.bytesCount>=kf}}}function yS(){return{ongoingRequestCount:0,ongoingByteCount:0,canHandle:function(r){return this.ongoingRequestCount===0||this.ongoingByteCount+r.bytesCount<=hS&&this.ongoingRequestCount<mS},add:function(r){this.ongoingRequestCount+=1,this.ongoingByteCount+=r.bytesCount},remove:function(r){this.ongoingRequestCount-=1,this.ongoingByteCount-=r.bytesCount}}}function dn(r,e,t,n){var i=Ff(),o=function(s,a){return _S(r,e,t,s,a)};return{send:function(s){rc(s,i,o,e.endpointType,n)},sendOnExit:function(s){ES(r,e,t,s)}}}function ES(r,e,t,n){var i=!!navigator.sendBeacon&&n.bytesCount<t;if(i)try{var o=e.build("beacon",n),s=navigator.sendBeacon(o,n.data);if(s)return}catch(c){SS(c)}var a=e.build("xhr",n);nc(r,a,n.data)}var Vf=!1;function SS(r){Vf||(Vf=!0,pr(r))}function _S(r,e,t,n,i){var o=bS()&&n.bytesCount<t;if(o){var s=e.build("fetch",n);fetch(s,{method:"POST",body:n.data,keepalive:!0,mode:"cors"}).then(_(function(c){return i?.({status:c.status,type:c.type})}),_(function(){var c=e.build("xhr",n);nc(r,c,n.data,i)}))}else{var a=e.build("xhr",n);nc(r,a,n.data,i)}}function bS(){try{return window.Request&&"keepalive"in new Request("http://a")}catch{return!1}}function nc(r,e,t,n){var i=new XMLHttpRequest;i.open("POST",e,!0),G(r,i,"loadend",function(){n?.({status:i.status})},{once:!0}),i.send(t)}function wt(){var r=TS();if(r)return{getAllowedWebViewHosts:function(){return JSON.parse(r.getAllowedWebViewHosts())},send:function(e,t){r.send(JSON.stringify({eventType:e,event:t}))}}}function De(r){var e;r===void 0&&(r=(e=He().location)===null||e===void 0?void 0:e.hostname);var t=wt();return!!t&&t.getAllowedWebViewHosts().some(function(n){return r===n||rf(r,".".concat(n))})}function TS(){return He().DatadogEventBridge}var Jt={HIDDEN:"visibility_hidden",UNLOADING:"before_unload",PAGEHIDE:"page_hide",FROZEN:"page_frozen"};function ii(r){var e=new F(function(){var t=me(ne.PAGEHIDE),n=se(r,window,["visibilitychange","freeze","pagehide"],function(o){o.type==="pagehide"&&t?e.notify({reason:Jt.PAGEHIDE}):o.type==="visibilitychange"&&document.visibilityState==="hidden"?e.notify({reason:Jt.HIDDEN}):o.type==="freeze"&&e.notify({reason:Jt.FROZEN})},{capture:!0}).stop,i=B;return t||(i=G(r,window,"beforeunload",function(){e.notify({reason:Jt.UNLOADING})}).stop),function(){n(),i()}});return e}function oi(r){return _e(Dt(Jt),r)}var zf=function(){function r(e,t,n){var i=this;this.request=e,this.flushController=t,this.messageBytesLimit=n,this.pushOnlyBuffer=[],this.upsertBuffer={},this.flushSubscription=this.flushController.flushObservable.subscribe(function(o){return i.flush(o)})}return r.prototype.add=function(e){this.addOrUpdate(e)},r.prototype.upsert=function(e,t){this.addOrUpdate(e,t)},r.prototype.stop=function(){this.flushSubscription.unsubscribe()},r.prototype.flush=function(e){var t=this.pushOnlyBuffer.concat(Dt(this.upsertBuffer));this.pushOnlyBuffer=[],this.upsertBuffer={};var n={data:t.join(`
`),bytesCount:e.bytesCount,flushReason:e.reason};oi(e.reason)?this.request.sendOnExit(n):this.request.send(n)},r.prototype.addOrUpdate=function(e,t){var n=this.process(e),i=n.processedMessage,o=n.messageBytesCount;if(o>=this.messageBytesLimit){L.warn("Discarded a message whose size was bigger than the maximum allowed size ".concat(this.messageBytesLimit,"KB."));return}this.hasMessageFor(t)&&this.remove(t),this.push(i,o,t)},r.prototype.process=function(e){var t=qe(e),n=qt(t);return{processedMessage:t,messageBytesCount:n}},r.prototype.push=function(e,t,n){var i=this.flushController.messagesCount>0?1:0;this.flushController.notifyBeforeAddMessage(t+i),n!==void 0?this.upsertBuffer[n]=e:this.pushOnlyBuffer.push(e),this.flushController.notifyAfterAddMessage()},r.prototype.remove=function(e){var t=this.upsertBuffer[e];delete this.upsertBuffer[e];var n=qt(t),i=this.flushController.messagesCount>1?1:0;this.flushController.notifyAfterRemoveMessage(n+i)},r.prototype.hasMessageFor=function(e){return e!==void 0&&this.upsertBuffer[e]!==void 0},r}();function ic(r){var e=r.messagesLimit,t=r.bytesLimit,n=r.durationLimit,i=r.pageExitObservable,o=r.sessionExpireObservable,s=i.subscribe(function(m){return d(m.reason)}),a=o.subscribe(function(){return d("session_expire")}),c=new F(function(){return function(){s.unsubscribe(),a.unsubscribe()}}),u=0,l=0;function d(m){if(l!==0){var g=l,E=u;l=0,u=0,h(),c.notify({reason:m,messagesCount:g,bytesCount:E})}}var f;function p(){f===void 0&&(f=re(function(){d("duration_limit")},n))}function h(){Ve(f),f=void 0}return{flushObservable:c,get messagesCount(){return l},notifyBeforeAddMessage:function(m){u+m>=t&&d("bytes_limit"),l+=1,u+=m,p()},notifyAfterAddMessage:function(){l>=e?d("messages_limit"):u>=t&&d("bytes_limit")},notifyAfterRemoveMessage:function(m){u-=m,l-=1,l===0&&h()}}}function hr(r,e,t,n,i,o){var s=c(r,e.endpoint),a=t&&c(r,t.endpoint);function c(u,l){return new zf(dn(u,l,u.batchBytesLimit,n),ic({messagesLimit:u.batchMessagesLimit,bytesLimit:u.batchBytesLimit,durationLimit:u.flushTimeout,pageExitObservable:i,sessionExpireObservable:o}),u.messageBytesLimit)}return{flushObservable:s.flushController.flushObservable,add:function(u,l){l===void 0&&(l=!0),s.add(u),a&&l&&a.add(t.transformMessage?t.transformMessage(u):u)},upsert:function(u,l){s.upsert(u,l),a&&a.upsert(t.transformMessage?t.transformMessage(u):u,l)},stop:function(){s.stop(),a?.stop()}}}function jf(r){var e=new Set;return r.forEach(function(t){return e.add(t)}),Zr(e)}var si=function(){function r(){this.callbacks={}}return r.prototype.notify=function(e,t){var n=this.callbacks[e];n&&n.forEach(function(i){return i(t)})},r.prototype.subscribe=function(e,t){var n=this;return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),{unsubscribe:function(){n.callbacks[e]=n.callbacks[e].filter(function(i){return t!==i})}}},r}();function ai(r,e,t){var n=0,i=!1;return{isLimitReached:function(){if(n===0&&re(function(){n=0},oe),n+=1,n<=e||i)return i=!1,!1;if(n===e+1){i=!0;try{t({message:"Reached max number of ".concat(r,"s by minute: ").concat(e),source:Y.AGENT,startClocks:ce()})}finally{i=!1}}return!0}}}function fn(r,e,t){if(document.readyState===e||document.readyState==="complete")t();else{var n=e==="complete"?"load":"DOMContentLoaded";G(r,window,n,t,{once:!0})}}var oc,sc=new WeakMap;function ci(r){return oc||(oc=AS(r)),oc}function AS(r){var e=new F(function(){var t=Re(XMLHttpRequest.prototype,"open",{before:CS}).stop,n=Re(XMLHttpRequest.prototype,"send",{before:function(){wS.call(this,r,e)}}).stop,i=Re(XMLHttpRequest.prototype,"abort",{before:xS}).stop;return function(){t(),n(),i()}});return e}function CS(r,e){sc.set(this,{state:"open",method:r,url:Ir(String(e))})}function wS(r,e){var t=this,n=sc.get(this);if(n){var i=n;i.state="start",i.startTime=Ae(),i.startClocks=ce(),i.isAborted=!1,i.xhr=this;var o=!1,s=Re(this,"onreadystatechange",{before:function(){this.readyState===XMLHttpRequest.DONE&&a()}}).stop,a=function(){if(c(),s(),!o){o=!0;var u=n;u.state="complete",u.duration=pe(i.startClocks.timeStamp,$()),u.status=t.status,e.notify(Wt(u))}},c=G(r,this,"loadend",a).stop;e.notify(i)}}function xS(){var r=sc.get(this);r&&(r.isAborted=!0)}var ac;function ui(){return ac||(ac=RS()),ac}function RS(){var r=new F(function(){if(window.fetch){var e=Ho(window,"fetch",function(t){return function(n,i){var o,s=Ge(IS,null,[r,n,i]);return s?(o=t.call(this,s.input,s.init),Ge(OS,null,[r,o,s])):o=t.call(this,n,i),o}}).stop;return e}});return r}function IS(r,e,t){var n=t&&t.method||e instanceof Request&&e.method||"GET",i=e instanceof Request?e.url:Ir(String(e)),o=ce(),s={state:"start",init:t,input:e,method:n,startClocks:o,url:i};return r.notify(s),s}function OS(r,e,t){var n=function(i){var o=t;o.state="resolve","stack"in i||i instanceof Error?(o.status=0,o.isAborted=i instanceof DOMException&&i.code===DOMException.ABORT_ERR,o.error=i):"status"in i&&(o.response=i,o.responseType=i.type,o.status=i.status,o.isAborted=!1),r.notify(o)};e.then(_(n),_(n))}var cc={};function li(r){var e=r.map(function(t){return cc[t]||(cc[t]=NS(t)),cc[t]});return Mo.apply(void 0,e)}function NS(r){var e=new F(function(){var t=pt[r];return pt[r]=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];t.apply(console,n);var o=Xn();Ge(function(){e.notify(MS(n,r,o))})},function(){pt[r]=t}});return e}function MS(r,e,t){var n=r.map(function(a){return kS(a)}).join(" "),i,o;if(e===Me.error){var s=mt(r,function(a){return a instanceof Error});i=s?vt(xe(s)):void 0,o=Xa(s),n="console error: ".concat(n)}return{api:e,message:n,stack:i,handlingStack:t,fingerprint:o}}function kS(r){return typeof r=="string"?ge(r):r instanceof Error?Ja(xe(r)):qe(ge(r),void 0,2)}var DS=500,pn=function(){function r(){this.buffer=[]}return r.prototype.add=function(e){var t=this.buffer.push(e);t>DS&&this.buffer.splice(0,1)},r.prototype.drain=function(){this.buffer.forEach(function(e){return e()}),this.buffer.length=0},r}();var hn,uc=3*it,LS=(hn={},hn[0]="feature flag evaluation",hn[1]="user",hn[2]="global context",hn[3]="logger context",hn);function di(r,e){return r>uc?(L.warn("The ".concat(LS[e]," data exceeds the recommended ").concat(uc/it,"KiB threshold. More details: https://docs.datadoghq.com/real_user_monitoring/browser/troubleshooting/#customer-data-exceeds-the-recommended-3kib-warning")),!0):!1}var PS=200;function xt(r,e){e===void 0&&(e=qt);var t={},n,i=!1,o=new F,s=ke(function(c){n=e(qe(c)),i||(i=di(n,r))},PS).throttled,a={getBytesCount:function(){return n},get:function(){return t},add:function(c,u){t[c]=u,s(t),o.notify()},remove:function(c){delete t[c],s(t),o.notify()},set:function(c){t=c,s(t),o.notify()},getContext:function(){return Zt(t)},setContext:function(c){ze(c)==="object"?(t=ge(c),s(t)):a.clearContext(),o.notify()},setContextProperty:function(c,u){t[c]=ge(u),s(t),o.notify()},removeContextProperty:function(c){delete t[c],s(t),o.notify()},clearContext:function(){t={},n=0,o.notify()},changeObservable:o};return a}var US="_dd_c",FS=[];function Mr(r,e,t,n){n===void 0&&(n=qt);var i=BS(e,t),o=xt(t,n);return s(),FS.push(G(r,window,"storage",function(c){var u=c.key;i===u&&s()})),o.changeObservable.subscribe(a),o;function s(){var c=localStorage.getItem(i),u=c!==null?JSON.parse(c):{};o.setContext(u)}function a(){localStorage.setItem(i,JSON.stringify(o.getContext()))}}function BS(r,e){return"".concat(US,"_").concat(r,"_").concat(e)}function fi(r,e,t){var n=r.getReader(),i=[],o=0;s();function s(){n.read().then(_(function(c){if(c.done){a();return}t.collectStreamBody&&i.push(c.value),o+=c.value.length,o>t.bytesLimit?a():s()}),_(function(c){return e(c)}))}function a(){n.cancel().catch(B);var c,u;if(t.collectStreamBody){var l;if(i.length===1)l=i[0];else{l=new Uint8Array(o);var d=0;i.forEach(function(f){l.set(f,d),d+=f.length})}c=l.slice(0,t.bytesLimit),u=l.length>t.bytesLimit}e(void 0,c,u)}}var VS="datadog-synthetics-public-id",zS="datadog-synthetics-result-id",jS="datadog-synthetics-injects-rum";function er(){return!!(window._DATADOG_SYNTHETICS_INJECTS_RUM||st(jS))}function pi(){var r=window._DATADOG_SYNTHETICS_PUBLIC_ID||st(VS);return typeof r=="string"?r:void 0}function hi(){var r=window._DATADOG_SYNTHETICS_RESULT_ID||st(zS);return typeof r=="string"?r:void 0}function kr(r){var e=I({},r),t=["id","name","email"];return t.forEach(function(n){n in e&&(e[n]=String(e[n]))}),e}function mi(r){var e=ze(r)==="object";return e||L.error("Unsupported user:",r),e}function gi(r){var e=ze(r);return e==="string"||e==="function"||r instanceof RegExp}function Jo(r,e,t){return t===void 0&&(t=!1),r.some(function(n){try{if(typeof n=="function")return n(e);if(n instanceof RegExp)return n.test(e);if(typeof n=="string")return t?dr(e,n):n===e}catch(i){L.error(i)}return!1})}function Yf(r){var e=r;return ze(e)==="object"&&gi(e.match)&&Array.isArray(e.propagatorTypes)}function $S(r){r.status===0&&!r.isAborted&&(r.traceId=void 0,r.spanId=void 0,r.traceSampled=void 0)}function Hf(r,e){return{clearTracingIfNeeded:$S,traceFetch:function(t){return $f(r,t,e,function(n){var i;if(t.input instanceof Request&&!(!((i=t.init)===null||i===void 0)&&i.headers))t.input=new Request(t.input),Object.keys(n).forEach(function(s){t.input.headers.append(s,n[s])});else{t.init=Wt(t.init);var o=[];t.init.headers instanceof Headers?t.init.headers.forEach(function(s,a){o.push([a,s])}):Array.isArray(t.init.headers)?t.init.headers.forEach(function(s){o.push(s)}):t.init.headers&&Object.keys(t.init.headers).forEach(function(s){o.push([s,t.init.headers[s]])}),t.init.headers=o.concat(Jr(n))}})},traceXhr:function(t,n){return $f(r,t,e,function(i){Object.keys(i).forEach(function(o){n.setRequestHeader(o,i[o])})})}}}function $f(r,e,t,n){if(!(!KS()||!t.findTrackedSession())){var i=mt(r.allowedTracingUrls,function(o){return Jo([o.match],e.url,!0)});i&&(e.traceId=new Kf,e.spanId=new Kf,e.traceSampled=!Ct(r.traceSampleRate)||ht(r.traceSampleRate),n(YS(e.traceId,e.spanId,e.traceSampled,i.propagatorTypes)))}}function KS(){return Gf()!==void 0}function Gf(){return window.crypto||window.msCrypto}function YS(r,e,t,n){var i={};return n.forEach(function(o){switch(o){case"datadog":{I(i,{"x-datadog-origin":"rum","x-datadog-parent-id":e.toDecimalString(),"x-datadog-sampling-priority":t?"1":"0","x-datadog-trace-id":r.toDecimalString()});break}case"tracecontext":{I(i,{traceparent:"00-0000000000000000".concat(r.toPaddedHexadecimalString(),"-").concat(e.toPaddedHexadecimalString(),"-0").concat(t?"1":"0")});break}case"b3":{I(i,{b3:"".concat(r.toPaddedHexadecimalString(),"-").concat(e.toPaddedHexadecimalString(),"-").concat(t?"1":"0")});break}case"b3multi":{I(i,{"X-B3-TraceId":r.toPaddedHexadecimalString(),"X-B3-SpanId":e.toPaddedHexadecimalString(),"X-B3-Sampled":t?"1":"0"});break}}}),i}var Kf=function(){function r(){this.buffer=new Uint8Array(8),Gf().getRandomValues(this.buffer),this.buffer[0]=this.buffer[0]&127}return r.prototype.toString=function(e){var t=this.readInt32(0),n=this.readInt32(4),i="";do{var o=t%e*4294967296+n;t=Math.floor(t/e),n=Math.floor(o/e),i=(o%e).toString(e)+i}while(t||n);return i},r.prototype.toDecimalString=function(){return this.toString(10)},r.prototype.toPaddedHexadecimalString=function(){var e=this.toString(16);return Array(17-e.length).join("0")+e},r.prototype.readInt32=function(e){return this.buffer[e]*16777216+(this.buffer[e+1]<<16)+(this.buffer[e+2]<<8)+this.buffer[e+3]},r}();function qf(r){var e,t,n,i,o,s;if(!r.applicationId){L.error("Application ID is not configured, no RUM data will be collected.");return}if(r.sessionReplaySampleRate!==void 0&&!ur(r.sessionReplaySampleRate)){L.error("Session Replay Sample Rate should be a number between 0 and 100");return}var a=(e=r.premiumSampleRate)!==null&&e!==void 0?e:r.replaySampleRate;if(a!==void 0&&r.sessionReplaySampleRate!==void 0&&(L.warn("Ignoring Premium Sample Rate because Session Replay Sample Rate is set"),a=void 0),a!==void 0&&!ur(a)){L.error("Premium Sample Rate should be a number between 0 and 100");return}var c=(t=r.traceSampleRate)!==null&&t!==void 0?t:r.tracingSampleRate;if(c!==void 0&&!ur(c)){L.error("Trace Sample Rate should be a number between 0 and 100");return}if(r.excludedActivityUrls!==void 0&&!Array.isArray(r.excludedActivityUrls)){L.error("Excluded Activity Urls should be an array");return}var u=HS(r);if(u){var l=on(r);if(l){var d=!!((n=r.trackUserInteractions)!==null&&n!==void 0?n:r.trackInteractions),f=!!r.trackFrustrations;return I({applicationId:r.applicationId,version:r.version,actionNameAttribute:r.actionNameAttribute,sessionReplaySampleRate:(o=(i=r.sessionReplaySampleRate)!==null&&i!==void 0?i:a)!==null&&o!==void 0?o:100,oldPlansBehavior:r.sessionReplaySampleRate===void 0,traceSampleRate:c,allowedTracingUrls:u,excludedActivityUrls:(s=r.excludedActivityUrls)!==null&&s!==void 0?s:[],workerUrl:r.workerUrl,trackUserInteractions:d||f,trackFrustrations:f,trackViewsManually:!!r.trackViewsManually,trackResources:r.trackResources,trackLongTasks:r.trackLongTasks,subdomain:r.subdomain,defaultPrivacyLevel:en(Qt,r.defaultPrivacyLevel)?r.defaultPrivacyLevel:Qt.MASK_USER_INPUT,customerDataTelemetrySampleRate:1},l)}}}function HS(r){if(r.allowedTracingUrls!==void 0&&r.allowedTracingOrigins!==void 0&&L.warn("Both allowedTracingUrls and allowedTracingOrigins (deprecated) have been defined. The parameter allowedTracingUrls will override allowedTracingOrigins."),r.allowedTracingUrls!==void 0){if(!Array.isArray(r.allowedTracingUrls)){L.error("Allowed Tracing URLs should be an array");return}if(r.allowedTracingUrls.length!==0&&r.service===void 0){L.error("Service needs to be configured when tracing is enabled");return}var e=[];return r.allowedTracingUrls.forEach(function(n){gi(n)?e.push({match:n,propagatorTypes:["datadog"]}):Yf(n)?e.push(n):L.warn("Allowed Tracing Urls parameters should be a string, RegExp, function, or an object. Ignoring parameter",n)}),e}if(r.allowedTracingOrigins!==void 0){if(!Array.isArray(r.allowedTracingOrigins)){L.error("Allowed Tracing Origins should be an array");return}if(r.allowedTracingOrigins.length!==0&&r.service===void 0){L.error("Service needs to be configured when tracing is enabled");return}var t=[];return r.allowedTracingOrigins.forEach(function(n){var i=GS(n);i&&t.push(i)}),t}return[]}function GS(r){var e;if(typeof r=="string"?e=r:r instanceof RegExp?e=function(t){return r.test($a(t))}:typeof r=="function"&&(e=function(t){return r($a(t))}),e===void 0){L.warn("Allowed Tracing Origins parameters should be a string, RegExp or function. Ignoring parameter",r);return}return{match:e,propagatorTypes:["datadog"]}}function qS(r){var e=new Set;return Array.isArray(r.allowedTracingUrls)&&r.allowedTracingUrls.length>0&&r.allowedTracingUrls.forEach(function(t){gi(t)?e.add("datadog"):ze(t)==="object"&&Array.isArray(t.propagatorTypes)&&t.propagatorTypes.forEach(function(n){return e.add(n)})}),Array.isArray(r.allowedTracingOrigins)&&r.allowedTracingOrigins.length>0&&e.add("datadog"),Zr(e)}function Wf(r){var e,t,n=sn(r);return I({premium_sample_rate:r.premiumSampleRate,replay_sample_rate:r.replaySampleRate,session_replay_sample_rate:r.sessionReplaySampleRate,trace_sample_rate:(e=r.traceSampleRate)!==null&&e!==void 0?e:r.tracingSampleRate,action_name_attribute:r.actionNameAttribute,use_allowed_tracing_origins:Array.isArray(r.allowedTracingOrigins)&&r.allowedTracingOrigins.length>0,use_allowed_tracing_urls:Array.isArray(r.allowedTracingUrls)&&r.allowedTracingUrls.length>0,selected_tracing_propagators:qS(r),default_privacy_level:r.defaultPrivacyLevel,use_excluded_activity_urls:Array.isArray(r.excludedActivityUrls)&&r.excludedActivityUrls.length>0,use_worker_url:!!r.workerUrl,track_frustrations:r.trackFrustrations,track_views_manually:r.trackViewsManually,track_user_interactions:(t=r.trackUserInteractions)!==null&&t!==void 0?t:r.trackInteractions},n)}function vi(r,e,t){return{context:r.getContext(),user:e.getContext(),hasReplay:t.isRecording()?!0:void 0}}var Qf="rum";function lc(r,e,t){var n=t===void 0?{}:t,i=n.ignoreInitIfSyntheticsWillInjectRum,o=i===void 0?!0:i,s=!1,a=xt(2),c=xt(1),u=function(){},l=function(){},d=B,f=function(){},p=new pn,h=function(T,O){O===void 0&&(O=$()),p.add(function(){return h(T,O)})},m=function(T,O){O===void 0&&(O=ce()),p.add(function(){return m(T,O)})},g=function(T,O){O===void 0&&(O=vi(a,c,e)),p.add(function(){return g(T,O)})},E=function(T,O){O===void 0&&(O=vi(a,c,e)),p.add(function(){return E(T,O)})},x=function(T,O){p.add(function(){return x(T,O)})};function k(T){if(!T){L.error("Missing configuration");return}if(l=function(){return Zt(T)},!(o&&er())){var O=De();if(O&&(T=z(T)),!!V(T)){var ye=qf(T);if(ye){if(!O&&!ye.sessionStoreStrategyType){L.warn("No storage available for session. We will not send any data.");return}if(!ye.trackViewsManually)A(T,ye);else{var Pe=p;p=new pn,m=function(St){A(T,ye,St)},Pe.drain()}s=!0}}}}function A(T,O,ye){if(T.storeContextsAcrossPages){var Pe=a.getContext();a=Mr(O,Qf,2),a.setContext(le(a.getContext(),Pe));var St=c.getContext();c=Mr(O,Qf,1),c.setContext(le(c.getContext(),St))}var te=r(T,O,e,a,c,ye);f=function(){return e.getSessionReplayLink(O,te.session,te.viewContexts)},m=te.startView,g=te.addAction,E=te.addError,h=te.addTiming,x=te.addFeatureFlagEvaluation,u=te.getInternalContext,d=te.stopSession,p.drain(),e.onRumStart(te.lifeCycle,O,te.session,te.viewContexts)}var S=_(function(T){var O=typeof T=="object"?T:{name:T};m(O)}),C=Jn({init:_(k),addRumGlobalContext:_(function(T,O){return a.add(T,O)}),setGlobalContextProperty:_(function(T,O){return a.setContextProperty(T,O)}),removeRumGlobalContext:_(function(T){return a.remove(T)}),removeGlobalContextProperty:_(function(T){return a.removeContextProperty(T)}),getRumGlobalContext:_(function(){return a.get()}),getGlobalContext:_(function(){return a.getContext()}),setRumGlobalContext:_(function(T){return a.set(T)}),setGlobalContext:_(function(T){return a.setContext(T)}),clearGlobalContext:_(function(){return a.clearContext()}),getInternalContext:_(function(T){return u(T)}),getInitConfiguration:_(function(){return l()}),addAction:_(function(T,O){g({name:ge(T),context:ge(O),startClocks:ce(),type:"custom"})}),addError:function(T,O){var ye=Xn();Ge(function(){E({error:T,handlingStack:ye,context:ge(O),startClocks:ce()})})},addTiming:_(function(T,O){h(ge(T),O)}),setUser:_(function(T){mi(T)&&c.setContext(kr(T))}),getUser:_(function(){return c.getContext()}),setUserProperty:_(function(T,O){var ye,Pe=kr((ye={},ye[T]=O,ye))[T];c.setContextProperty(T,Pe)}),removeUserProperty:_(function(T){return c.removeContextProperty(T)}),removeUser:_(function(){return c.clearContext()}),clearUser:_(function(){return c.clearContext()}),startView:S,stopSession:_(function(){d()}),startSessionReplayRecording:_(e.start),stopSessionReplayRecording:_(e.stop),addFeatureFlagEvaluation:_(function(T,O){x(ge(T),ge(O))}),getSessionReplayLink:_(function(){return f()})});return C;function V(T){return s?(T.silentMultipleInit||L.error("DD_RUM is already initialized."),!1):!0}function z(T){return I({},T,{applicationId:"00000000-aaaa-0000-aaaa-000000000000",clientToken:"empty",sessionSampleRate:100})}}function Xf(){var r=es(),e=new F(function(){if(r){var t=new r(_(function(){return e.notify()}));return t.observe(document,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),function(){return t.disconnect()}}});return e}function es(){var r,e=window;if(e.Zone&&(r=gt(e,"MutationObserver"),e.MutationObserver&&r===e.MutationObserver)){var t=new e.MutationObserver(B),n=gt(t,"originalInstance");r=n&&n.constructor}return r||(r=e.MutationObserver),r}var fc="initial_document",WS=[["document",function(r){return fc===r}],["xhr",function(r){return r==="xmlhttprequest"}],["fetch",function(r){return r==="fetch"}],["beacon",function(r){return r==="beacon"}],["css",function(r,e){return/\.css$/i.test(e)}],["js",function(r,e){return/\.js$/i.test(e)}],["image",function(r,e){return _e(["image","img","icon"],r)||/\.(gif|jpg|jpeg|tiff|png|svg|ico)$/i.exec(e)!==null}],["font",function(r,e){return/\.(woff|eot|woff2|ttf)$/i.exec(e)!==null}],["media",function(r,e){return _e(["audio","video"],r)||/\.(mp3|mp4)$/i.exec(e)!==null}]];function Zf(r){var e=r.name;if(!Cf(e))return Ce('Failed to construct URL for "'.concat(r.name,'"')),"other";for(var t=wf(e),n=0,i=WS;n<i.length;n++){var o=i[n],s=o[0],a=o[1];if(a(r.initiatorType,t))return s}return"other"}function dc(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];for(var t=1;t<r.length;t+=1)if(r[t-1]>r[t])return!1;return!0}function Jf(r){return r.initiatorType==="xmlhttprequest"||r.initiatorType==="fetch"}function ep(r){var e=r.duration,t=r.startTime,n=r.responseEnd;return e===0&&t<n?J(pe(t,n)):J(e)}function tp(r){var e=pc(r);if(e){var t=e.startTime,n=e.fetchStart,i=e.redirectStart,o=e.redirectEnd,s=e.domainLookupStart,a=e.domainLookupEnd,c=e.connectStart,u=e.secureConnectionStart,l=e.connectEnd,d=e.requestStart,f=e.responseStart,p=e.responseEnd,h={download:mn(t,f,p),first_byte:mn(t,d,f)};return l!==n&&(h.connect=mn(t,c,l),dc(c,u,l)&&(h.ssl=mn(t,u,l))),a!==n&&(h.dns=mn(t,s,a)),rp(r)&&(h.redirect=mn(t,i,o)),h}}function pc(r){if(dc(r.startTime,r.fetchStart,r.domainLookupStart,r.domainLookupEnd,r.connectStart,r.connectEnd,r.requestStart,r.responseStart,r.responseEnd)){if(!rp(r))return r;var e=r.redirectStart,t=r.redirectEnd;if(e<r.startTime&&(e=r.startTime),t<r.startTime&&(t=r.fetchStart),!!dc(r.startTime,e,t,r.fetchStart))return I({},r,{redirectEnd:t,redirectStart:e})}}function rp(r){return r.fetchStart!==r.startTime}function mn(r,e,t){return{duration:J(pe(e,t)),start:J(pe(r,e))}}function np(r){if(r.startTime<r.responseStart)return r.decodedBodySize}function yi(r,e){return e&&!r.isIntakeUrl(e)}function ts(r){return r.nodeType===Node.TEXT_NODE}function ip(r){return r.nodeType===Node.COMMENT_NODE}function Vt(r){return r.nodeType===Node.ELEMENT_NODE}function gn(r){return Vt(r)&&!!r.shadowRoot}function Ei(r){var e=r;return!!e.host&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&Vt(e.host)}function op(r){return r.childNodes.length>0||gn(r)}function rs(r,e){r.childNodes.forEach(e),gn(r)&&e(r.shadowRoot)}function Dr(r){return Ei(r)?r.host:r.parentNode}var QS=2*oe;function ap(r){var e=XS(r)||ZS(r);if(!(!e||e.traceTime<=Ye()-QS))return e.traceId}function XS(r){var e=r.querySelector("meta[name=dd-trace-id]"),t=r.querySelector("meta[name=dd-trace-time]");return cp(e&&e.content,t&&t.content)}function ZS(r){var e=JS(r);if(e)return cp(Hn(e,"trace-id"),Hn(e,"trace-time"))}function cp(r,e){var t=e&&Number(e);if(!(!r||!t))return{traceId:r,traceTime:t}}function JS(r){for(var e=0;e<r.childNodes.length;e+=1){var t=sp(r.childNodes[e]);if(t)return t}if(r.body)for(var e=r.body.childNodes.length-1;e>=0;e-=1){var n=r.body.childNodes[e],t=sp(n);if(t)return t;if(!ts(n))break}}function sp(r){if(r&&ip(r)){var e=/^\s*DATADOG;(.*?)\s*$/.exec(r.data);if(e)return e[1]}}var j=function(r){return r.EVENT="event",r.FIRST_INPUT="first-input",r.LARGEST_CONTENTFUL_PAINT="largest-contentful-paint",r.LAYOUT_SHIFT="layout-shift",r.LONG_TASK="longtask",r.NAVIGATION="navigation",r.PAINT="paint",r.RESOURCE="resource",r}(j||{});function up(){return window.performance!==void 0&&"getEntries"in performance}function Lr(r){return window.PerformanceObserver&&PerformanceObserver.supportedEntryTypes!==void 0&&PerformanceObserver.supportedEntryTypes.includes(r)}function lp(r,e){if(e_(e,function(a){Si(r,e,[a])}),up()){var t=performance.getEntries();re(function(){return Si(r,e,t)})}if(window.PerformanceObserver){var n=_(function(a){return Si(r,e,a.getEntries())}),i=[j.RESOURCE,j.NAVIGATION,j.LONG_TASK,j.PAINT],o=[j.LARGEST_CONTENTFUL_PAINT,j.FIRST_INPUT,j.LAYOUT_SHIFT,j.EVENT];try{o.forEach(function(a){var c=new window.PerformanceObserver(n);c.observe({type:a,buffered:!0,durationThreshold:40})})}catch{i.push.apply(i,o)}var s=new PerformanceObserver(n);s.observe({entryTypes:i}),up()&&"addEventListener"in performance&&G(e,performance,"resourcetimingbufferfull",function(){performance.clearResourceTimings()})}Lr(j.NAVIGATION)||t_(e,function(a){Si(r,e,[a])}),Lr(j.FIRST_INPUT)||r_(e,function(a){Si(r,e,[a])})}function e_(r,e){fn(r,"interactive",function(){var t,n={entryType:j.RESOURCE,initiatorType:fc,traceId:ap(document),toJSON:function(){return I({},t,{toJSON:void 0})}};if(Lr(j.NAVIGATION)&&performance.getEntriesByType(j.NAVIGATION).length>0){var i=performance.getEntriesByType(j.NAVIGATION)[0];t=I(i.toJSON(),n)}else{var o=dp();t=I(o,{decodedBodySize:0,duration:o.responseEnd,name:window.location.href,startTime:0},n)}e(t)})}function t_(r,e){function t(){e(I(dp(),{entryType:j.NAVIGATION}))}fn(r,"complete",function(){re(t)})}function r_(r,e){var t=Ye(),n=!1,i=se(r,window,["click","mousedown","keydown","touchstart","pointerdown"],function(a){if(a.cancelable){var c={entryType:j.FIRST_INPUT,processingStart:Ae(),processingEnd:Ae(),startTime:a.timeStamp,duration:0,name:""};a.type==="pointerdown"?o(r,c):s(c)}},{passive:!0,capture:!0}).stop;function o(a,c){se(a,window,["pointerup","pointercancel"],function(u){u.type==="pointerup"&&s(c)},{once:!0})}function s(a){if(!n){n=!0,i();var c=a.processingStart-a.startTime;c>=0&&c<Ye()-t&&e(a)}}}function dp(){var r={},e=performance.timing;for(var t in e)if(Ct(e[t])){var n=t,i=e[n];r[n]=i===0?0:Xr(i)}return r}function Si(r,e,t){var n=t.filter(function(o){return en(j,o.entryType)}),i=n.filter(function(o){return!n_(o)&&!i_(e,o)});i.length&&r.notify(0,i)}function n_(r){return r.entryType===j.NAVIGATION&&r.loadEventEnd<=0}function i_(r,e){return e.entryType===j.RESOURCE&&!yi(r,e.name)}function fp(){var r=pi(),e=hi();if(r&&e)return{test_id:r,result_id:e,injected:er()}}function pp(){var r,e=(r=window.Cypress)===null||r===void 0?void 0:r.env("traceId");if(typeof e=="string")return{test_execution_id:e}}function mp(r,e,t){var n=Zt(r),i=t(n);return Jr(e).forEach(function(o){var s=o[0],a=o[1],c=o_(n,s),u=ze(c);u===a?hp(r,s,ge(c)):a==="object"&&(u==="undefined"||u==="null")&&hp(r,s,{})}),i}function o_(r,e){for(var t=r,n=0,i=e.split(".");n<i.length;n++){var o=i[n];if(!s_(t,o))return;t=t[o]}return t}function hp(r,e,t){for(var n=r,i=e.split("."),o=0;o<i.length;o+=1){var s=i[o];if(!gp(n))return;o!==i.length-1?n=n[s]:n[s]=t}}function gp(r){return ze(r)==="object"}function s_(r,e){return gp(r)&&Object.prototype.hasOwnProperty.call(r,e)}var _i={"view.name":"string","view.url":"string","view.referrer":"string"},ns={context:"object"},vp;function yp(r,e,t,n,i,o,s,a,c){var u,l;vp=(u={},u.view=_i,u.error=I({"error.message":"string","error.stack":"string","error.resource.url":"string","error.fingerprint":"string"},ns,_i),u.resource=I({"resource.url":"string"},ns,_i),u.action=I({"action.target.name":"string"},ns,_i),u.long_task=I({},ns,_i),u);var d=(l={},l.error=ai("error",r.eventRateLimiterThreshold,c),l.action=ai("action",r.eventRateLimiterThreshold,c),l),f=fp(),p=pp();e.subscribe(10,function(h){var m=h.startTime,g=h.rawRumEvent,E=h.domainContext,x=h.savedCommonContext,k=h.customerContext,A=n.findView(m),S=i.findUrl(m),C=t.findTrackedSession(m);if(C&&A&&S){var V=x||a(),z=o.findActionId(m),T={_dd:{format_version:2,drift:Xd(),session:{plan:C.plan},configuration:{session_sample_rate:xr(r.sessionSampleRate,3),session_replay_sample_rate:xr(r.sessionReplaySampleRate,3)},browser_sdk_version:De()?"4.50.1":void 0},application:{id:r.applicationId},date:$(),service:A.service||r.service,version:A.version||r.version,source:"browser",session:{id:C.id,type:f?"synthetics":p?"ci_test":"user"},view:{id:A.id,name:A.name,url:S.url,referrer:S.referrer},action:c_(g)&&z?{id:z}:void 0,synthetics:f,ci_test:p,display:s.get()},O=le(T,g);O.context=le(V.context,k),"has_replay"in O.session||(O.session.has_replay=V.hasReplay),Be(V.user)||(O.usr=V.user),a_(O,r.beforeSend,E,d)&&(Be(O.context)&&delete O.context,e.notify(11,O))}})}function a_(r,e,t,n){var i;if(e){var o=mp(r,vp[r.type],function(a){return e(a,t)});if(o===!1&&r.type!=="view")return!1;o===!1&&L.warn("Can't dismiss view events using beforeSend!")}var s=(i=n[r.type])===null||i===void 0?void 0:i.isLimitReached();return!s}function c_(r){return["error","resource","long_task"].indexOf(r.type)!==-1}function Ep(r,e,t,n,i){return{get:function(o){var s=t.findView(o),a=i.findUrl(o),c=e.findTrackedSession(o);if(c&&s&&a){var u=n.findActionId(o);return{application_id:r,session_id:c.id,user_action:u?{id:u}:void 0,view:{id:s.id,name:s.name,referrer:a.referrer,url:a.url}}}}}}var hc=si;var u_=ot;function Sp(r){var e=new at(u_);r.subscribe(2,function(n){e.add(t(n),n.startClocks.relative)}),r.subscribe(4,function(n){var i=n.endClocks;e.closeActive(i.relative)}),r.subscribe(8,function(){e.reset()});function t(n){return{service:n.service,version:n.version,id:n.id,name:n.name,startClocks:n.startClocks}}return{findView:function(n){return e.find(n)},stop:function(){e.stop()}}}var _p=1;function bp(r,e,t){var n=Hf(e,t);l_(r,e,n),d_(r,e,n)}function l_(r,e,t){var n=ci(e).subscribe(function(i){var o=i;if(yi(e,o.url))switch(o.state){case"start":t.traceXhr(o,o.xhr),o.requestIndex=Tp(),r.notify(5,{requestIndex:o.requestIndex,url:o.url});break;case"complete":t.clearTracingIfNeeded(o),r.notify(6,{duration:o.duration,method:o.method,requestIndex:o.requestIndex,spanId:o.spanId,startClocks:o.startClocks,status:o.status,traceId:o.traceId,traceSampled:o.traceSampled,type:"xhr",url:o.url,xhr:o.xhr});break}});return{stop:function(){return n.unsubscribe()}}}function d_(r,e,t){var n=ui().subscribe(function(i){var o=i;if(yi(e,o.url))switch(o.state){case"start":t.traceFetch(o),o.requestIndex=Tp(),r.notify(5,{requestIndex:o.requestIndex,url:o.url});break;case"resolve":f_(o,function(s){t.clearTracingIfNeeded(o),r.notify(6,{duration:s,method:o.method,requestIndex:o.requestIndex,responseType:o.responseType,spanId:o.spanId,startClocks:o.startClocks,status:o.status,traceId:o.traceId,traceSampled:o.traceSampled,type:"fetch",url:o.url,response:o.response,init:o.init,input:o.input})});break}});return{stop:function(){return n.unsubscribe()}}}function Tp(){var r=_p;return _p+=1,r}function f_(r,e){var t=r.response&&Zo(r.response);!t||!t.body?e(pe(r.startClocks.timeStamp,$())):fi(t.body,function(){e(pe(r.startClocks.timeStamp,$()))},{bytesLimit:Number.POSITIVE_INFINITY,collectStreamBody:!1})}function is(r){var e=r.lifeCycle,t=r.isChildEvent,n=r.onChange,i=n===void 0?B:n,o={errorCount:0,longTaskCount:0,resourceCount:0,actionCount:0,frustrationCount:0},s=e.subscribe(11,function(a){var c;if(!(a.type==="view"||!t(a)))switch(a.type){case"error":o.errorCount+=1,i();break;case"action":o.actionCount+=1,a.action.frustration&&(o.frustrationCount+=a.action.frustration.type.length),i();break;case"long_task":o.longTaskCount+=1,i();break;case"resource":!((c=a._dd)===null||c===void 0)&&c.discarded||(o.resourceCount+=1,i());break}});return{stop:function(){s.unsubscribe()},eventCounts:o}}var gc=100,p_=100;function bi(r,e,t,n,i){var o=m_(r,e,t);return h_(o,n,i)}function h_(r,e,t){var n,i=!1,o=re(_(function(){return u({hadActivity:!1})}),gc),s=t!==void 0?re(_(function(){return u({hadActivity:!0,end:$()})}),t):void 0,a=r.subscribe(function(l){var d=l.isBusy;Ve(o),Ve(n);var f=$();d||(n=re(_(function(){return u({hadActivity:!0,end:f})}),p_))}),c=function(){i=!0,Ve(o),Ve(n),Ve(s),a.unsubscribe()};function u(l){i||(c(),e(l))}return{stop:c}}function m_(r,e,t){var n=new F(function(){var i=[],o,s=0;i.push(e.subscribe(c),r.subscribe(0,function(u){u.some(function(l){return l.entryType===j.RESOURCE&&!mc(t,l.name)})&&c()}),r.subscribe(5,function(u){mc(t,u.url)||(o===void 0&&(o=u.requestIndex),s+=1,c())}),r.subscribe(6,function(u){mc(t,u.url)||o===void 0||u.requestIndex<o||(s-=1,c())}));var a=g_(c).stop;return function(){a(),i.forEach(function(u){return u.unsubscribe()})};function c(){n.notify({isBusy:s>0})}});return n}function mc(r,e){return Jo(r.excludedActivityUrls,e)}function g_(r){return Re(window,"open",{before:r})}var Ti="data-dd-action-name";function wp(r,e){return Ap(r,Ti)||e&&Ap(r,e)||Cp(r,e,v_)||Cp(r,e,y_)||""}function Ap(r,e){var t;if(T_())t=r.closest("[".concat(e,"]"));else for(var n=r;n;){if(n.hasAttribute(e)){t=n;break}n=n.parentElement}if(t){var i=t.getAttribute(e);return Rp(xp(i.trim()))}}var v_=[function(r,e){if(b_()){if("labels"in r&&r.labels&&r.labels.length>0)return vn(r.labels[0],e)}else if(r.id){var t=r.ownerDocument&&mt(r.ownerDocument.querySelectorAll("label"),function(n){return n.htmlFor===r.id});return t&&vn(t,e)}},function(r){if(r.nodeName==="INPUT"){var e=r,t=e.getAttribute("type");if(t==="button"||t==="submit"||t==="reset")return e.value}},function(r,e){if(r.nodeName==="BUTTON"||r.nodeName==="LABEL"||r.getAttribute("role")==="button")return vn(r,e)},function(r){return r.getAttribute("aria-label")},function(r,e){var t=r.getAttribute("aria-labelledby");if(t)return t.split(/\s+/).map(function(n){return S_(r,n)}).filter(function(n){return!!n}).map(function(n){return vn(n,e)}).join(" ")},function(r){return r.getAttribute("alt")},function(r){return r.getAttribute("name")},function(r){return r.getAttribute("title")},function(r){return r.getAttribute("placeholder")},function(r,e){if("options"in r&&r.options.length>0)return vn(r.options[0],e)}],y_=[function(r,e){return vn(r,e)}],E_=10;function Cp(r,e,t){for(var n=r,i=0;i<=E_&&n&&n.nodeName!=="BODY"&&n.nodeName!=="HTML"&&n.nodeName!=="HEAD";){for(var o=0,s=t;o<s.length;o++){var a=s[o],c=a(n,e);if(typeof c=="string"){var u=c.trim();if(u)return Rp(xp(u))}}if(n.nodeName==="FORM")break;n=n.parentElement,i+=1}}function xp(r){return r.replace(/\s+/g," ")}function Rp(r){return r.length>100?"".concat(ko(r,100)," [...]"):r}function S_(r,e){return r.ownerDocument?r.ownerDocument.getElementById(e):null}function vn(r,e){if(!r.isContentEditable){if("innerText"in r){var t=r.innerText,n=function(i){for(var o=r.querySelectorAll(i),s=0;s<o.length;s+=1){var a=o[s];if("innerText"in a){var c=a.innerText;c&&c.trim().length>0&&(t=t.replace(c,""))}}};return __()||n("script, style"),n("[".concat(Ti,"]")),e&&n("[".concat(e,"]")),t}return r.textContent}}function __(){return!cf()}var vc;function b_(){return vc===void 0&&(vc="labels"in HTMLInputElement.prototype),vc}var yc;function T_(){return yc===void 0&&(yc="closest"in HTMLElement.prototype),yc}var ss=[Ti,"data-testid","data-test","data-qa","data-cy","data-test-id","data-qa-id","data-testing","data-component","data-element","data-source-file"],A_=[Np,w_],C_=[Np,x_,R_];function zt(r,e){for(var t="",n=r;n&&n.nodeName!=="HTML";){var i=Ip(n,A_,O_,e,t);if(i)return i;var o=Ip(n,C_,N_,e,t);t=o||Ec(I_(n),t),n=n.parentElement}return t}function Op(r){return/[0-9]/.test(r)}function w_(r){if(r.id&&!Op(r.id))return"#".concat(Lt(r.id))}function x_(r){if(r.tagName!=="BODY"&&r.classList.length>0)for(var e=0;e<r.classList.length;e+=1){var t=r.classList[e];if(!Op(t))return"".concat(Lt(r.tagName),".").concat(Lt(t))}}function R_(r){return Lt(r.tagName)}function Np(r,e){if(e){var t=s(e);if(t)return t}for(var n=0,i=ss;n<i.length;n++){var o=i[n],t=s(o);if(t)return t}function s(a){if(r.hasAttribute(a))return"".concat(Lt(r.tagName),"[").concat(a,'="').concat(Lt(r.getAttribute(a)),'"]')}}function I_(r){for(var e=r.parentElement.firstElementChild,t=1;e&&e!==r;)e.tagName===r.tagName&&(t+=1),e=e.nextElementSibling;return"".concat(Lt(r.tagName),":nth-of-type(").concat(t,")")}function Ip(r,e,t,n,i){for(var o=0,s=e;o<s.length;o++){var a=s[o],c=a(r,n);if(c){var u=Ec(c,i);if(t(r,u))return u}}}function O_(r,e){return r.ownerDocument.querySelectorAll(e).length===1}function N_(r,e){return r.parentElement.querySelectorAll(M_()?Ec(":scope",e):e).length===1}function Ec(r,e){return e?"".concat(r,">").concat(e):r}var os;function M_(){if(os===void 0)try{document.querySelector(":scope"),os=!0}catch{os=!1}return os}var Mp=ie,k_=100;function kp(r,e){var t=[],n=0,i;o(r);function o(c){c.stopObservable.subscribe(s),t.push(c),Ve(i),i=re(a,Mp)}function s(){n===1&&t.every(function(c){return c.isStopped()})&&(n=2,e(t))}function a(){Ve(i),n===0&&(n=1,s())}return{tryAppend:function(c){return n!==0?!1:t.length>0&&!D_(t[t.length-1].event,c.event)?(a(),!1):(o(c),!0)},stop:function(){a()}}}function D_(r,e){return r.target===e.target&&L_(r,e)<=k_&&r.timeStamp-e.timeStamp<=Mp}function L_(r,e){return Math.sqrt(Math.pow(r.clientX-e.clientX,2)+Math.pow(r.clientY-e.clientY,2))}function Pp(r,e){var t=e.onPointerDown,n=e.onPointerUp,i,o={selection:!1,input:!1},s,a=[G(r,window,"pointerdown",function(c){Lp(c)&&(i=Dp(),o={selection:!1,input:!1},s=t(c))},{capture:!0}),G(r,window,"selectionchange",function(){(!i||!Dp())&&(o.selection=!0)},{capture:!0}),G(r,window,"pointerup",function(c){if(Lp(c)&&s){var u=o;n(s,c,function(){return u}),s=void 0}},{capture:!0}),G(r,window,"input",function(){o.input=!0},{capture:!0})];return{stop:function(){a.forEach(function(c){return c.stop()})}}}function Dp(){var r=window.getSelection();return!r||r.isCollapsed}function Lp(r){return r.target instanceof Element&&r.isPrimary!==!1}var Up=3;function Bp(r,e){if(P_(r))return e.addFrustration("rage_click"),r.some(Fp)&&e.addFrustration("dead_click"),e.hasError&&e.addFrustration("error_click"),{isRage:!0};var t=r.some(function(n){return n.getUserActivity().selection});return r.forEach(function(n){n.hasError&&n.addFrustration("error_click"),Fp(n)&&!t&&n.addFrustration("dead_click")}),{isRage:!1}}function P_(r){if(r.some(function(t){return t.getUserActivity().selection}))return!1;for(var e=0;e<r.length-(Up-1);e+=1)if(r[e+Up-1].event.timeStamp-r[e].event.timeStamp<=ie)return!0;return!1}var U_='input:not([type="checkbox"]):not([type="radio"]):not([type="button"]):not([type="submit"]):not([type="reset"]):not([type="range"]),textarea,select,[contenteditable],[contenteditable] *,canvas,a[href],a[href] *';function Fp(r){return r.hasPageActivity||r.getUserActivity().input?!1:!nf(r.event.target,U_)}var F_=10*ie,B_=5*oe;function Vp(r,e,t){var n=new at(B_),i=new F,o;r.subscribe(8,function(){n.reset()}),r.subscribe(4,u);var s=Pp(t,{onPointerDown:function(l){return V_(t,r,e,n,l)},onPointerUp:function(l,d,f){var p=l.clickActionBase,h=l.hadActivityOnPointerDown;return z_(t,r,e,n,i,c,p,d,f,h)}}).stop,a={findActionId:function(l){return t.trackFrustrations?n.findAll(l):n.find(l)}};return{stop:function(){u(),i.notify(),s()},actionContexts:a};function c(l){if(!o||!o.tryAppend(l)){var d=l.clone();o=kp(l,function(f){$_(f,d)})}}function u(){o&&o.stop()}}function V_(r,e,t,n,i){if(!(!r.trackFrustrations&&n.find())){var o=j_(i,r.actionNameAttribute);if(!(!r.trackFrustrations&&!o.name)){var s=!1;return bi(e,t,r,function(a){s=a.hadActivity},gc),{clickActionBase:o,hadActivityOnPointerDown:function(){return s}}}}}function z_(r,e,t,n,i,o,s,a,c,u){var l=zp(e,n,c,s,a);r.trackFrustrations&&o(l);var d=bi(e,t,r,function(h){h.hadActivity&&h.end<l.startClocks.timeStamp?l.discard():(h.hadActivity?l.stop(h.end):u()?l.stop(l.startClocks.timeStamp):l.stop(),r.trackFrustrations||(h.hadActivity?l.validate():l.discard()))},F_).stop,f=e.subscribe(4,function(h){var m=h.endClocks;l.stop(m.timeStamp)}),p=i.subscribe(function(){l.stop()});l.stopObservable.subscribe(function(){f.unsubscribe(),d(),p.unsubscribe()})}function j_(r,e){var t=r.target.getBoundingClientRect();return{type:"click",target:{width:Math.round(t.width),height:Math.round(t.height),selector:zt(r.target,e)},position:{x:Math.round(r.clientX-t.left),y:Math.round(r.clientY-t.top)},name:wp(r.target,e)}}function zp(r,e,t,n,i){var o=ue(),s=ce(),a=e.add(o,s.relative),c=is({lifeCycle:r,isChildEvent:function(h){return h.action!==void 0&&(Array.isArray(h.action.id)?_e(h.action.id,o):h.action.id===o)}}),u=0,l,d=[],f=new F;function p(h){u===0&&(l=h,u=1,l?a.close(Xr(l)):a.remove(),c.stop(),f.notify())}return{event:i,stop:p,stopObservable:f,get hasError(){return c.eventCounts.errorCount>0},get hasPageActivity(){return l!==void 0},getUserActivity:t,addFrustration:function(h){d.push(h)},startClocks:s,isStopped:function(){return u===1||u===2},clone:function(){return zp(r,e,t,n,i)},validate:function(h){if(p(),u===1){var m=c.eventCounts,g=m.resourceCount,E=m.errorCount,x=m.longTaskCount,k=I({type:"click",duration:l&&pe(s.timeStamp,l),startClocks:s,id:o,frustrationTypes:d,counts:{resourceCount:g,errorCount:E,longTaskCount:x},events:h??[i],event:i},n);r.notify(1,k),u=2}},discard:function(){p(),u=2}}}function $_(r,e){var t=Bp(r,e).isRage;t?(r.forEach(function(n){return n.discard()}),e.stop($()),e.validate(r.map(function(n){return n.event}))):(e.discard(),r.forEach(function(n){return n.validate()}))}function $p(r,e,t,n){r.subscribe(1,function(o){return r.notify(10,jp(o,n))});var i={findActionId:B};return t.trackUserInteractions&&(i=Vp(r,e,t).actionContexts),{addAction:function(o,s){r.notify(10,I({savedCommonContext:s},jp(o,n)))},actionContexts:i}}function jp(r,e){var t=Sc(r)?{action:{id:r.id,loading_time:J(r.duration),frustration:{type:r.frustrationTypes},error:{count:r.counts.errorCount},long_task:{count:r.counts.longTaskCount},resource:{count:r.counts.resourceCount}},_dd:{action:{target:r.target,position:r.position}}}:void 0,n=Sc(r)?void 0:r.context,i=le({action:{id:ue(),target:{name:r.name},type:r.type},date:r.startClocks.timeStamp,type:"action",view:{in_foreground:e.isInActivePageStateAt(r.startClocks.relative)}},t);return{customerContext:n,rawRumEvent:i,startTime:r.startClocks.relative,domainContext:Sc(r)?{event:r.event,events:r.events}:{}}}function Sc(r){return r.type!=="custom"}function Kp(r){var e=li([Me.error]).subscribe(function(t){return r.notify({startClocks:ce(),message:t.message,stack:t.stack,fingerprint:t.fingerprint,source:Y.CONSOLE,handling:"handled",handlingStack:t.handlingStack})});return{stop:function(){e.unsubscribe()}}}function Yp(r,e){var t=ti(r,[We.cspViolation,We.intervention]).subscribe(function(n){return e.notify({startClocks:ce(),message:n.message,stack:n.stack,type:n.subtype,source:Y.REPORT,handling:"unhandled"})});return{stop:function(){t.unsubscribe()}}}function Hp(r,e,t,n){var i=new F;return Kp(i),Zn(i),Yp(e,i),i.subscribe(function(o){return r.notify(12,{error:o})}),K_(r,t,n)}function K_(r,e,t){return r.subscribe(12,function(n){var i=n.error,o=n.customerContext,s=n.savedCommonContext;r.notify(10,I({customerContext:o,savedCommonContext:s},Y_(i,e,t)))}),{addError:function(n,i){var o=n.error,s=n.handlingStack,a=n.startClocks,c=n.context,u=o instanceof Error?xe(o):void 0,l=Nr({stackTrace:u,originalError:o,handlingStack:s,startClocks:a,nonErrorPrefix:"Provided",source:Y.CUSTOM,handling:"handled"});r.notify(12,{customerContext:c,savedCommonContext:i,error:l})}}}function Y_(r,e,t){var n={date:r.startClocks.timeStamp,error:{id:ue(),message:r.message,source:r.source,stack:r.stack,handling_stack:r.handlingStack,type:r.type,handling:r.handling,causes:r.causes,source_type:"browser",fingerprint:r.fingerprint},type:"error",view:{in_foreground:e.isInActivePageStateAt(r.startClocks.relative)}},i=t.findFeatureFlagEvaluations(r.startClocks.relative);return i&&!Be(i)&&(n.feature_flags=i),{rawRumEvent:n,startTime:r.startClocks.relative,domainContext:{error:r.originalError}}}function Gp(r,e){r.subscribe(0,function(t){for(var n=0,i=t;n<i.length;n++){var o=i[n];if(o.entryType!==j.LONG_TASK)break;var s=e.findTrackedSession(o.startTime);if(!s||!s.longTaskAllowed)break;var a=Kn(o.startTime),c={date:a.timeStamp,long_task:{id:ue(),duration:J(o.duration)},type:"long_task",_dd:{discarded:!1}};r.notify(10,{rawRumEvent:c,startTime:a.relative,domainContext:{performanceEntry:o.toJSON()}})}})}function qp(r){if(!(!performance||!("getEntriesByName"in performance))){var e=performance.getEntriesByName(r.url,"resource");if(!(!e.length||!("toJSON"in e[0]))){var t=e.map(function(n){return n.toJSON()}).filter(pc).filter(function(n){return H_(n,r.startClocks.relative,Wp({startTime:r.startClocks.relative,duration:r.duration}))});if(t.length===1)return t[0]}}}function Wp(r){return lr(r.startTime,r.duration)}function H_(r,e,t){var n=1;return r.startTime>=e-n&&Wp(r)<=lr(t,n)}function Qp(r,e,t,n){r.subscribe(6,function(i){r.notify(10,G_(i,e,t,n))}),r.subscribe(0,function(i){for(var o=0,s=i;o<s.length;o++){var a=s[o];a.entryType===j.RESOURCE&&!Jf(a)&&r.notify(10,q_(a,e,t,n))}})}function G_(r,e,t,n){var i,o=r.type==="xhr"?"xhr":"fetch",s=qp(r),a=s?Kn(s.startTime):r.startClocks,c=s?Xp(s):void 0,u=W_(r,e),l=Jp(t,a),d=X_(n,a,r.duration),f=eh(n,a,(i=s?.duration)!==null&&i!==void 0?i:r.duration),p=le({date:a.timeStamp,resource:{id:ue(),type:o,duration:d,method:r.method,status_code:r.status,url:r.url},type:"resource"},u,c,l,f);return{startTime:a.relative,rawRumEvent:p,domainContext:{performanceEntry:s&&s,xhr:r.xhr,response:r.response,requestInput:r.input,requestInit:r.init,error:r.error}}}function q_(r,e,t,n){var i=Zf(r),o=Xp(r),s=Kn(r.startTime),a=Q_(r,e),c=Jp(t,s),u=eh(n,s,r.duration),l=le({date:s.timeStamp,resource:{id:ue(),type:i,url:r.name},type:"resource"},a,o,c,u);return{startTime:s.relative,rawRumEvent:l,domainContext:{performanceEntry:r}}}function Xp(r){return{resource:I({duration:ep(r),size:np(r)},tp(r))}}function W_(r,e){var t=r.traceSampled&&r.traceId&&r.spanId;if(t)return{_dd:{span_id:r.spanId.toDecimalString(),trace_id:r.traceId.toDecimalString(),rule_psr:Zp(e)}}}function Q_(r,e){var t=r.traceId;if(t)return{_dd:{trace_id:r.traceId,rule_psr:Zp(e)}}}function Zp(r){return Ct(r.traceSampleRate)?r.traceSampleRate/100:void 0}function Jp(r,e){var t=r.findTrackedSession(e.relative);return{_dd:{discarded:!t||!t.resourceAllowed}}}function eh(r,e,t){if(me(ne.RESOURCE_PAGE_STATES))return{_dd:{page_states:r.findAll(e.relative,t),page_was_discarded:String(document.wasDiscarded)}}}function X_(r,e,t){var n;if(!me(ne.NO_RESOURCE_DURATION_FROZEN_STATE))return J(t);var i=(n=r.findAll(e.relative,t))===null||n===void 0?void 0:n.some(function(o){return o.state==="frozen"});return i?void 0:J(t)}function th(r,e){for(var t=[],n=0;n<r.length;n++){var i=r[n],o=r[n+1];if(i.state==="active"){var s=i.start>=0?i.start:0,a=o?o.start:J(e);t.push({start:s,duration:a-s})}}return t}function rh(r,e,t){var n=is({lifeCycle:r,isChildEvent:function(s){return s.view.id===e},onChange:t}),i=n.stop,o=n.eventCounts;return{stop:i,eventCounts:o}}var Z_=10*oe;function nh(r,e,t){var n=r.subscribe(0,function(i){var o=mt(i,function(s){return s.entryType===j.PAINT&&s.name==="first-contentful-paint"&&s.startTime<e.timeStamp&&s.startTime<Z_});o&&t(o.startTime)}).unsubscribe;return{stop:n}}function ih(r,e,t,n){var i=r.subscribe(0,function(o){var s=mt(o,function(u){return u.entryType===j.FIRST_INPUT&&u.startTime<t.timeStamp});if(s){var a=pe(s.startTime,s.processingStart),c=void 0;me(ne.WEB_VITALS_ATTRIBUTION)&&s.target&&Vt(s.target)&&(c=zt(s.target,e.actionNameAttribute)),n({delay:a>=0?a:0,time:s.startTime,targetSelector:c})}}).unsubscribe;return{stop:i}}function oh(r,e){var t=r.subscribe(0,function(n){for(var i=0,o=n;i<o.length;i++){var s=o[i];s.entryType===j.NAVIGATION&&e({domComplete:s.domComplete,domContentLoaded:s.domContentLoadedEventEnd,domInteractive:s.domInteractive,loadEvent:s.loadEventEnd,firstByte:s.responseStart>=0&&s.responseStart<=Ae()?s.responseStart:void 0})}}).unsubscribe;return{stop:t}}var J_=10*oe;function sh(r,e,t,n,i){var o=1/0,s=se(e,n,["pointerdown","keydown"],function(c){o=c.timeStamp},{capture:!0,once:!0}).stop,a=r.subscribe(0,function(c){var u=ef(c,function(d){return d.entryType===j.LARGEST_CONTENTFUL_PAINT&&d.startTime<o&&d.startTime<t.timeStamp&&d.startTime<J_});if(u){var l=void 0;me(ne.WEB_VITALS_ATTRIBUTION)&&u.element&&(l=zt(u.element,e.actionNameAttribute)),i({value:u.startTime,targetSelector:l})}}).unsubscribe;return{stop:function(){s(),a()}}}function ah(r,e){e===void 0&&(e=window);var t,n;return document.visibilityState==="hidden"?t=0:(t=1/0,n=se(r,e,["pagehide","visibilitychange"],function(i){(i.type==="pagehide"||document.visibilityState==="hidden")&&(t=i.timeStamp,n())},{capture:!0}).stop),{get timeStamp(){return t},stop:function(){n?.()}}}function ch(r,e,t,n){var i={},o=oh(r,function(d){t(d.loadEvent),i.navigationTimings=d,n()}).stop,s=ah(e),a=nh(r,s,function(d){i.firstContentfulPaint=d,n()}).stop,c=sh(r,e,s,window,function(d){i.largestContentfulPaint=d,n()}).stop,u=ih(r,e,s,function(d){i.firstInput=d,n()}).stop;function l(){o(),a(),c(),u(),s.stop()}return{stop:l,initialViewMetrics:i}}function uh(r,e,t){if(!tb())return{stop:B};var n=0;t({value:0});var i=eb(),o=e.subscribe(0,function(s){for(var a=0,c=s;a<c.length;a++){var u=c[a];if(u.entryType===j.LAYOUT_SHIFT&&!u.hadRecentInput&&(i.update(u),i.value()>n)){n=i.value();var l=xr(n,4),d=i.largestLayoutShiftTarget(),f=void 0;me(ne.WEB_VITALS_ATTRIBUTION)&&d&&(f=zt(d,r.actionNameAttribute)),t({value:l,targetSelector:f})}}}).unsubscribe;return{stop:o}}function eb(){var r=0,e,t,n=0,i,o;return{update:function(s){var a,c,u=e===void 0||s.startTime-t>=ie||s.startTime-e>=5*ie;u?(e=t=s.startTime,r=s.value,n=0,i=void 0):(r+=s.value,t=s.startTime),s.value>n&&(n=s.value,o=s.startTime,!((a=s.sources)===null||a===void 0)&&a.length?i=(c=mt(s.sources,function(l){return!!l.node&&Vt(l.node)}))===null||c===void 0?void 0:c.node:i=void 0)},value:function(){return r},largestLayoutShiftTarget:function(){return i},largestLayoutShiftTime:function(){return o}}}function tb(){return Lr(j.LAYOUT_SHIFT)}var as,lh=0,_c=1/0,bc=0;function dh(){"interactionCount"in performance||as||(as=new window.PerformanceObserver(_(function(r){r.getEntries().forEach(function(e){var t=e;t.interactionId&&(_c=Math.min(_c,t.interactionId),bc=Math.max(bc,t.interactionId),lh=(bc-_c)/7+1)})})),as.observe({type:"event",buffered:!0,durationThreshold:0}))}var Tc=function(){return as?lh:window.performance.interactionCount||0};var fh=10;function ph(r,e,t,n){if(!ib()||!me(ne.INTERACTION_TO_NEXT_PAINT))return{getInteractionToNextPaint:function(){},stop:B};var i=nb(t).getViewInteractionCount,o=rb(i),s=-1,a,c=!1,u=n.subscribe(0,function(l){for(var d,f=0,p=l;f<p.length;f++){var h=p[f];(h.entryType===j.EVENT||h.entryType===j.FIRST_INPUT)&&h.interactionId&&o.process(h)}var m=o.estimateP98Interaction();m&&(s=m.duration,s>10*oe&&!c&&(c=!0,Ce("INP outlier",{inp:s,interaction:{timeFromViewStart:pe(e.relative,m.startTime),duration:m.duration,startTime:m.startTime,processingStart:m.processingStart,processingEnd:m.processingEnd,interactionId:m.interactionId,name:m.name,targetNodeName:(d=m.target)===null||d===void 0?void 0:d.nodeName}})),me(ne.WEB_VITALS_ATTRIBUTION)&&m.target&&Vt(m.target)?a=zt(m.target,r.actionNameAttribute):a=void 0)}).unsubscribe;return{getInteractionToNextPaint:function(){if(s>=0)return{value:s,targetSelector:a};if(i())return{value:0}},stop:u}}function rb(r){var e=[];function t(){e.sort(function(n,i){return i.duration-n.duration}).splice(fh)}return{process:function(n){var i=e.findIndex(function(s){return n.interactionId===s.interactionId}),o=e[e.length-1];i!==-1?n.duration>e[i].duration&&(e[i]=n,t()):(e.length<fh||n.duration>o.duration)&&(e.push(n),t())},estimateP98Interaction:function(){var n=Math.min(e.length-1,Math.floor(r()/50));return e[n]}}}function nb(r){dh();var e=r==="initial_load"?0:Tc();return{getViewInteractionCount:function(){return Tc()-e}}}function ib(){return Lr(j.EVENT)&&window.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype}function hh(r,e,t,n,i,o){var s=n==="initial_load",a=!0,c=[];function u(){!a&&!s&&c.length>0&&o(Math.max.apply(Math,c))}var l=bi(r,e,t,function(d){a&&(a=!1,d.hadActivity&&c.push(pe(i.timeStamp,d.end)),u())}).stop;return{stop:l,setLoadEvent:function(d){s&&(s=!1,c.push(d),u())}}}function Ai(){var r,e=window.visualViewport;return e?r=e.pageLeft-e.offsetLeft:window.scrollX!==void 0?r=window.scrollX:r=window.pageXOffset||0,Math.round(r)}function Pr(){var r,e=window.visualViewport;return e?r=e.pageTop-e.offsetTop:window.scrollY!==void 0?r=window.scrollY:r=window.pageYOffset||0,Math.round(r)}var Ac;function Ci(r){return Ac||(Ac=ob(r)),Ac}function ob(r){var e=new F(function(){var t=ke(function(){e.notify(mr())},200).throttled;return G(r,window,"resize",t,{capture:!0,passive:!0}).stop});return e}function mr(){var r=window.visualViewport;return r?{width:Number(r.width*r.scale),height:Number(r.height*r.scale)}:{width:Number(window.innerWidth||0),height:Number(window.innerHeight||0)}}var sb=ie;function mh(r,e,t,n){n===void 0&&(n=cb(r));var i=0,o=0,s=0,a=n.subscribe(function(c){var u=c.scrollDepth,l=c.scrollTop,d=c.scrollHeight,f=!1;if(u>i&&(i=u,f=!0),d>o){o=d;var p=Ae();s=pe(e.relative,p),f=!0}f&&t({maxDepth:Math.min(i,o),maxDepthScrollTop:l,maxScrollHeight:o,maxScrollHeightTime:s})});return{stop:function(){return a.unsubscribe()}}}function ab(){var r=Pr(),e=mr().height,t=Math.round((document.scrollingElement||document.documentElement).scrollHeight),n=Math.round(e+r);return{scrollHeight:t,scrollDepth:n,scrollTop:r}}function cb(r,e){e===void 0&&(e=sb);var t=new F(function(){function n(){t.notify(ab())}if(window.ResizeObserver){var i=ke(n,e,{leading:!1,trailing:!0}),o=document.scrollingElement||document.documentElement,s=new ResizeObserver(_(i.throttled));s.observe(o);var a=G(r,window,"scroll",i.throttled,{passive:!0});return function(){i.cancel(),s.unobserve(o),a.stop()}}});return t}function gh(r,e,t,n,i,o){var s={},a=hh(r,e,t,i,o,function(m){s.loadingTime=m,n()}),c=a.stop,u=a.setLoadEvent,l=mh(t,o,function(m){s.scroll=m}).stop,d=uh(t,r,function(m){s.cumulativeLayoutShift=m,n()}).stop,f=ph(t,o,i,r),p=f.stop,h=f.getInteractionToNextPaint;return{stop:function(){c(),d(),l(),p()},setLoadEvent:u,getCommonViewMetrics:function(){return s.interactionToNextPaint=h(),s}}}var ub=3e3,lb=5*oe,db=5*oe;function yh(r,e,t,n,i,o,s){var a=new Set,c=l("initial_load",Io(),s);d();var u;o&&(u=f(i));function l(p,h,m){var g=fb(e,t,n,r,p,h,m);return a.add(g),g.stopObservable.subscribe(function(){a.delete(g)}),g}function d(){e.subscribe(8,function(){c=l("route_change",void 0,{name:c.name,service:c.service,version:c.version})}),e.subscribe(7,function(){c.end({sessionIsActive:!1})}),e.subscribe(9,function(p){(p.reason===Jt.UNLOADING||p.reason===Jt.PAGEHIDE)&&c.end()})}function f(p){return p.subscribe(function(h){var m=h.oldLocation,g=h.newLocation;hb(m,g)&&(c.end(),c=l("route_change"))})}return{addTiming:function(p,h){h===void 0&&(h=$()),c.addTiming(p,h)},startView:function(p,h){c.end({endClocks:h}),c=l("route_change",h,p)},stop:function(){u?.unsubscribe(),c.end(),a.forEach(function(p){return p.stop()})}}}function fb(r,e,t,n,i,o,s){o===void 0&&(o=ce());var a=ue(),c=new F,u={},l=0,d,f=Wt(n),p=!0,h,m,g;s&&(h=s.name,m=s.service,g=s.version),r.notify(2,{id:a,name:h,startClocks:o,service:m,version:g});var E=ke(_t,ub,{leading:!1}),x=E.throttled,k=E.cancel,A=gh(r,e,t,x,i,o),S=A.setLoadEvent,C=A.stop,V=A.getCommonViewMetrics,z=i==="initial_load"?ch(r,t,S,x):{stop:B,initialViewMetrics:{}},T=z.stop,O=z.initialViewMetrics,ye=rh(r,a,x),Pe=ye.stop,St=ye.eventCounts,te=Pt(_t,lb);_t();function _t(){k(),l+=1;var R=d===void 0?$():d.timeStamp;r.notify(3,{customTimings:u,documentVersion:l,id:a,name:h,service:m,version:g,loadingType:i,location:f,startClocks:o,commonViewMetrics:V(),initialViewMetrics:O,duration:pe(o.timeStamp,R),isActive:d===void 0,sessionIsActive:p,eventCounts:St})}return{name:h,service:m,version:g,stopObservable:c,end:function(R){var M=this,D,K;R===void 0&&(R={}),!d&&(d=(D=R.endClocks)!==null&&D!==void 0?D:ce(),p=(K=R.sessionIsActive)!==null&&K!==void 0?K:!0,r.notify(4,{endClocks:d}),fr(te),C(),_t(),re(function(){M.stop()},db))},stop:function(){T(),Pe(),c.notify()},addTiming:function(R,M){if(!d){var D=Zd(M)?M:pe(o.timeStamp,M);u[pb(R)]=D,x()}}}}function pb(r){var e=r.replace(/[^a-zA-Z0-9-_.@$]/g,"_");return e!==r&&L.warn("Invalid timing name: ".concat(r,", sanitized to: ").concat(e)),e}function hb(r,e){return r.pathname!==e.pathname||!mb(e.hash)&&vh(e.hash)!==vh(r.hash)}function mb(r){var e=r.substr(1);return!!document.getElementById(e)}function vh(r){var e=r.indexOf("?");return e<0?r:r.slice(0,e)}function Eh(r,e,t,n,i,o,s,a,c){return r.subscribe(3,function(u){return r.notify(10,gb(u,e,o,a,s))}),yh(t,r,n,e,i,!e.trackViewsManually,c)}function gb(r,e,t,n,i){var o,s,a,c,u,l,d,f,p,h,m,g,E,x,k=n.getReplayStats(r.id),A=t.findFeatureFlagEvaluations(r.startClocks.relative),S=me(ne.PAGE_STATES),C=i.findAll(r.startClocks.relative,r.duration),V={_dd:{document_version:r.documentVersion,replay_stats:k,page_states:S?C:void 0},date:r.startClocks.timeStamp,type:"view",view:{action:{count:r.eventCounts.actionCount},frustration:{count:r.eventCounts.frustrationCount},cumulative_layout_shift:(o=r.commonViewMetrics.cumulativeLayoutShift)===null||o===void 0?void 0:o.value,cumulative_layout_shift_target_selector:(s=r.commonViewMetrics.cumulativeLayoutShift)===null||s===void 0?void 0:s.targetSelector,first_byte:J((a=r.initialViewMetrics.navigationTimings)===null||a===void 0?void 0:a.firstByte),dom_complete:J((c=r.initialViewMetrics.navigationTimings)===null||c===void 0?void 0:c.domComplete),dom_content_loaded:J((u=r.initialViewMetrics.navigationTimings)===null||u===void 0?void 0:u.domContentLoaded),dom_interactive:J((l=r.initialViewMetrics.navigationTimings)===null||l===void 0?void 0:l.domInteractive),error:{count:r.eventCounts.errorCount},first_contentful_paint:J(r.initialViewMetrics.firstContentfulPaint),first_input_delay:J((d=r.initialViewMetrics.firstInput)===null||d===void 0?void 0:d.delay),first_input_time:J((f=r.initialViewMetrics.firstInput)===null||f===void 0?void 0:f.time),first_input_target_selector:(p=r.initialViewMetrics.firstInput)===null||p===void 0?void 0:p.targetSelector,interaction_to_next_paint:J((h=r.commonViewMetrics.interactionToNextPaint)===null||h===void 0?void 0:h.value),interaction_to_next_paint_target_selector:(m=r.commonViewMetrics.interactionToNextPaint)===null||m===void 0?void 0:m.targetSelector,is_active:r.isActive,name:r.name,largest_contentful_paint:J((g=r.initialViewMetrics.largestContentfulPaint)===null||g===void 0?void 0:g.value),largest_contentful_paint_target_selector:(E=r.initialViewMetrics.largestContentfulPaint)===null||E===void 0?void 0:E.targetSelector,load_event:J((x=r.initialViewMetrics.navigationTimings)===null||x===void 0?void 0:x.loadEvent),loading_time:vb(J(r.commonViewMetrics.loadingTime)),loading_type:r.loadingType,long_task:{count:r.eventCounts.longTaskCount},resource:{count:r.eventCounts.resourceCount},time_spent:J(r.duration),in_foreground_periods:!S&&C?th(C,r.duration):void 0},feature_flags:A&&!Be(A)?A:void 0,display:r.commonViewMetrics.scroll?{scroll:{max_depth:r.commonViewMetrics.scroll.maxDepth,max_depth_scroll_top:r.commonViewMetrics.scroll.maxDepthScrollTop,max_scroll_height:r.commonViewMetrics.scroll.maxScrollHeight,max_scroll_height_time:J(r.commonViewMetrics.scroll.maxScrollHeightTime)}}:void 0,session:{has_replay:k?!0:void 0,is_active:r.sessionIsActive?void 0:!1},privacy:{replay_level:e.defaultPrivacyLevel}};return Be(r.customTimings)||(V.view.custom_timings=of(r.customTimings,J)),{rawRumEvent:V,startTime:r.startClocks.relative,domainContext:{location:r.location}}}function vb(r){return Ct(r)&&r<0?void 0:r}var yb="rum";function Sh(r,e){var t=ni(r,yb,function(n){return Eb(r,n)});return t.expireObservable.subscribe(function(){e.notify(7)}),t.renewObservable.subscribe(function(){e.notify(8)}),{findTrackedSession:function(n){var i=t.findActiveSession(n);if(!(!i||!bh(i.trackingType))){var o=i.trackingType==="1"?2:1;return{id:i.id,plan:o,sessionReplayAllowed:o===2,longTaskAllowed:r.trackLongTasks!==void 0?r.trackLongTasks:r.oldPlansBehavior&&o===2,resourceAllowed:r.trackResources!==void 0?r.trackResources:r.oldPlansBehavior&&o===2}}},expire:t.expire,expireObservable:t.expireObservable}}function _h(){var r={id:"00000000-aaaa-0000-aaaa-000000000000",plan:1,sessionReplayAllowed:!1,longTaskAllowed:!0,resourceAllowed:!0};return{findTrackedSession:function(){return r},expire:B,expireObservable:new F}}function Eb(r,e){var t;return Sb(e)?t=e:ht(r.sessionSampleRate)?ht(r.sessionReplaySampleRate)?t="1":t="2":t="0",{trackingType:t,isTracked:bh(t)}}function Sb(r){return r==="0"||r==="1"||r==="2"}function bh(r){return r==="2"||r==="1"}function Th(r,e,t,n,i,o){var s=r.replica,a=hr(r,{endpoint:r.rumEndpointBuilder},s&&{endpoint:s.rumEndpointBuilder,transformMessage:function(c){return le(c,{application:{id:s.applicationId}})}},n,i,o);return e.subscribe(11,function(c){c.type==="view"?a.upsert(c,c.view.id):a.add(c)}),t.subscribe(function(c){return a.add(c,un(r))}),a}function Ah(r){var e=wt();r.subscribe(11,function(t){e.send("rum",t)})}var _b=ot;function Ch(r,e,t){var n=new at(_b),i;r.subscribe(4,function(a){var c=a.endClocks;n.closeActive(c.relative)}),r.subscribe(2,function(a){var c=a.startClocks,u=t.href;n.add(s({url:u,referrer:i||document.referrer}),c.relative),i=u});var o=e.subscribe(function(a){var c=a.newLocation,u=n.find();if(u){var l=Ae();n.closeActive(l),n.add(s({url:c.href,referrer:u.referrer}),l)}});function s(a){var c=a.url,u=a.referrer;return{url:c,referrer:u}}return{findUrl:function(a){return n.find(a)},stop:function(){o.unsubscribe(),n.stop()}}}function wh(r,e){var t=Wt(e),n=new F(function(){var o=bb(r,i).stop,s=Tb(r,i).stop;return function(){o(),s()}});function i(){if(t.href!==e.href){var o=Wt(e);n.notify({newLocation:o,oldLocation:t}),t=o}}return n}function bb(r,e){var t=Re(history,"pushState",{after:e}).stop,n=Re(history,"replaceState",{after:e}).stop,i=G(r,window,"popstate",e).stop;return{stop:function(){t(),n(),i()}}}function Tb(r,e){return G(r,window,"hashchange",e)}var Ab=ot,Cb=200;function xh(r,e){if(e===void 0&&(e=qt),!me(ne.FEATURE_FLAGS))return{findFeatureFlagEvaluations:function(){},getFeatureFlagBytesCount:function(){return 0},addFeatureFlagEvaluation:B,stop:B};var t=new at(Ab),n=0,i=!1;r.subscribe(4,function(c){var u=c.endClocks;t.closeActive(u.relative)}),r.subscribe(2,function(c){var u=c.startClocks;t.add({},u.relative),n=0});var o=ke(function(c){n=e(qe(c)),i||(i=di(n,0))},Cb),s=o.throttled,a=o.cancel;return{findFeatureFlagEvaluations:function(c){return t.find(c)},getFeatureFlagBytesCount:function(){var c=t.find();return c?n:0},addFeatureFlagEvaluation:function(c,u){var l=t.find();l&&(l[c]=u,s(l))},stop:a}}var wb=10*ie,tr,Ur,wc;function Ih(r,e,t,n,i,o,s){var a=e.enabled&&ht(r.customerDataTelemetrySampleRate);a&&(Oh(),Rh(),t.subscribe(11,function(c){wc=!0,wi(Ur.globalContextBytes,Be(n.get())?0:n.getBytesCount()),wi(Ur.userContextBytes,Be(i.get())?0:i.getBytesCount());var u=o.findFeatureFlagEvaluations(),l=_e(["view","error"],c.type)&&u&&!Be(u);wi(Ur.featureFlagBytes,l?o.getFeatureFlagBytesCount():0)}),s.subscribe(function(c){var u=c.bytesCount,l=c.messagesCount;wc&&(tr.batchCount+=1,wi(tr.batchBytesCount,u),wi(tr.batchMessagesCount,l),Cc(tr.globalContextBytes,Ur.globalContextBytes),Cc(tr.userContextBytes,Ur.userContextBytes),Cc(tr.featureFlagBytes,Ur.featureFlagBytes),Rh())}),Pt(xb,wb))}function xb(){tr.batchCount!==0&&(Ce("Customer data measures",tr),Oh())}function gr(){return{min:1/0,max:0,sum:0}}function wi(r,e){r.sum+=e,r.min=Math.min(r.min,e),r.max=Math.max(r.max,e)}function Cc(r,e){r.sum+=e.sum,r.min=Math.min(r.min,e.min),r.max=Math.max(r.max,e.max)}function Oh(){tr={batchCount:0,batchBytesCount:gr(),batchMessagesCount:gr(),globalContextBytes:gr(),userContextBytes:gr(),featureFlagBytes:gr()}}function Rh(){wc=!1,Ur={globalContextBytes:gr(),userContextBytes:gr(),featureFlagBytes:gr()}}var Rb=4e3,Ib=500,Ob=ot;function Nh(r,e){e===void 0&&(e=Ib);var t=new at(Ob,Rb),n;o(Mh(),Ae());var i=se(r,window,["pageshow","focus","blur","visibilitychange","resume","freeze","pagehide"],function(s){s.isTrusted&&o(Nb(s),s.timeStamp)},{capture:!0}).stop;function o(s,a){a===void 0&&(a=Ae()),s!==n&&(n=s,t.closeActive(a),t.add({state:n,startTime:a},a))}return{findAll:function(s,a){var c=t.findAll(s,a);if(c.length!==0){for(var u=[],l=Math.max(0,c.length-e),d=c.length-1;d>=l;d--){var f=c[d],p=pe(s,f.startTime);u.push({state:f.state,start:J(p)})}return u}},isInActivePageStateAt:function(s){var a=t.find(s);return a!==void 0&&a.state==="active"},addPageState:o,stop:function(){i(),t.stop()}}}function Nb(r){return r.type==="freeze"?"frozen":r.type==="pagehide"?r.persisted?"frozen":"terminated":Mh()}function Mh(){return document.visibilityState==="hidden"?"hidden":document.hasFocus()?"active":"passive"}function kh(r){var e=mr(),t=Ci(r).subscribe(function(n){e=n}).unsubscribe;return{get:function(){return{viewport:e}},stop:t}}function xc(r,e,t,n,i,o){var s=[],a=new hc;a.subscribe(11,function(te){return Xt("rum",te)});var c=Mb(e);c.setContextProvider(function(){var te,_t;return{application:{id:e.applicationId},session:{id:(te=p.findTrackedSession())===null||te===void 0?void 0:te.id},view:{id:(_t=x.findView())===null||_t===void 0?void 0:_t.id},action:{id:S.findActionId()}}});var u=function(te){a.notify(12,{error:te}),Ce("Error reported to customer",{"error.message":te.message})},l=xh(a),d=ii(e),f=d.subscribe(function(te){a.notify(9,te)});s.push(function(){return f.unsubscribe()});var p=De()?_h():Sh(e,a);if(De())Ah(a);else{var h=Th(e,a,c.observable,u,d,p.expireObservable);s.push(function(){return h.stop()}),Ih(e,c,a,n,i,l,h.flushObservable)}var m=Xf(),g=wh(e,location),E=kb(a,e,location,p,g,m,function(){return vi(n,i,t)},u),x=E.viewContexts,k=E.pageStateHistory,A=E.urlContexts,S=E.actionContexts,C=E.addAction,V=E.stop;s.push(V),ln(Wf(r)),Gp(a,p),Qp(a,e,p,k);var z=Eh(a,e,location,m,g,l,k,t,o),T=z.addTiming,O=z.startView,ye=z.stop;s.push(ye);var Pe=Hp(a,e,k,l).addError;bp(a,e,p),lp(a,e);var St=Ep(e.applicationId,p,x,S,A);return{addAction:C,addError:Pe,addTiming:T,addFeatureFlagEvaluation:l.addFeatureFlagEvaluation,startView:O,lifeCycle:a,viewContexts:x,session:p,stopSession:function(){return p.expire()},getInternalContext:St.get,stop:function(){s.forEach(function(te){return te()})}}}function Mb(r){var e=cn("browser-rum-sdk",r);if(De()){var t=wt();e.observable.subscribe(function(n){return t.send("internal_telemetry",n)})}return e}function kb(r,e,t,n,i,o,s,a){var c=Sp(r),u=Ch(r,i,t),l=Nh(e),d=$p(r,o,e,l),f=d.addAction,p=d.actionContexts,h=kh(e);return yp(e,r,n,c,u,p,h,s,a),{viewContexts:c,pageStateHistory:l,urlContexts:u,addAction:f,actionContexts:p,stop:function(){h.stop(),l.stop(),u.stop(),c.stop(),l.stop()}}}function Rc(r,e){var t=e.session,n=e.viewContext,i=e.errorType,o=t?t.id:"no-session-id",s=[];i!==void 0&&s.push("error-type=".concat(i)),n&&(s.push("seed=".concat(n.id)),s.push("from=".concat(n.startClocks.timeStamp)));var a=Db(r),c="/rum/replay/sessions/".concat(o);return"".concat(a).concat(c,"?").concat(s.join("&"))}function Db(r){var e=r.site,t=r.subdomain||Lb(r);return"https://".concat(t?"".concat(t,"."):"").concat(e)}function Lb(r){switch(r.site){case Ft:case Ka:return"app";case Wn:return"dd";default:return}}var je={FullSnapshot:2,IncrementalSnapshot:3,Meta:4,Focus:6,ViewEnd:7,VisualViewport:8,FrustrationRecord:9},vr={Document:0,DocumentType:1,Element:2,Text:3,CDATA:4,DocumentFragment:11},yt={Mutation:0,MouseMove:1,MouseInteraction:2,Scroll:3,ViewportResize:4,Input:5,TouchMove:6,MediaInteraction:7,StyleSheetRule:8},Et={MouseUp:0,MouseDown:1,Click:2,ContextMenu:3,DblClick:4,Focus:5,Blur:6,TouchStart:7,TouchEnd:9},Ic={Play:0,Pause:1};function jt(r,e){return{data:I({source:r},e),type:je.IncrementalSnapshot,timestamp:$()}}var U={IGNORE:"ignore",HIDDEN:"hidden",ALLOW:Qt.ALLOW,MASK:Qt.MASK,MASK_USER_INPUT:Qt.MASK_USER_INPUT},yn="data-dd-privacy",Dh="allow",Lh="mask",Ph="mask-user-input",cs="hidden",Uh="dd-privacy-allow",Fh="dd-privacy-mask",Bh="dd-privacy-mask-user-input",Vh="dd-privacy-hidden",$t="***",zh="data:image/gif;base64,R0lGODlhAQABAIAAAMLCwgAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==",jh={INPUT:!0,OUTPUT:!0,TEXTAREA:!0,SELECT:!0,OPTION:!0,DATALIST:!0,OPTGROUP:!0};var Kh=1e5,Pb="x";function Qe(r,e){var t=Dr(r),n=t?Qe(t,e):e,i=Nc(r);return Oc(i,n)}function Oc(r,e){switch(e){case U.HIDDEN:case U.IGNORE:return e}switch(r){case U.ALLOW:case U.MASK:case U.MASK_USER_INPUT:case U.HIDDEN:case U.IGNORE:return r;default:return e}}function Nc(r){if(Vt(r)){var e=r.getAttribute(yn);if(r.tagName==="BASE")return U.ALLOW;if(r.tagName==="INPUT"){var t=r;if(t.type==="password"||t.type==="email"||t.type==="tel")return U.MASK;if(t.type==="hidden")return U.MASK;var n=t.getAttribute("autocomplete");if(n&&n.indexOf("cc-")===0)return U.MASK}if(e===cs||r.classList.contains(Vh))return U.HIDDEN;if(e===Lh||r.classList.contains(Fh))return U.MASK;if(e===Ph||r.classList.contains(Bh))return U.MASK_USER_INPUT;if(e===Dh||r.classList.contains(Uh))return U.ALLOW;if(Fb(r))return U.IGNORE}}function Fr(r,e){switch(e){case U.MASK:case U.HIDDEN:case U.IGNORE:return!0;case U.MASK_USER_INPUT:return ts(r)?$h(r.parentNode):$h(r);default:return!1}}function $h(r){if(!r||r.nodeType!==r.ELEMENT_NODE)return!1;var e=r;if(e.tagName==="INPUT")switch(e.type){case"button":case"color":case"reset":case"submit":return!1}return!!jh[e.tagName]}var Ub=function(r){return r.replace(/\S/g,Pb)};function us(r,e,t){var n,i=(n=r.parentElement)===null||n===void 0?void 0:n.tagName,o=r.textContent||"";if(!(e&&!o.trim())){var s=t,a=i==="SCRIPT";if(a)o=$t;else if(s===U.HIDDEN)o=$t;else if(Fr(r,s))if(i==="DATALIST"||i==="SELECT"||i==="OPTGROUP"){if(!o.trim())return}else i==="OPTION"?o=$t:o=Ub(o);return o}}function Fb(r){if(r.nodeName==="SCRIPT")return!0;if(r.nodeName==="LINK"){var e=i("rel");return/preload|prefetch/i.test(e)&&i("as")==="script"||e==="shortcut icon"||e==="icon"}if(r.nodeName==="META"){var t=i("name"),e=i("rel"),n=i("property");return/^msapplication-tile(image|color)$/.test(t)||t==="application-name"||e==="icon"||e==="apple-touch-icon"||e==="shortcut icon"||t==="keywords"||t==="description"||/^(og|twitter|fb):/.test(n)||/^(og|twitter):/.test(t)||t==="pinterest"||t==="robots"||t==="googlebot"||t==="bingbot"||r.hasAttribute("http-equiv")||t==="author"||t==="generator"||t==="framework"||t==="publisher"||t==="progid"||/^article:/.test(n)||/^product:/.test(n)||t==="google-site-verification"||t==="yandex-verification"||t==="csrf-token"||t==="p:domain_verify"||t==="verify-v1"||t==="verification"||t==="shopify-checkout-api-token"}function i(o){return(r.getAttribute(o)||"").toLowerCase()}return!1}var Mc=new WeakMap;function Le(r){return Mc.has(r)}function kc(r){for(var e=r;e;){if(!Le(e)&&!Ei(e))return!1;e=Dr(e)}return!0}function ve(r){return Mc.get(r)}function Yh(r,e){Mc.set(r,e)}function Br(r,e){var t=r.tagName,n=r.value;if(Fr(r,e)){var i=r.type;return t==="INPUT"&&(i==="button"||i==="submit"||i==="reset")?n:!n||t==="OPTION"?void 0:$t}if(t==="OPTION"||t==="SELECT")return r.value;if(!(t!=="INPUT"&&t!=="TEXTAREA"))return n}var Bb=/url\((?:(')([^']*)'|(")([^"]*)"|([^)]*))\)/gm,Vb=/^[A-Za-z]+:|^\/\//,zb=/^data:.*,/i;function Hh(r,e){return r.replace(Bb,function(t,n,i,o,s,a){var c=i||s||a;if(!e||!c||Vb.test(c)||zb.test(c))return t;var u=n||o||"";return"url(".concat(u).concat(jb(c,e)).concat(u,")")})}function jb(r,e){try{return rn(r,e).href}catch{return r}}var $b=/[^a-z1-6-_]/;function ls(r){var e=r.toLowerCase().trim();return $b.test(e)?"div":e}function Dc(r){if(!(r===void 0||r.length===0))return r.map(function(e){var t=e.cssRules||e.rules,n=Array.from(t,function(o){return o.cssText}),i={cssRules:n,disabled:e.disabled||void 0,media:e.media.length>0?Array.from(e.media):void 0};return i})}function xi(r,e,t,n){if(e===U.HIDDEN)return null;var i=r.getAttribute(t);if(e===U.MASK&&t!==yn&&!ss.includes(t)&&t!==n.actionNameAttribute){var o=r.tagName;switch(t){case"title":case"alt":case"placeholder":return $t}if((o==="IMG"||o==="SOURCE")&&(t==="src"||t==="srcset"))return zh;if(o==="A"&&t==="href")return $t;if(i&&dr(t,"data-"))return $t}return!i||typeof i!="string"?i:i.length>Kh&&i.slice(0,5)==="data:"?"data:truncated":i}function Gh(r,e,t){var n;if(e===U.HIDDEN)return{};for(var i={},o=ls(r.tagName),s=r.ownerDocument,a=0;a<r.attributes.length;a+=1){var c=r.attributes.item(a),u=c.name,l=xi(r,e,u,t.configuration);l!==null&&(i[u]=l)}if(r.value&&(o==="textarea"||o==="select"||o==="option"||o==="input")){var d=Br(r,e);d!==void 0&&(i.value=d)}if(o==="option"&&e===U.ALLOW){var f=r;f.selected&&(i.selected=f.selected)}if(o==="link"){var p=Array.from(s.styleSheets).find(function(A){return A.href===r.href}),h=Lc(p);h&&p&&!me(ne.DISABLE_REPLAY_INLINE_CSS)&&(i._cssText=h)}if(o==="style"&&r.sheet){var h=Lc(r.sheet);h&&(i._cssText=h)}var m=r;if(o==="input"&&(m.type==="radio"||m.type==="checkbox")&&(e===U.ALLOW?i.checked=!!m.checked:Fr(m,e)&&delete i.checked),o==="audio"||o==="video"){var g=r;i.rr_mediaState=g.paused?"paused":"played"}var E,x,k=t.serializationContext;switch(k.status){case 0:E=Math.round(r.scrollTop),x=Math.round(r.scrollLeft),(E||x)&&k.elementsScrollPositions.set(r,{scrollTop:E,scrollLeft:x});break;case 1:k.elementsScrollPositions.has(r)&&(n=k.elementsScrollPositions.get(r),E=n.scrollTop,x=n.scrollLeft);break}return x&&(i.rr_scrollLeft=x),E&&(i.rr_scrollTop=E),i}function Lc(r){if(!r)return null;var e;try{e=r.rules||r.cssRules}catch{}if(!e)return null;var t=Array.from(e,lf()?Kb:qh).join("");return Hh(t,r.href)}function Kb(r){if(Hb(r)&&r.selectorText.includes(":")){var e=/(\[[\w-]+[^\\])(:[^\]]+\])/g;return r.cssText.replace(e,"$1\\$2")}return qh(r)}function qh(r){return Yb(r)&&Lc(r.styleSheet)||r.cssText}function Yb(r){return"styleSheet"in r}function Hb(r){return"selectorText"in r}function Vr(r,e){var t=Wb(r,e);if(!t)return null;var n=ve(r)||qb(),i=t;return i.id=n,Yh(r,n),e.serializedNodeIds&&e.serializedNodeIds.add(n),i}var Gb=1;function qb(){return Gb++}function Pc(r,e){var t=[];return rs(r,function(n){var i=Vr(n,e);i&&t.push(i)}),t}function Wb(r,e){switch(r.nodeType){case r.DOCUMENT_NODE:return Qb(r,e);case r.DOCUMENT_FRAGMENT_NODE:return Xb(r,e);case r.DOCUMENT_TYPE_NODE:return Zb(r);case r.ELEMENT_NODE:return Jb(r,e);case r.TEXT_NODE:return tT(r,e);case r.CDATA_SECTION_NODE:return rT()}}function Qb(r,e){return{type:vr.Document,childNodes:Pc(r,e),adoptedStyleSheets:Dc(r.adoptedStyleSheets)}}function Xb(r,e){var t=Ei(r);return t&&e.serializationContext.shadowRootsController.addShadowRoot(r),{type:vr.DocumentFragment,childNodes:Pc(r,e),isShadowRoot:t,adoptedStyleSheets:t?Dc(r.adoptedStyleSheets):void 0}}function Zb(r){return{type:vr.DocumentType,name:r.name,publicId:r.publicId,systemId:r.systemId}}function Jb(r,e){var t,n=ls(r.tagName),i=eT(r)||void 0,o=Oc(Nc(r),e.parentNodePrivacyLevel);if(o===U.HIDDEN){var s=r.getBoundingClientRect(),a=s.width,c=s.height;return{type:vr.Element,tagName:n,attributes:(t={rr_width:"".concat(a,"px"),rr_height:"".concat(c,"px")},t[yn]=cs,t),childNodes:[],isSVG:i}}if(o!==U.IGNORE){var u=Gh(r,o,e),l=[];if(op(r)&&n!=="style"){var d=void 0;e.parentNodePrivacyLevel===o&&e.ignoreWhiteSpace===(n==="head")?d=e:d=I({},e,{parentNodePrivacyLevel:o,ignoreWhiteSpace:n==="head"}),l=Pc(r,d)}return{type:vr.Element,tagName:n,attributes:u,childNodes:l,isSVG:i}}}function eT(r){return r.tagName==="svg"||r instanceof SVGElement}function tT(r,e){var t=us(r,e.ignoreWhiteSpace||!1,e.parentNodePrivacyLevel);if(t!==void 0)return{type:vr.Text,textContent:t}}function rT(){return{type:vr.CDATA,textContent:""}}function ds(r,e,t){return Vr(r,{serializationContext:t,parentNodePrivacyLevel:e.defaultPrivacyLevel,configuration:e})}function Uc(r){return!!r.changedTouches}function Kt(r){return r.composed===!0&&gn(r.target)?r.composedPath()[0]:r.target}var Wh=25;function nT(r){return Math.abs(r.pageTop-r.offsetTop-window.scrollY)>Wh||Math.abs(r.pageLeft-r.offsetLeft-window.scrollX)>Wh}var Qh=function(r,e){var t=window.visualViewport,n={layoutViewportX:r,layoutViewportY:e,visualViewportX:r,visualViewportY:e};if(t)nT(t)?(n.layoutViewportX=Math.round(r+t.offsetLeft),n.layoutViewportY=Math.round(e+t.offsetTop)):(n.visualViewportX=Math.round(r-t.offsetLeft),n.visualViewportY=Math.round(e-t.offsetTop));else return n;return n},fs=function(r){return{scale:r.scale,offsetLeft:r.offsetLeft,offsetTop:r.offsetTop,pageLeft:r.pageLeft,pageTop:r.pageTop,height:r.height,width:r.width}};var iT=50;function Xh(r,e){var t=ke(function(n){var i=Kt(n);if(Le(i)){var o=Fc(n);if(!o)return;var s={id:ve(i),timeOffset:0,x:o.x,y:o.y};e([s],Uc(n)?yt.TouchMove:yt.MouseMove)}},iT,{trailing:!1}).throttled;return se(r,document,["mousemove","touchmove"],t,{capture:!0,passive:!0}).stop}function Fc(r){var e=Uc(r)?r.changedTouches[0]:r,t=e.clientX,n=e.clientY;if(window.visualViewport){var i=Qh(t,n),o=i.visualViewportX,s=i.visualViewportY;t=o,n=s}if(!Number.isFinite(t)||!Number.isFinite(n)){r.isTrusted&&Ce("mouse/touch event without x/y");return}return{x:t,y:n}}var oT=100;function Zh(r,e,t,n){var i=ke(function(o){var s=Kt(o);if(!(!s||Qe(s,t)===U.HIDDEN||!Le(s))){var a=ve(s),c=s===document?{scrollTop:Pr(),scrollLeft:Ai()}:{scrollTop:Math.round(s.scrollTop),scrollLeft:Math.round(s.scrollLeft)};n.set(s,c),e({id:a,x:c.scrollLeft,y:c.scrollTop})}},oT).throttled;return G(r,document,"scroll",i,{capture:!0,passive:!0}).stop}var Rt,Jh=(Rt={},Rt.pointerup=Et.MouseUp,Rt.mousedown=Et.MouseDown,Rt.click=Et.Click,Rt.contextmenu=Et.ContextMenu,Rt.dblclick=Et.DblClick,Rt.focus=Et.Focus,Rt.blur=Et.Blur,Rt.touchstart=Et.TouchStart,Rt.touchend=Et.TouchEnd,Rt);function em(r,e,t){var n=function(i){var o=Kt(i);if(!(Qe(o,r.defaultPrivacyLevel)===U.HIDDEN||!Le(o))){var s=ve(o),a=Jh[i.type],c;if(a!==Et.Blur&&a!==Et.Focus){var u=Fc(i);if(!u)return;c={id:s,type:a,x:u.x,y:u.y}}else c={id:s,type:a};var l=I({id:t.getIdForEvent(i)},jt(yt.MouseInteraction,c));e(l)}};return se(r,document,Object.keys(Jh),n,{capture:!0,passive:!0}).stop}function Ri(r,e,t){t===void 0&&(t=document);var n=r.defaultPrivacyLevel,i=new WeakMap,o=t!==document,s=se(r,t,o?["change"]:["input","change"],function(d){var f=Kt(d);(f instanceof HTMLInputElement||f instanceof HTMLTextAreaElement||f instanceof HTMLSelectElement)&&u(f)},{capture:!0,passive:!0}).stop,a;if(o)a=B;else{var c=[Or(HTMLInputElement.prototype,"value",u),Or(HTMLInputElement.prototype,"checked",u),Or(HTMLSelectElement.prototype,"value",u),Or(HTMLTextAreaElement.prototype,"value",u),Or(HTMLSelectElement.prototype,"selectedIndex",u)];a=function(){c.forEach(function(d){return d.stop()})}}return function(){a(),s()};function u(d){var f=Qe(d,n);if(f!==U.HIDDEN){var p=d.type,h;if(p==="radio"||p==="checkbox"){if(Fr(d,f))return;h={isChecked:d.checked}}else{var m=Br(d,f);if(m===void 0)return;h={text:m}}l(d,h);var g=d.name;p==="radio"&&g&&d.checked&&tf(document.querySelectorAll('input[type="radio"][name="'.concat(Lt(g),'"]')),function(E){E!==d&&l(E,{isChecked:!1})})}}function l(d,f){if(Le(d)){var p=i.get(d);(!p||p.text!==f.text||p.isChecked!==f.isChecked)&&(i.set(d,f),e(I({id:ve(d)},f)))}}}function rm(r){function e(i,o){i&&Le(i.ownerNode)&&o(ve(i.ownerNode))}var t=[Re(CSSStyleSheet.prototype,"insertRule",{before:function(i,o){e(this,function(s){return r({id:s,adds:[{rule:i,index:o}]})})}}),Re(CSSStyleSheet.prototype,"deleteRule",{before:function(i){e(this,function(o){return r({id:o,removes:[{index:i}]})})}})];typeof CSSGroupingRule<"u"?n(CSSGroupingRule):(n(CSSMediaRule),n(CSSSupportsRule));function n(i){t.push(Re(i.prototype,"insertRule",{before:function(o,s){var a=this;e(this.parentStyleSheet,function(c){var u=tm(a);u&&(u.push(s||0),r({id:c,adds:[{rule:o,index:u}]}))})}}),Re(i.prototype,"deleteRule",{before:function(o){var s=this;e(this.parentStyleSheet,function(a){var c=tm(s);c&&(c.push(o),r({id:a,removes:[{index:c}]}))})}}))}return function(){return t.forEach(function(i){return i.stop()})}}function tm(r){for(var e=[],t=r;t.parentRule;){var n=Array.from(t.parentRule.cssRules),i=n.indexOf(t);e.unshift(i),t=t.parentRule}if(t.parentStyleSheet){var o=Array.from(t.parentStyleSheet.cssRules),s=o.indexOf(t);return e.unshift(s),e}}function nm(r,e,t){return se(r,document,["play","pause"],function(n){var i=Kt(n);!i||Qe(i,t)===U.HIDDEN||!Le(i)||e({id:ve(i),type:n.type==="play"?Ic.Play:Ic.Pause})},{capture:!0,passive:!0}).stop}function im(r,e,t){return r.subscribe(10,function(n){var i,o,s;n.rawRumEvent.type==="action"&&n.rawRumEvent.action.type==="click"&&(!((o=(i=n.rawRumEvent.action.frustration)===null||i===void 0?void 0:i.type)===null||o===void 0)&&o.length)&&"events"in n.domainContext&&(!((s=n.domainContext.events)===null||s===void 0)&&s.length)&&e({timestamp:n.rawRumEvent.date,type:je.FrustrationRecord,data:{frustrationTypes:n.rawRumEvent.action.frustration.type,recordIds:n.domainContext.events.map(function(a){return t.getIdForEvent(a)})}})}).unsubscribe}var sT=200;function om(r,e){return Ci(r).subscribe(e).unsubscribe}function sm(r,e){var t=window.visualViewport;if(!t)return B;var n=ke(function(){e(fs(t))},sT,{trailing:!1}),i=n.throttled,o=n.cancel,s=se(r,t,["resize","scroll"],i,{capture:!0,passive:!0}).stop;return function(){s(),o()}}var aT=100;function am(r){var e=B,t=[];function n(){e(),r(t),t=[]}return{addMutations:function(i){t.length===0&&(e=cT(n,{timeout:aT})),t.push.apply(t,i)},flush:n,stop:function(){e()}}}function cT(r,e){if(window.requestIdleCallback&&window.cancelIdleCallback){var t=window.requestIdleCallback(_(r),e);return function(){return window.cancelIdleCallback(t)}}var n=window.requestAnimationFrame(_(r));return function(){return window.cancelAnimationFrame(n)}}function Ii(r,e,t,n){var i=es();if(!i)return{stop:B,flush:B};var o=am(function(a){uT(a.concat(s.takeRecords()),r,e,t)}),s=new i(_(o.addMutations));return s.observe(n,{attributeOldValue:!0,attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),{stop:function(){s.disconnect(),o.stop()},flush:function(){o.flush()}}}function uT(r,e,t,n){r.filter(function(d){return d.type==="childList"}).forEach(function(d){d.removedNodes.forEach(function(f){cm(f,n.removeShadowRoot)})});var i=r.filter(function(d){return d.target.isConnected&&kc(d.target)&&Qe(d.target,t.defaultPrivacyLevel)!==U.HIDDEN}),o=lT(i.filter(function(d){return d.type==="childList"}),t,n),s=o.adds,a=o.removes,c=o.hasBeenSerialized,u=dT(i.filter(function(d){return d.type==="characterData"&&!c(d.target)}),t),l=fT(i.filter(function(d){return d.type==="attributes"&&!c(d.target)}),t);!u.length&&!l.length&&!a.length&&!s.length||e({adds:s,removes:a,texts:u,attributes:l})}function lT(r,e,t){for(var n=new Set,i=new Map,o=function(S){S.addedNodes.forEach(function(C){n.add(C)}),S.removedNodes.forEach(function(C){n.has(C)||i.set(C,S.target),n.delete(C)})},s=0,a=r;s<a.length;s++){var c=a[s];o(c)}var u=Array.from(n);pT(u);for(var l=new Set,d=[],f=0,p=u;f<p.length;f++){var h=p[f];if(!k(h)){var m=Qe(h.parentNode,e.defaultPrivacyLevel);if(!(m===U.HIDDEN||m===U.IGNORE)){var g=Vr(h,{serializedNodeIds:l,parentNodePrivacyLevel:m,serializationContext:{status:2,shadowRootsController:t},configuration:e});if(g){var E=Dr(h);d.push({nextId:A(h),parentId:ve(E),node:g})}}}}var x=[];return i.forEach(function(S,C){Le(C)&&x.push({parentId:ve(S),id:ve(C)})}),{adds:d,removes:x,hasBeenSerialized:k};function k(S){return Le(S)&&l.has(ve(S))}function A(S){for(var C=S.nextSibling;C;){if(Le(C))return ve(C);C=C.nextSibling}return null}}function dT(r,e){for(var t,n=[],i=new Set,o=r.filter(function(d){return i.has(d.target)?!1:(i.add(d.target),!0)}),s=0,a=o;s<a.length;s++){var c=a[s],u=c.target.textContent;if(u!==c.oldValue){var l=Qe(Dr(c.target),e.defaultPrivacyLevel);l===U.HIDDEN||l===U.IGNORE||n.push({id:ve(c.target),value:(t=us(c.target,!1,l))!==null&&t!==void 0?t:null})}}return n}function fT(r,e){for(var t=[],n=new Map,i=r.filter(function(m){var g=n.get(m.target);return g?.has(m.attributeName)?!1:(g?g.add(m.attributeName):n.set(m.target,new Set([m.attributeName])),!0)}),o=new Map,s=0,a=i;s<a.length;s++){var c=a[s],u=c.target.getAttribute(c.attributeName);if(u!==c.oldValue){var l=Qe(c.target,e.defaultPrivacyLevel),d=xi(c.target,l,c.attributeName,e),f=void 0;if(c.attributeName==="value"){var p=Br(c.target,l);if(p===void 0)continue;f=p}else typeof d=="string"?f=d:f=null;var h=o.get(c.target);h||(h={id:ve(c.target),attributes:{}},t.push(h),o.set(c.target,h)),h.attributes[c.attributeName]=f}}return t}function pT(r){r.sort(function(e,t){var n=e.compareDocumentPosition(t);return n&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:n&Node.DOCUMENT_POSITION_CONTAINS||n&Node.DOCUMENT_POSITION_FOLLOWING?1:n&Node.DOCUMENT_POSITION_PRECEDING?-1:0})}function cm(r,e){gn(r)&&e(r.shadowRoot),rs(r,function(t){return cm(t,e)})}function um(r,e){return se(r,window,["focus","blur"],function(){e({has_focus:document.hasFocus()})}).stop}function lm(){var r=new WeakMap,e=1;return{getIdForEvent:function(t){return r.has(t)||r.set(t,e++),r.get(t)}}}function Bc(r,e){var t=lm(),n=Ii(e.mutationCb,e.configuration,e.shadowRootsController,document),i=Xh(r,e.mousemoveCb),o=em(r,e.mouseInteractionCb,t),s=Zh(r,e.scrollCb,e.configuration.defaultPrivacyLevel,e.elementsScrollPositions),a=om(r,e.viewportResizeCb),c=Ri(r,e.inputCb),u=nm(r,e.mediaInteractionCb,e.configuration.defaultPrivacyLevel),l=rm(e.styleSheetCb),d=um(r,e.focusCb),f=sm(r,e.visualViewportResizeCb),p=im(e.lifeCycle,e.frustrationCb,t);return{flush:function(){n.flush()},stop:function(){n.stop(),i(),o(),s(),a(),c(),u(),l(),d(),f(),p()}}}function Vc(){var r=new WeakMap;return{set:function(e,t){e===document&&!document.scrollingElement||r.set(e===document?document.scrollingElement:e,t)},get:function(e){return r.get(e)},has:function(e){return r.has(e)}}}var dm=function(r,e){var t=e.mutationCb,n=e.inputCb,i=new Map,o={addShadowRoot:function(s){var a=Ii(t,r,o,s),c=a.stop,u=a.flush,l=Ri(r,n,s);i.set(s,{flush:u,stop:function(){c(),l()}})},removeShadowRoot:function(s){var a=i.get(s);a&&(a.stop(),i.delete(s))},stop:function(){i.forEach(function(s){var a=s.stop;return a()})},flush:function(){i.forEach(function(s){var a=s.flush;return a()})}};return o};function zc(r){var e=r.emit,t=r.configuration;if(!e)throw new Error("emit function is required");var n=Vc(),i=function(f){e(jt(yt.Mutation,f))},o=function(f){return e(jt(yt.Input,f))},s=dm(t,{mutationCb:i,inputCb:o}),a=function(f,p){f===void 0&&(f=$()),p===void 0&&(p={status:0,elementsScrollPositions:n,shadowRootsController:s});var h=mr(),m=h.width,g=h.height;e({data:{height:g,href:window.location.href,width:m},type:je.Meta,timestamp:f}),e({data:{has_focus:document.hasFocus()},type:je.Focus,timestamp:f}),e({data:{node:ds(document,t,p),initialOffset:{left:Ai(),top:Pr()}},type:je.FullSnapshot,timestamp:f}),window.visualViewport&&e({data:fs(window.visualViewport),type:je.VisualViewport,timestamp:f})};a();var c=Bc(t,{lifeCycle:r.lifeCycle,configuration:t,elementsScrollPositions:n,inputCb:o,mediaInteractionCb:function(f){return e(jt(yt.MediaInteraction,f))},mouseInteractionCb:function(f){return e(f)},mousemoveCb:function(f,p){return e(jt(p,{positions:f}))},mutationCb:i,scrollCb:function(f){return e(jt(yt.Scroll,f))},styleSheetCb:function(f){return e(jt(yt.StyleSheetRule,f))},viewportResizeCb:function(f){return e(jt(yt.ViewportResize,f))},frustrationCb:function(f){return e(f)},focusCb:function(f){return e({data:f,type:je.Focus,timestamp:$()})},visualViewportResizeCb:function(f){e({data:f,type:je.VisualViewport,timestamp:$()})},shadowRootsController:s}),u=c.stop,l=c.flush;function d(){s.flush(),l()}return{stop:function(){s.stop(),u()},takeSubsequentFullSnapshot:function(f){d(),a(f,{shadowRootsController:s,status:1,elementsScrollPositions:n})},flushMutations:d,shadowRootsController:s}}function fm(r,e,t){var n=new FormData;n.append("segment",new Blob([r],{type:"application/octet-stream"}),"".concat(e.session.id,"-").concat(e.start));var i=I({raw_segment_size:t,compressed_segment_size:r.byteLength},e),o=JSON.stringify(i);return n.append("event",new Blob([o],{type:"application/json"})),{data:n,bytesCount:r.byteLength}}var hT=10,$e;function pm(r){return ps(r).segments_count}function hm(r){ps(r).segments_count+=1}function mm(r){ps(r).records_count+=1}function gm(r,e){ps(r).segments_total_raw_size+=e}function vm(r){return $e?.get(r)}function ps(r){$e||($e=new Map);var e;return $e.has(r)?e=$e.get(r):(e={records_count:0,segments_count:0,segments_total_raw_size:0},$e.set(r,e),$e.size>hT&&mT()),e}function mT(){if($e)if($e.keys)$e.delete($e.keys().next().value);else{var r=!0;$e.forEach(function(e,t){r&&($e.delete(t),r=!1)})}}var ym=function(){function r(e,t,n){this.encoder=e;var i=t.view.id;this.metadata=I({start:1/0,end:-1/0,creation_reason:n,records_count:0,has_full_snapshot:!1,index_in_view:pm(i),source:"browser"},t),hm(i)}return r.prototype.addRecord=function(e,t){var n;this.metadata.start=Math.min(this.metadata.start,e.timestamp),this.metadata.end=Math.max(this.metadata.end,e.timestamp),this.metadata.records_count+=1,(n=this.metadata).has_full_snapshot||(n.has_full_snapshot=e.type===je.FullSnapshot),Xt("record",{record:e,segment:this.metadata}),mm(this.metadata.view.id);var i=this.metadata.records_count===1?'{"records":[':",";this.encoder.write(i+JSON.stringify(e),t)},r.prototype.flush=function(e){var t=this;if(this.metadata.records_count===0)throw new Error("Empty segment flushed");this.encoder.write("],".concat(JSON.stringify(this.metadata).slice(1),`
`),function(){gm(t.metadata.view.id,t.encoder.rawBytesCount),e(t.metadata)}),this.encoder.reset()},r}();var vT=30*ie,hs=6e4;function jc(r,e,t,n,i,o){return yT(r,function(){return ET(e.applicationId,t,n)},i,o)}function yT(r,e,t,n){var i={status:0,nextSegmentCreationReason:"init"},o=r.subscribe(2,function(){a("view_change")}).unsubscribe,s=r.subscribe(9,function(c){a(c.reason)}).unsubscribe;function a(c){i.status===1&&(i.segment.flush(function(u){var l=fm(n.encodedBytes,u,n.rawBytesCount);oi(c)?t.sendOnExit(l):t.send(l)}),Ve(i.expirationTimeoutId)),c!=="stop"?i={status:0,nextSegmentCreationReason:c}:i={status:2}}return{addRecord:function(c){if(i.status!==2){if(i.status===0){var u=e();if(!u)return;i={status:1,segment:new ym(n,u,i.nextSegmentCreationReason),expirationTimeoutId:re(function(){a("segment_duration_limit")},vT)}}var l=i.segment;l.addRecord(c,function(){i.status===1&&i.segment===l&&n.encodedBytesCount>hs&&a("segment_bytes_limit")})}},stop:function(){a("stop"),o(),s()}}}function ET(r,e,t){var n=e.findTrackedSession(),i=t.findView();if(!(!n||!i))return{application:{id:r},session:{id:n.id},view:{id:i.id}}}function Em(r,e,t,n,i,o){var s=function(E){r.notify(12,{error:E}),Ce("Error reported to customer",{"error.message":E.message})},a=o||dn(e,e.sessionReplayEndpointBuilder,hs,s),c=jc(r,e,t,n,a,i),u=c.addRecord,l=c.stop,d=zc({emit:u,configuration:e,lifeCycle:r}),f=d.stop,p=d.takeSubsequentFullSnapshot,h=d.flushMutations,m=r.subscribe(4,function(){h(),u({timestamp:$(),type:je.ViewEnd})}).unsubscribe,g=r.subscribe(2,function(E){p(E.startClocks.timeStamp)}).unsubscribe;return{stop:function(){m(),g(),f(),l()}}}function ms(){return typeof Array.from=="function"&&typeof CSSSupportsRule=="function"&&typeof URL.createObjectURL=="function"&&"forEach"in NodeList.prototype}function Sm(r,e,t,n){var i=e.findTrackedSession(),o=ST(i,n),s=t.findView();return Rc(r,{viewContext:s,errorType:o,session:i})}function ST(r,e){if(!ms())return"browser-not-supported";if(!r)return"rum-not-tracked";if(!r.sessionReplayAllowed)return"incorrect-session-plan";if(!e)return"replay-not-started"}function $c(r,e,t){var n=0,i=[],o,s=0,a=[],c=G(r,e,"message",function(u){var l=u.data;if(!(l.type!=="wrote"||l.streamId!==t)){var d=a.shift();d&&d.id===l.id?(l.id===0?(n=l.additionalBytesCount,i=[l.result]):(n+=l.additionalBytesCount,i.push(l.result)),o=l.trailer,d.callback()):(c(),Ce("Worker responses received out of order."))}}).stop;return{get encodedBytes(){return i.length?Jd(i.concat(o)):new Uint8Array(0)},get encodedBytesCount(){return i.length?i.reduce(function(u,l){return u+l.length},0)+o.length:0},get rawBytesCount(){return n},write:function(u,l){e.postMessage({action:"write",id:s,data:u,streamId:t}),a.push({id:s,callback:l}),s+=1},reset:function(){e.postMessage({action:"reset",streamId:t}),s=0},stop:function(){c()}}}var _T=10*ie;function _m(r){return new Worker(r.workerUrl||URL.createObjectURL(new Blob(['!function(){"use strict";function t(t){for(var e=t.reduce((function(t,e){return t+e.length}),0),a=new Uint8Array(e),n=0,r=0,i=t;r<i.length;r++){var s=i[r];a.set(s,n),n+=s.length}return a}function e(t){for(var e=t.length;--e>=0;)t[e]=0}var a=256,n=286,r=30,i=15,s=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),_=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),h=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),l=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),o=new Array(576);e(o);var d=new Array(60);e(d);var u=new Array(512);e(u);var f=new Array(256);e(f);var c=new Array(29);e(c);var p,g,w,v=new Array(r);function b(t,e,a,n,r){this.static_tree=t,this.extra_bits=e,this.extra_base=a,this.elems=n,this.max_length=r,this.has_stree=t&&t.length}function m(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}e(v);var y=function(t){return t<256?u[t]:u[256+(t>>>7)]},k=function(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},z=function(t,e,a){t.bi_valid>16-a?(t.bi_buf|=e<<t.bi_valid&65535,k(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=a-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=a)},x=function(t,e,a){z(t,a[2*e],a[2*e+1])},A=function(t,e){var a=0;do{a|=1&t,t>>>=1,a<<=1}while(--e>0);return a>>>1},E=function(t,e,a){var n,r,s=new Array(16),_=0;for(n=1;n<=i;n++)s[n]=_=_+a[n-1]<<1;for(r=0;r<=e;r++){var h=t[2*r+1];0!==h&&(t[2*r]=A(s[h]++,h))}},Z=function(t){var e;for(e=0;e<n;e++)t.dyn_ltree[2*e]=0;for(e=0;e<r;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},U=function(t){t.bi_valid>8?k(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},S=function(t,e,a,n){var r=2*e,i=2*a;return t[r]<t[i]||t[r]===t[i]&&n[e]<=n[a]},R=function(t,e,a){for(var n=t.heap[a],r=a<<1;r<=t.heap_len&&(r<t.heap_len&&S(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!S(e,n,t.heap[r],t.depth));)t.heap[a]=t.heap[r],a=r,r<<=1;t.heap[a]=n},L=function(t,e,n){var r,i,h,l,o=0;if(0!==t.last_lit)do{r=t.pending_buf[t.d_buf+2*o]<<8|t.pending_buf[t.d_buf+2*o+1],i=t.pending_buf[t.l_buf+o],o++,0===r?x(t,i,e):(h=f[i],x(t,h+a+1,e),0!==(l=s[h])&&(i-=c[h],z(t,i,l)),r--,h=y(r),x(t,h,n),0!==(l=_[h])&&(r-=v[h],z(t,r,l)))}while(o<t.last_lit);x(t,256,e)},F=function(t,e){var a,n,r,s=e.dyn_tree,_=e.stat_desc.static_tree,h=e.stat_desc.has_stree,l=e.stat_desc.elems,o=-1;for(t.heap_len=0,t.heap_max=573,a=0;a<l;a++)0!==s[2*a]?(t.heap[++t.heap_len]=o=a,t.depth[a]=0):s[2*a+1]=0;for(;t.heap_len<2;)s[2*(r=t.heap[++t.heap_len]=o<2?++o:0)]=1,t.depth[r]=0,t.opt_len--,h&&(t.static_len-=_[2*r+1]);for(e.max_code=o,a=t.heap_len>>1;a>=1;a--)R(t,s,a);r=l;do{a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],R(t,s,1),n=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=n,s[2*r]=s[2*a]+s[2*n],t.depth[r]=(t.depth[a]>=t.depth[n]?t.depth[a]:t.depth[n])+1,s[2*a+1]=s[2*n+1]=r,t.heap[1]=r++,R(t,s,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var a,n,r,s,_,h,l=e.dyn_tree,o=e.max_code,d=e.stat_desc.static_tree,u=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,c=e.stat_desc.extra_base,p=e.stat_desc.max_length,g=0;for(s=0;s<=i;s++)t.bl_count[s]=0;for(l[2*t.heap[t.heap_max]+1]=0,a=t.heap_max+1;a<573;a++)(s=l[2*l[2*(n=t.heap[a])+1]+1]+1)>p&&(s=p,g++),l[2*n+1]=s,n>o||(t.bl_count[s]++,_=0,n>=c&&(_=f[n-c]),h=l[2*n],t.opt_len+=h*(s+_),u&&(t.static_len+=h*(d[2*n+1]+_)));if(0!==g){do{for(s=p-1;0===t.bl_count[s];)s--;t.bl_count[s]--,t.bl_count[s+1]+=2,t.bl_count[p]--,g-=2}while(g>0);for(s=p;0!==s;s--)for(n=t.bl_count[s];0!==n;)(r=t.heap[--a])>o||(l[2*r+1]!==s&&(t.opt_len+=(s-l[2*r+1])*l[2*r],l[2*r+1]=s),n--)}}(t,e),E(s,o,t.bl_count)},T=function(t,e,a){var n,r,i=-1,s=e[1],_=0,h=7,l=4;for(0===s&&(h=138,l=3),e[2*(a+1)+1]=65535,n=0;n<=a;n++)r=s,s=e[2*(n+1)+1],++_<h&&r===s||(_<l?t.bl_tree[2*r]+=_:0!==r?(r!==i&&t.bl_tree[2*r]++,t.bl_tree[32]++):_<=10?t.bl_tree[34]++:t.bl_tree[36]++,_=0,i=r,0===s?(h=138,l=3):r===s?(h=6,l=3):(h=7,l=4))},I=function(t,e,a){var n,r,i=-1,s=e[1],_=0,h=7,l=4;for(0===s&&(h=138,l=3),n=0;n<=a;n++)if(r=s,s=e[2*(n+1)+1],!(++_<h&&r===s)){if(_<l)do{x(t,r,t.bl_tree)}while(0!=--_);else 0!==r?(r!==i&&(x(t,r,t.bl_tree),_--),x(t,16,t.bl_tree),z(t,_-3,2)):_<=10?(x(t,17,t.bl_tree),z(t,_-3,3)):(x(t,18,t.bl_tree),z(t,_-11,7));_=0,i=r,0===s?(h=138,l=3):r===s?(h=6,l=3):(h=7,l=4)}},N=!1,O=function(t,e,a,n){z(t,0+(n?1:0),3),function(t,e,a,n){U(t),n&&(k(t,a),k(t,~a)),t.pending_buf.set(t.window.subarray(e,e+a),t.pending),t.pending+=a}(t,e,a,!0)},D=function(t,e,n,r){var i,s,_=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<a;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),F(t,t.l_desc),F(t,t.d_desc),_=function(t){var e;for(T(t,t.dyn_ltree,t.l_desc.max_code),T(t,t.dyn_dtree,t.d_desc.max_code),F(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*l[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(s=t.static_len+3+7>>>3)<=i&&(i=s)):i=s=n+5,n+4<=i&&-1!==e?O(t,e,n,r):4===t.strategy||s===i?(z(t,2+(r?1:0),3),L(t,o,d)):(z(t,4+(r?1:0),3),function(t,e,a,n){var r;for(z(t,e-257,5),z(t,a-1,5),z(t,n-4,4),r=0;r<n;r++)z(t,t.bl_tree[2*l[r]+1],3);I(t,t.dyn_ltree,e-1),I(t,t.dyn_dtree,a-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,_+1),L(t,t.dyn_ltree,t.dyn_dtree)),Z(t),r&&U(t)},B={_tr_init:function(t){N||(!function(){var t,e,a,l,m,y=new Array(16);for(a=0,l=0;l<28;l++)for(c[l]=a,t=0;t<1<<s[l];t++)f[a++]=l;for(f[a-1]=l,m=0,l=0;l<16;l++)for(v[l]=m,t=0;t<1<<_[l];t++)u[m++]=l;for(m>>=7;l<r;l++)for(v[l]=m<<7,t=0;t<1<<_[l]-7;t++)u[256+m++]=l;for(e=0;e<=i;e++)y[e]=0;for(t=0;t<=143;)o[2*t+1]=8,t++,y[8]++;for(;t<=255;)o[2*t+1]=9,t++,y[9]++;for(;t<=279;)o[2*t+1]=7,t++,y[7]++;for(;t<=287;)o[2*t+1]=8,t++,y[8]++;for(E(o,287,y),t=0;t<r;t++)d[2*t+1]=5,d[2*t]=A(t,5);p=new b(o,s,257,n,i),g=new b(d,_,0,r,i),w=new b(new Array(0),h,0,19,7)}(),N=!0),t.l_desc=new m(t.dyn_ltree,p),t.d_desc=new m(t.dyn_dtree,g),t.bl_desc=new m(t.bl_tree,w),t.bi_buf=0,t.bi_valid=0,Z(t)},_tr_stored_block:O,_tr_flush_block:D,_tr_tally:function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(f[n]+a+1)]++,t.dyn_dtree[2*y(e)]++),t.last_lit===t.lit_bufsize-1},_tr_align:function(t){z(t,2,3),x(t,256,o),function(t){16===t.bi_valid?(k(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},C=function(t,e,a,n){for(var r=65535&t|0,i=t>>>16&65535|0,s=0;0!==a;){a-=s=a>2e3?2e3:a;do{i=i+(r=r+e[n++]|0)|0}while(--s);r%=65521,i%=65521}return r|i<<16|0},H=new Uint32Array(function(){for(var t,e=[],a=0;a<256;a++){t=a;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[a]=t}return e}()),M=function(t,e,a,n){var r=H,i=n+a;t^=-1;for(var s=n;s<i;s++)t=t>>>8^r[255&(t^e[s])];return-1^t},Y={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},K={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},P=B._tr_init,j=B._tr_stored_block,G=B._tr_flush_block,X=B._tr_tally,W=B._tr_align,q=K.Z_NO_FLUSH,J=K.Z_PARTIAL_FLUSH,Q=K.Z_FULL_FLUSH,V=K.Z_FINISH,$=K.Z_BLOCK,tt=K.Z_OK,et=K.Z_STREAM_END,at=K.Z_STREAM_ERROR,nt=K.Z_DATA_ERROR,rt=K.Z_BUF_ERROR,it=K.Z_DEFAULT_COMPRESSION,st=K.Z_FILTERED,_t=K.Z_HUFFMAN_ONLY,ht=K.Z_RLE,lt=K.Z_FIXED,ot=K.Z_DEFAULT_STRATEGY,dt=K.Z_UNKNOWN,ut=K.Z_DEFLATED,ft=258,ct=262,pt=103,gt=113,wt=666,vt=function(t,e){return t.msg=Y[e],e},bt=function(t){return(t<<1)-(t>4?9:0)},mt=function(t){for(var e=t.length;--e>=0;)t[e]=0},yt=function(t,e,a){return(e<<t.hash_shift^a)&t.hash_mask},kt=function(t){var e=t.state,a=e.pending;a>t.avail_out&&(a=t.avail_out),0!==a&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+a),t.next_out),t.next_out+=a,e.pending_out+=a,t.total_out+=a,t.avail_out-=a,e.pending-=a,0===e.pending&&(e.pending_out=0))},zt=function(t,e){G(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,kt(t.strm)},xt=function(t,e){t.pending_buf[t.pending++]=e},At=function(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},Et=function(t,e){var a,n,r=t.max_chain_length,i=t.strstart,s=t.prev_length,_=t.nice_match,h=t.strstart>t.w_size-ct?t.strstart-(t.w_size-ct):0,l=t.window,o=t.w_mask,d=t.prev,u=t.strstart+ft,f=l[i+s-1],c=l[i+s];t.prev_length>=t.good_match&&(r>>=2),_>t.lookahead&&(_=t.lookahead);do{if(l[(a=e)+s]===c&&l[a+s-1]===f&&l[a]===l[i]&&l[++a]===l[i+1]){i+=2,a++;do{}while(l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&i<u);if(n=ft-(u-i),i=u-ft,n>s){if(t.match_start=e,s=n,n>=_)break;f=l[i+s-1],c=l[i+s]}}}while((e=d[e&o])>h&&0!=--r);return s<=t.lookahead?s:t.lookahead},Zt=function(t){var e,a,n,r,i,s,_,h,l,o,d=t.w_size;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=d+(d-ct)){t.window.set(t.window.subarray(d,d+d),0),t.match_start-=d,t.strstart-=d,t.block_start-=d,e=a=t.hash_size;do{n=t.head[--e],t.head[e]=n>=d?n-d:0}while(--a);e=a=d;do{n=t.prev[--e],t.prev[e]=n>=d?n-d:0}while(--a);r+=d}if(0===t.strm.avail_in)break;if(s=t.strm,_=t.window,h=t.strstart+t.lookahead,l=r,o=void 0,(o=s.avail_in)>l&&(o=l),a=0===o?0:(s.avail_in-=o,_.set(s.input.subarray(s.next_in,s.next_in+o),h),1===s.state.wrap?s.adler=C(s.adler,_,o,h):2===s.state.wrap&&(s.adler=M(s.adler,_,o,h)),s.next_in+=o,s.total_in+=o,o),t.lookahead+=a,t.lookahead+t.insert>=3)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=yt(t,t.ins_h,t.window[i+1]);t.insert&&(t.ins_h=yt(t,t.ins_h,t.window[i+3-1]),t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<ct&&0!==t.strm.avail_in)},Ut=function(t,e){for(var a,n;;){if(t.lookahead<ct){if(Zt(t),t.lookahead<ct&&e===q)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=yt(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==a&&t.strstart-a<=t.w_size-ct&&(t.match_length=Et(t,a)),t.match_length>=3)if(n=X(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=yt(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=yt(t,t.ins_h,t.window[t.strstart+1]);else n=X(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(zt(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(zt(t,!1),0===t.strm.avail_out)?1:2},St=function(t,e){for(var a,n,r;;){if(t.lookahead<ct){if(Zt(t),t.lookahead<ct&&e===q)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=yt(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==a&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-ct&&(t.match_length=Et(t,a),t.match_length<=5&&(t.strategy===st||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-3,n=X(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=yt(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(zt(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((n=X(t,0,t.window[t.strstart-1]))&&zt(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=X(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(zt(t,!1),0===t.strm.avail_out)?1:2};function Rt(t,e,a,n,r){this.good_length=t,this.max_lazy=e,this.nice_length=a,this.max_chain=n,this.func=r}var Lt=[new Rt(0,0,0,0,(function(t,e){var a=65535;for(a>t.pending_buf_size-5&&(a=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Zt(t),0===t.lookahead&&e===q)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+a;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,zt(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-ct&&(zt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(zt(t,!1),t.strm.avail_out),1)})),new Rt(4,4,8,4,Ut),new Rt(4,5,16,8,Ut),new Rt(4,6,32,32,Ut),new Rt(4,4,16,16,St),new Rt(8,16,32,32,St),new Rt(8,16,128,128,St),new Rt(8,32,128,256,St),new Rt(32,128,258,1024,St),new Rt(32,258,258,4096,St)];function Ft(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ut,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),mt(this.dyn_ltree),mt(this.dyn_dtree),mt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),mt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),mt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Tt=function(t){if(!t||!t.state)return vt(t,at);t.total_in=t.total_out=0,t.data_type=dt;var e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:gt,t.adler=2===e.wrap?0:1,e.last_flush=q,P(e),tt},It=function(t){var e,a=Tt(t);return a===tt&&((e=t.state).window_size=2*e.w_size,mt(e.head),e.max_lazy_match=Lt[e.level].max_lazy,e.good_match=Lt[e.level].good_length,e.nice_match=Lt[e.level].nice_length,e.max_chain_length=Lt[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),a},Nt=function(t,e,a,n,r,i){if(!t)return at;var s=1;if(e===it&&(e=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),r<1||r>9||a!==ut||n<8||n>15||e<0||e>9||i<0||i>lt)return vt(t,at);8===n&&(n=9);var _=new Ft;return t.state=_,_.strm=t,_.wrap=s,_.gzhead=null,_.w_bits=n,_.w_size=1<<_.w_bits,_.w_mask=_.w_size-1,_.hash_bits=r+7,_.hash_size=1<<_.hash_bits,_.hash_mask=_.hash_size-1,_.hash_shift=~~((_.hash_bits+3-1)/3),_.window=new Uint8Array(2*_.w_size),_.head=new Uint16Array(_.hash_size),_.prev=new Uint16Array(_.w_size),_.lit_bufsize=1<<r+6,_.pending_buf_size=4*_.lit_bufsize,_.pending_buf=new Uint8Array(_.pending_buf_size),_.d_buf=1*_.lit_bufsize,_.l_buf=3*_.lit_bufsize,_.level=e,_.strategy=i,_.method=a,It(t)},Ot={deflateInit:function(t,e){return Nt(t,e,ut,15,8,ot)},deflateInit2:Nt,deflateReset:It,deflateResetKeep:Tt,deflateSetHeader:function(t,e){return t&&t.state?2!==t.state.wrap?at:(t.state.gzhead=e,tt):at},deflate:function(t,e){var a,n;if(!t||!t.state||e>$||e<0)return t?vt(t,at):at;var r=t.state;if(!t.output||!t.input&&0!==t.avail_in||r.status===wt&&e!==V)return vt(t,0===t.avail_out?rt:at);r.strm=t;var i=r.last_flush;if(r.last_flush=e,42===r.status)if(2===r.wrap)t.adler=0,xt(r,31),xt(r,139),xt(r,8),r.gzhead?(xt(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),xt(r,255&r.gzhead.time),xt(r,r.gzhead.time>>8&255),xt(r,r.gzhead.time>>16&255),xt(r,r.gzhead.time>>24&255),xt(r,9===r.level?2:r.strategy>=_t||r.level<2?4:0),xt(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(xt(r,255&r.gzhead.extra.length),xt(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=M(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(xt(r,0),xt(r,0),xt(r,0),xt(r,0),xt(r,0),xt(r,9===r.level?2:r.strategy>=_t||r.level<2?4:0),xt(r,3),r.status=gt);else{var s=ut+(r.w_bits-8<<4)<<8;s|=(r.strategy>=_t||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(s|=32),s+=31-s%31,r.status=gt,At(r,s),0!==r.strstart&&(At(r,t.adler>>>16),At(r,65535&t.adler)),t.adler=1}if(69===r.status)if(r.gzhead.extra){for(a=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),kt(t),a=r.pending,r.pending!==r.pending_buf_size));)xt(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),kt(t),a=r.pending,r.pending===r.pending_buf_size)){n=1;break}n=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,xt(r,n)}while(0!==n);r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),0===n&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),kt(t),a=r.pending,r.pending===r.pending_buf_size)){n=1;break}n=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,xt(r,n)}while(0!==n);r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),0===n&&(r.status=pt)}else r.status=pt;if(r.status===pt&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&kt(t),r.pending+2<=r.pending_buf_size&&(xt(r,255&t.adler),xt(r,t.adler>>8&255),t.adler=0,r.status=gt)):r.status=gt),0!==r.pending){if(kt(t),0===t.avail_out)return r.last_flush=-1,tt}else if(0===t.avail_in&&bt(e)<=bt(i)&&e!==V)return vt(t,rt);if(r.status===wt&&0!==t.avail_in)return vt(t,rt);if(0!==t.avail_in||0!==r.lookahead||e!==q&&r.status!==wt){var _=r.strategy===_t?function(t,e){for(var a;;){if(0===t.lookahead&&(Zt(t),0===t.lookahead)){if(e===q)return 1;break}if(t.match_length=0,a=X(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(zt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(zt(t,!1),0===t.strm.avail_out)?1:2}(r,e):r.strategy===ht?function(t,e){for(var a,n,r,i,s=t.window;;){if(t.lookahead<=ft){if(Zt(t),t.lookahead<=ft&&e===q)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(n=s[r=t.strstart-1])===s[++r]&&n===s[++r]&&n===s[++r]){i=t.strstart+ft;do{}while(n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&r<i);t.match_length=ft-(i-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(a=X(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=X(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(zt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(zt(t,!1),0===t.strm.avail_out)?1:2}(r,e):Lt[r.level].func(r,e);if(3!==_&&4!==_||(r.status=wt),1===_||3===_)return 0===t.avail_out&&(r.last_flush=-1),tt;if(2===_&&(e===J?W(r):e!==$&&(j(r,0,0,!1),e===Q&&(mt(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),kt(t),0===t.avail_out))return r.last_flush=-1,tt}return e!==V?tt:r.wrap<=0?et:(2===r.wrap?(xt(r,255&t.adler),xt(r,t.adler>>8&255),xt(r,t.adler>>16&255),xt(r,t.adler>>24&255),xt(r,255&t.total_in),xt(r,t.total_in>>8&255),xt(r,t.total_in>>16&255),xt(r,t.total_in>>24&255)):(At(r,t.adler>>>16),At(r,65535&t.adler)),kt(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?tt:et)},deflateEnd:function(t){if(!t||!t.state)return at;var e=t.state.status;return 42!==e&&69!==e&&73!==e&&91!==e&&e!==pt&&e!==gt&&e!==wt?vt(t,at):(t.state=null,e===gt?vt(t,nt):tt)},deflateSetDictionary:function(t,e){var a=e.length;if(!t||!t.state)return at;var n=t.state,r=n.wrap;if(2===r||1===r&&42!==n.status||n.lookahead)return at;if(1===r&&(t.adler=C(t.adler,e,a,0)),n.wrap=0,a>=n.w_size){0===r&&(mt(n.head),n.strstart=0,n.block_start=0,n.insert=0);var i=new Uint8Array(n.w_size);i.set(e.subarray(a-n.w_size,a),0),e=i,a=n.w_size}var s=t.avail_in,_=t.next_in,h=t.input;for(t.avail_in=a,t.next_in=0,t.input=e,Zt(n);n.lookahead>=3;){var l=n.strstart,o=n.lookahead-2;do{n.ins_h=yt(n,n.ins_h,n.window[l+3-1]),n.prev[l&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=l,l++}while(--o);n.strstart=l,n.lookahead=2,Zt(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=_,t.input=h,t.avail_in=s,n.wrap=r,tt},deflateInfo:"pako deflate (from Nodeca project)"};for(var Dt=new Uint8Array(256),Bt=0;Bt<256;Bt++)Dt[Bt]=Bt>=252?6:Bt>=248?5:Bt>=240?4:Bt>=224?3:Bt>=192?2:1;Dt[254]=Dt[254]=1;var Ct=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},Ht=Object.prototype.toString,Mt=K.Z_NO_FLUSH,Yt=K.Z_SYNC_FLUSH,Kt=K.Z_FULL_FLUSH,Pt=K.Z_FINISH,jt=K.Z_OK,Gt=K.Z_STREAM_END,Xt=K.Z_DEFAULT_COMPRESSION,Wt=K.Z_DEFAULT_STRATEGY,qt=K.Z_DEFLATED;function Jt(){this.options={level:Xt,method:qt,chunkSize:16384,windowBits:15,memLevel:8,strategy:Wt};var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ct,this.strm.avail_out=0;var e=Ot.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(e!==jt)throw new Error(Y[e]);if(t.header&&Ot.deflateSetHeader(this.strm,t.header),t.dictionary){var a;if(a="[object ArrayBuffer]"===Ht.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(e=Ot.deflateSetDictionary(this.strm,a))!==jt)throw new Error(Y[e]);this._dict_set=!0}}function Qt(t,e,a){try{t.postMessage({type:"errored",error:e,streamId:a})}catch(n){t.postMessage({type:"errored",error:String(e),streamId:a})}}function Vt(t){var e=t.strm.adler;return new Uint8Array([3,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e])}Jt.prototype.push=function(t,e){var a,n,r=this.strm,i=this.options.chunkSize;if(this.ended)return!1;for(n=e===~~e?e:!0===e?Pt:Mt,"[object ArrayBuffer]"===Ht.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(i),r.next_out=0,r.avail_out=i),(n===Yt||n===Kt)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if((a=Ot.deflate(r,n))===Gt)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),a=Ot.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===jt;if(0!==r.avail_out){if(n>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},Jt.prototype.onData=function(t){this.chunks.push(t)},Jt.prototype.onEnd=function(t){t===jt&&(this.result=function(t){for(var e=0,a=0,n=t.length;a<n;a++)e+=t[a].length;for(var r=new Uint8Array(e),i=0,s=0,_=t.length;i<_;i++){var h=t[i];r.set(h,s),s+=h.length}return r}(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},function(e){void 0===e&&(e=self);try{var a=new Map;e.addEventListener("message",(function(n){try{var r=function(e,a){switch(a.action){case"init":return{type:"initialized",version:"4.50.1"};case"write":var n=e.get(a.streamId);n||(n=new Jt,e.set(a.streamId,n));var r=n.chunks.length,i=function(t){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);var e,a,n,r,i,s=t.length,_=0;for(r=0;r<s;r++)55296==(64512&(a=t.charCodeAt(r)))&&r+1<s&&56320==(64512&(n=t.charCodeAt(r+1)))&&(a=65536+(a-55296<<10)+(n-56320),r++),_+=a<128?1:a<2048?2:a<65536?3:4;for(e=new Uint8Array(_),i=0,r=0;i<_;r++)55296==(64512&(a=t.charCodeAt(r)))&&r+1<s&&56320==(64512&(n=t.charCodeAt(r+1)))&&(a=65536+(a-55296<<10)+(n-56320),r++),a<128?e[i++]=a:a<2048?(e[i++]=192|a>>>6,e[i++]=128|63&a):a<65536?(e[i++]=224|a>>>12,e[i++]=128|a>>>6&63,e[i++]=128|63&a):(e[i++]=240|a>>>18,e[i++]=128|a>>>12&63,e[i++]=128|a>>>6&63,e[i++]=128|63&a);return e}(a.data);return n.push(i,K.Z_SYNC_FLUSH),{type:"wrote",id:a.id,streamId:a.streamId,result:t(n.chunks.slice(r)),trailer:Vt(n),additionalBytesCount:i.length};case"reset":e.delete(a.streamId)}}(a,n.data);r&&e.postMessage(r)}catch(t){Qt(e,t,n.data&&"streamId"in n.data?n.data.streamId:void 0)}}))}catch(t){Qt(e,t)}}()}();'])))}var be={status:0};function Yc(r,e,t,n){switch(n===void 0&&(n=_m),be.status===0&&bT(r,e,n),be.status){case 1:return be.initializationFailureCallbacks.push(t),be.worker;case 3:return be.worker}}function gs(){return be.status}function bT(r,e,t){t===void 0&&(t=_m);try{var n=t(r),i=G(r,n,"error",function(a){Kc(r,e,a)}).stop,o=G(r,n,"message",function(a){var c=a.data;c.type==="errored"?Kc(r,e,c.error,c.streamId):c.type==="initialized"&&AT(c.version)}).stop;n.postMessage({action:"init"}),re(function(){return TT(e)},_T);var s=function(){i(),o()};be={status:1,worker:n,stop:s,initializationFailureCallbacks:[]}}catch(a){Kc(r,e,a)}}function TT(r){be.status===1&&(L.error("".concat(r," failed to start: a timeout occurred while initializing the Worker")),be.initializationFailureCallbacks.forEach(function(e){return e()}),be={status:2})}function AT(r){be.status===1&&(be={status:3,worker:be.worker,stop:be.stop,version:r})}function Kc(r,e,t,n){if(be.status===1||be.status===0){if(L.error("".concat(e," failed to start: an error occurred while creating the Worker:"),t),t instanceof Event||t instanceof Error&&CT(t.message)){var i=void 0;r.workerUrl?i="Please make sure the Worker URL ".concat(r.workerUrl," is correct and CSP is correctly configured."):i="Please make sure CSP is correctly configured.",L.error("".concat(i," See documentation at https://docs.datadoghq.com/integrations/content_security_policy_logs/#use-csp-with-real-user-monitoring-and-session-replay"))}else pr(t);be.status===1&&be.initializationFailureCallbacks.forEach(function(o){return o()}),be={status:2}}else pr(t,{worker_version:be.status===3&&be.version,stream_id:n})}function CT(r){return _e(r,"Content Security Policy")||_e(r,"requires 'TrustedScriptURL'")}function bm(r,e){if(De()||!ms())return{start:B,stop:B,getReplayStats:function(){},onRumStart:B,isRecording:function(){return!1},getSessionReplayLink:function(){}};var t={status:0},n=function(){t={status:1}},i=function(){t={status:0}};return{start:function(){return n()},stop:function(){return i()},getSessionReplayLink:function(o,s,a){return Sm(o,s,a,t.status!==0)},onRumStart:function(o,s,a,c){o.subscribe(7,function(){(t.status===2||t.status===3)&&(i(),t={status:1})}),o.subscribe(8,function(){t.status===1&&n()}),n=function(){var u=a.findTrackedSession();if(!u||!u.sessionReplayAllowed){t={status:1};return}t.status===2||t.status===3||(t={status:2},fn(s,"interactive",function(){if(t.status===2){var l=Yc(s,"Datadog Session Replay",function(){i()},e);if(!l){t={status:0};return}var d=r(o,s,a,c,$c(s,l,1)).stop;t={status:3,stopRecording:d}}}))},i=function(){t.status!==0&&(t.status===3&&t.stopRecording(),t={status:0})},t.status===1&&n()},isRecording:function(){return gs()===3&&t.status===3},getReplayStats:function(o){return gs()===3?vm(o):void 0}}}var wT=bm(Em),Oi=lc(xc,wT);ei(He(),"DD_RUM",Oi);var xT=32*it;function Am(r){var e=on(r),t=Tm(r.forwardConsoleLogs,Dt(Me),"Forward Console Logs"),n=Tm(r.forwardReports,Dt(We),"Forward Reports");if(!(!e||!t||!n))return r.forwardErrorsToLogs&&!_e(t,Me.error)&&t.push(Me.error),I({forwardErrorsToLogs:r.forwardErrorsToLogs!==!1,forwardConsoleLogs:t,forwardReports:n,requestErrorResponseLengthLimit:xT},e)}function Tm(r,e,t){if(r===void 0)return[];if(!(r==="all"||Array.isArray(r)&&r.every(function(n){return _e(e,n)}))){L.error("".concat(t,' should be "all" or an array with allowed values "').concat(e.join('", "'),'"'));return}return r==="all"?e:jf(r)}function Cm(r){var e=sn(r);return I({forward_errors_to_logs:r.forwardErrorsToLogs,forward_console_logs:r.forwardConsoleLogs,forward_reports:r.forwardReports},e)}var RT=function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},ee={debug:"debug",error:"error",info:"info",warn:"warn"},En={console:"console",http:"http",silent:"silent"},wm=Object.keys(ee),vs=function(){function r(e,t,n,i,o){n===void 0&&(n=En.http),i===void 0&&(i=ee.debug),o===void 0&&(o={}),this.handleLogStrategy=e,this.handlerType=n,this.level=i,this.contextManager=xt(3),this.contextManager.set(I({},o,t?{logger:{name:t}}:void 0))}return r.prototype.log=function(e,t,n,i){n===void 0&&(n=ee.info);var o;if(n===ee.error&&(o={origin:Y.LOGGER}),i!=null){var s=i instanceof Error?xe(i):void 0,a=Nr({stackTrace:s,originalError:i,nonErrorPrefix:"Provided",source:Y.LOGGER,handling:"handled",startClocks:ce()});o={origin:Y.LOGGER,stack:a.stack,kind:a.type,message:a.message}}var c=ge(t),u=o?le({error:o},c):c;this.handleLogStrategy({message:ge(e),context:u,status:n},this)},r.prototype.debug=function(e,t,n){this.log(e,t,ee.debug,n)},r.prototype.info=function(e,t,n){this.log(e,t,ee.info,n)},r.prototype.warn=function(e,t,n){this.log(e,t,ee.warn,n)},r.prototype.error=function(e,t,n){this.log(e,t,ee.error,n)},r.prototype.setContext=function(e){this.contextManager.set(e)},r.prototype.getContext=function(){return this.contextManager.get()},r.prototype.addContext=function(e,t){this.contextManager.add(e,t)},r.prototype.removeContext=function(e){this.contextManager.remove(e)},r.prototype.setHandler=function(e){this.handlerType=e},r.prototype.getHandler=function(){return this.handlerType},r.prototype.setLevel=function(e){this.level=e},r.prototype.getLevel=function(){return this.level},RT([Va],r.prototype,"log",null),r}();var xm="logs";function Rm(r){var e=!1,t=xt(2),n=xt(1),i={},o=function(){},s=new pn,a=function(p,h,m,g){m===void 0&&(m=Zt(l())),g===void 0&&(g=$()),s.add(function(){return a(p,h,m,g)})},c=function(){},u=new vs(function(){for(var p=[],h=0;h<arguments.length;h++)p[h]=arguments[h];return a.apply(void 0,p)});function l(){return{view:{referrer:document.referrer,url:window.location.href},context:t.getContext(),user:n.getContext()}}return Jn({logger:u,init:_(function(p){var h;if(!p){L.error("Missing configuration");return}if(c=function(){return Zt(p)},De()&&(p=d(p)),!!f(p)){var m=Am(p);if(m){if(p.storeContextsAcrossPages){var g=t.getContext();t=Mr(m,xm,2),t.setContext(le(t.getContext(),g));var E=n.getContext();n=Mr(m,xm,1),n.setContext(le(n.getContext(),E))}h=r(p,m,l,u),a=h.handleLog,o=h.getInternalContext,s.drain(),e=!0}}}),getLoggerGlobalContext:_(function(){return t.get()}),getGlobalContext:_(function(){return t.getContext()}),setLoggerGlobalContext:_(function(p){return t.set(p)}),setGlobalContext:_(function(p){return t.setContext(p)}),addLoggerGlobalContext:_(function(p,h){return t.add(p,h)}),setGlobalContextProperty:_(function(p,h){return t.setContextProperty(p,h)}),removeLoggerGlobalContext:_(function(p){return t.remove(p)}),removeGlobalContextProperty:_(function(p){return t.removeContextProperty(p)}),clearGlobalContext:_(function(){return t.clearContext()}),createLogger:_(function(p,h){return h===void 0&&(h={}),i[p]=new vs(function(){for(var m=[],g=0;g<arguments.length;g++)m[g]=arguments[g];return a.apply(void 0,m)},ge(p),h.handler,h.level,ge(h.context)),i[p]}),getLogger:_(function(p){return i[p]}),getInitConfiguration:_(function(){return c()}),getInternalContext:_(function(p){return o(p)}),setUser:_(function(p){mi(p)&&n.setContext(kr(p))}),getUser:_(function(){return n.getContext()}),setUserProperty:_(function(p,h){var m,g=kr((m={},m[p]=h,m))[p];n.setContextProperty(p,g)}),removeUserProperty:_(function(p){return n.removeContextProperty(p)}),clearUser:_(function(){return n.clearContext()})});function d(p){return I({},p,{clientToken:"empty"})}function f(p){return e?(p.silentMultipleInit||L.error("DD_LOGS is already initialized."),!1):!0}}var IT="logs";function Im(r){var e=ni(r,IT,function(t){return OT(r,t)});return{findTrackedSession:function(t){var n=e.findActiveSession(t);return n&&n.trackingType==="1"?{id:n.id}:void 0},expireObservable:e.expireObservable}}function Om(r){var e=Nm(r)==="1",t=e?{}:void 0;return{findTrackedSession:function(){return t},expireObservable:new F}}function Nm(r){return ht(r.sessionSampleRate)?"1":"0"}function OT(r,e){var t=NT(e)?e:Nm(r);return{trackingType:t,isTracked:t==="1"}}function NT(r){return r==="0"||r==="1"}var Sn,Mm=(Sn={},Sn[ee.debug]=0,Sn[ee.info]=1,Sn[ee.warn]=2,Sn[ee.error]=3,Sn);function km(r){function e(t,n,i,o){var s=t.context;Hc(t.status,En.console,n)&&MT(t,le(n.getContext(),s)),r.notify(0,{rawLogsEvent:{date:o||$(),message:t.message,status:t.status,origin:Y.LOGGER},messageContext:s,savedCommonContext:i,logger:n})}return{handleLog:e}}function Hc(r,e,t){var n=t.getHandler(),i=Array.isArray(n)?n:[n];return Mm[r]>=Mm[t.getLevel()]&&_e(i,e)}function MT(r,e){cr[r.status].call(pt,r.message,e)}function Lm(r,e,t,n,i,o){var s=wm.concat(["custom"]),a={};s.forEach(function(c){a[c]=ai(c,e.eventRateLimiterThreshold,o)}),t.subscribe(0,function(c){var u,l,d,f=c.rawLogsEvent,p=c.messageContext,h=p===void 0?void 0:p,m=c.savedCommonContext,g=m===void 0?void 0:m,E=c.logger,x=E===void 0?i:E,k=Xr(f.date),A=r.findTrackedSession(k);if(A){var S=g||n(),C=le({service:e.service,session_id:A.id,usr:Be(S.user)?void 0:S.user,view:S.view},S.context,Ni(k),f,x.getContext(),h);!Hc(f.status,En.http,x)||((u=e.beforeSend)===null||u===void 0?void 0:u.call(e,C))===!1||((l=C.error)===null||l===void 0?void 0:l.origin)!==Y.AGENT&&((d=a[C.status])!==null&&d!==void 0?d:a.custom).isLimitReached()||t.notify(1,C)}})}var Dm=!1;function Ni(r){var e=window;if(er()){var t=n(e.DD_RUM_SYNTHETICS);return!t&&!Dm&&(Dm=!0,Ce("Logs sent before RUM is injected by the synthetics worker",{testId:pi(),resultId:hi()})),t}return n(e.DD_RUM);function n(i){if(i&&i.getInternalContext)return i.getInternalContext(r)}}var zr,kT=(zr={},zr[Me.log]=ee.info,zr[Me.debug]=ee.debug,zr[Me.info]=ee.info,zr[Me.warn]=ee.warn,zr[Me.error]=ee.error,zr);function Pm(r,e){var t=li(r.forwardConsoleLogs).subscribe(function(n){e.notify(0,{rawLogsEvent:{date:$(),message:n.message,origin:Y.CONSOLE,error:n.api===Me.error?{origin:Y.CONSOLE,stack:n.stack,fingerprint:n.fingerprint}:void 0,status:kT[n.api]}})});return{stop:function(){t.unsubscribe()}}}var Mi,DT=(Mi={},Mi[We.cspViolation]=ee.error,Mi[We.intervention]=ee.error,Mi[We.deprecation]=ee.warn,Mi);function Um(r,e){var t=ti(r,r.forwardReports).subscribe(function(n){var i=n.message,o=DT[n.type],s;o===ee.error?s={kind:n.subtype,origin:Y.REPORT,stack:n.stack}:n.stack&&(i+=" Found in ".concat(Za(n.stack))),e.notify(0,{rawLogsEvent:{date:$(),message:i,origin:Y.REPORT,error:s,status:o}})});return{stop:function(){t.unsubscribe()}}}function Fm(r,e){if(!r.forwardErrorsToLogs)return{stop:B};var t=ci(r).subscribe(function(o){o.state==="complete"&&i("xhr",o)}),n=ui().subscribe(function(o){o.state==="resolve"&&i("fetch",o)});function i(o,s){!r.isIntakeUrl(s.url)&&(FT(s)||Xo(s.status))&&("xhr"in s?LT(s.xhr,r,a):s.response?UT(s.response,r,a):s.error&&PT(s.error,r,a));function a(c){e.notify(0,{rawLogsEvent:{message:"".concat(BT(o)," error ").concat(s.method," ").concat(s.url),date:s.startClocks.timeStamp,error:{origin:Y.NETWORK,stack:c||"Failed to load"},http:{method:s.method,status_code:s.status,url:s.url},status:ee.error,origin:Y.NETWORK}})}}return{stop:function(){t.unsubscribe(),n.unsubscribe()}}}function LT(r,e,t){typeof r.response=="string"?t(Gc(r.response,e)):t(r.response)}function PT(r,e,t){t(Gc(vt(xe(r)),e))}function UT(r,e,t){var n=Zo(r);!n||!n.body?t():window.TextDecoder?VT(n.body,e.requestErrorResponseLengthLimit,function(i,o){t(i?"Unable to retrieve response: ".concat(i):o)}):n.text().then(_(function(i){return t(Gc(i,e))}),_(function(i){return t("Unable to retrieve response: ".concat(i))}))}function FT(r){return r.status===0&&r.responseType!=="opaque"}function Gc(r,e){return r.length>e.requestErrorResponseLengthLimit?"".concat(r.substring(0,e.requestErrorResponseLengthLimit),"..."):r}function BT(r){return r==="xhr"?"XHR":"Fetch"}function VT(r,e,t){fi(r,function(n,i,o){if(n)t(n);else{var s=new TextDecoder().decode(i);o&&(s+="..."),t(void 0,s)}},{bytesLimit:e,collectStreamBody:!0})}function Bm(r,e){if(!r.forwardErrorsToLogs)return{stop:B};var t=new F,n=Zn(t).stop,i=t.subscribe(function(o){e.notify(0,{rawLogsEvent:{message:o.message,date:o.startClocks.timeStamp,error:{kind:o.type,origin:Y.SOURCE,stack:o.stack},origin:Y.SOURCE,status:ee.error}})});return{stop:function(){n(),i.unsubscribe()}}}var Vm=si;function zm(r,e,t,n,i){var o=hr(r,{endpoint:r.logsEndpointBuilder},r.replica&&{endpoint:r.replica.logsEndpointBuilder},t,n,i);return e.subscribe(1,function(s){o.add(s)}),o}function jm(r){var e=wt();r.subscribe(1,function(t){e.send("log",t)})}function $m(r){return{get:function(e){var t=r.findTrackedSession(e);if(t)return{session_id:t.id}}}}function Km(r,e,t,n){var i=new Vm,o=[];i.subscribe(1,function(m){return Xt("logs",m)});var s=function(m){i.notify(0,{rawLogsEvent:{message:m.message,date:m.startClocks.timeStamp,error:{origin:Y.AGENT},origin:Y.AGENT,status:ee.error}}),Ce("Error reported to customer",{"error.message":m.message})},a=ii(e),c=e.sessionStoreStrategyType&&!De()&&!er()?Im(e):Om(e),u=zT(e,s,a,c.expireObservable),l=u.telemetry,d=u.stop;o.push(function(){return d()}),l.setContextProvider(function(){var m,g,E,x,k,A;return{application:{id:(m=Ni())===null||m===void 0?void 0:m.application_id},session:{id:(g=c.findTrackedSession())===null||g===void 0?void 0:g.id},view:{id:(x=(E=Ni())===null||E===void 0?void 0:E.view)===null||x===void 0?void 0:x.id},action:{id:(A=(k=Ni())===null||k===void 0?void 0:k.user_action)===null||A===void 0?void 0:A.id}}}),Fm(e,i),Bm(e,i),Pm(e,i),Um(e,i);var f=km(i).handleLog;if(Lm(c,e,i,t,n,s),De())jm(i);else{var p=zm(e,i,s,a,c.expireObservable).stop;o.push(function(){return p()})}ln(Cm(r));var h=$m(c);return{handleLog:f,getInternalContext:h.get,stop:function(){o.forEach(function(m){return m()})}}}function zT(r,e,t,n){var i=cn("browser-logs-sdk",r),o=[];if(De()){var s=wt(),a=i.observable.subscribe(function(l){return s.send("internal_telemetry",l)});o.push(function(){return a.unsubscribe()})}else{var c=hr(r,{endpoint:r.rumEndpointBuilder},r.replica&&{endpoint:r.replica.rumEndpointBuilder},e,t,n);o.push(function(){return c.stop()});var u=i.observable.subscribe(function(l){return c.add(l,un(r))});o.push(function(){return u.unsubscribe()})}return{telemetry:i,stop:function(){o.forEach(function(l){return l()})}}}var _n=Rm(Km);ei(He(),"DD_LOGS",_n);var ys=(()=>{class r{constructor(){this.initialized=!1,this.datadogInit()}datadogInit(){or?.hasDatadog&&(Oi.init(or.datadog),Oi.startSessionReplayRecording(),this.initialized=!0)}datadogInitUser(t,n,i){Oi.setUser({id:t,name:n,email:i})}debug(t,n){this.initialized&&_n.logger.debug(t,n)}info(t,n){this.initialized&&_n.logger.info(t,n)}warn(t,n){this.initialized&&_n.logger.warn(t,n)}error(t,n){this.initialized&&_n.logger.error(t,n)}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=N({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var Es=(()=>{class r{constructor(t,n){this.apiService=t,this.http=n}getActive(){return this.apiService.apiTermsActive().pipe(w(t=>t.map(n=>n.toJSON())))}getAll(){return this.apiService.apiTermsAll().pipe(w(t=>t.map(n=>n.toJSON())))}loadSelectedTerm(t){return this.apiService.apiTermsTermCode(t||0).pipe(w(n=>n.toJSON()))}getByTermCode(t){return this.apiService.apiTermsTermCode(t||0).pipe(w(n=>n.toJSON()))}add(t){let n=new Ol;return n.season=t.season,n.year=t.year,n.copiedFromTermCode=t.copiedFromTermCode,n.dateActive=t.dateActive,this.apiService.apiTermsNew(n).pipe(w(i=>i))}delete(t){return this.apiService.apiTermsDelete(t).pipe(w(n=>n))}update(t){let n=new Il(b({},t.term)),i=new Rl;return i.term=n,i.termCode=t.termCode,i.dateActive=t.dateActive,i.year=t.year,this.apiService.apiTermsEdit(i).pipe(w(o=>o))}static{this.\u0275fac=function(n){return new(n||r)(y(ro),y(Mn))}}static{this.\u0275prov=N({token:r,factory:r.\u0275fac})}}return r})();var qm="@ngrx/router-store/request",L1=Gr(qm,qr()),Wc="@ngrx/router-store/navigation",P1=Gr(Wc,qr()),Qc="@ngrx/router-store/cancel",U1=Gr(Qc,qr()),Xc="@ngrx/router-store/error",F1=Gr(Xc,qr()),Wm="@ngrx/router-store/navigated",B1=Gr(Wm,qr());function Qm(r,e){let t=e;switch(t.type){case Wc:case Xc:case Qc:return{state:t.payload.routerState,navigationId:t.payload.event.id};default:return r}}var Ss=class{serialize(e){return{root:this.serializeRoute(e.root),url:e.url}}serializeRoute(e){let t=e.children.map(n=>this.serializeRoute(n));return{params:e.params,data:e.data,url:e.url,outlet:e.outlet,title:e.title,routeConfig:e.routeConfig?{path:e.routeConfig.path,pathMatch:e.routeConfig.pathMatch,redirectTo:e.routeConfig.redirectTo,outlet:e.routeConfig.outlet,title:typeof e.routeConfig.title=="string"?e.routeConfig.title:void 0}:null,queryParams:e.queryParams,fragment:e.fragment,firstChild:t[0],children:t}}},Zc=function(r){return r[r.PreActivation=1]="PreActivation",r[r.PostActivation=2]="PostActivation",r}(Zc||{}),HT="router",Ym=new Oe("@ngrx/router-store Internal Configuration"),Xm=new Oe("@ngrx/router-store Configuration"),ki=function(r){return r[r.Full=0]="Full",r[r.Minimal=1]="Minimal",r}(ki||{});function GT(r){return b({stateKey:HT,serializer:Ss,navigationActionTiming:Zc.PreActivation},r)}var _s=class{serialize(e){return{root:this.serializeRoute(e.root),url:e.url}}serializeRoute(e){let t=e.children.map(n=>this.serializeRoute(n));return{params:e.params,paramMap:e.paramMap,data:e.data,url:e.url,outlet:e.outlet,title:e.title,routeConfig:e.routeConfig?{component:e.routeConfig.component,path:e.routeConfig.path,pathMatch:e.routeConfig.pathMatch,redirectTo:e.routeConfig.redirectTo,outlet:e.routeConfig.outlet,title:e.routeConfig.title}:null,queryParams:e.queryParams,queryParamMap:e.queryParamMap,fragment:e.fragment,component:e.routeConfig?e.routeConfig.component:void 0,root:void 0,parent:void 0,firstChild:t[0],pathFromRoot:void 0,children:t}}},bs=class{},Yt=function(r){return r[r.NONE=1]="NONE",r[r.ROUTER=2]="ROUTER",r[r.STORE=3]="STORE",r}(Yt||{}),Hm=(()=>{class r{constructor(t,n,i,o,s,a){this.store=t,this.router=n,this.serializer=i,this.errorHandler=o,this.config=s,this.activeRuntimeChecks=a,this.lastEvent=null,this.routerState=null,this.trigger=Yt.NONE,this.stateKey=this.config.stateKey,!$l()&&Kr()&&(a?.strictActionSerializability||a?.strictStateSerializability)&&this.serializer instanceof _s&&console.warn("@ngrx/router-store: The serializability runtime checks cannot be enabled with the FullRouterStateSerializer. The FullRouterStateSerializer has an unserializable router state and actions that are not serializable. To use the serializability runtime checks either use the MinimalRouterStateSerializer or implement a custom router state serializer."),this.setUpStoreStateListener(),this.setUpRouterEventsListener()}setUpStoreStateListener(){this.store.pipe(jl(this.stateKey),ut(this.store)).subscribe(([t,n])=>{this.navigateIfNeeded(t,n)})}navigateIfNeeded(t,n){if(!t||!t.state||this.trigger===Yt.ROUTER||this.lastEvent instanceof Xs)return;let i=t.state.url;qT(this.router.url,i)||(this.storeState=n,this.trigger=Yt.STORE,this.router.navigateByUrl(i).catch(o=>{this.errorHandler.handleError(o)}))}setUpRouterEventsListener(){let t=this.config.navigationActionTiming===Zc.PostActivation,n;this.router.events.pipe(ut(this.store)).subscribe(([i,o])=>{this.lastEvent=i,i instanceof Xs?(this.routerState=this.serializer.serialize(this.router.routerState.snapshot),this.trigger!==Yt.STORE&&(this.storeState=o,this.dispatchRouterRequest(i))):i instanceof Js?(n=i,!t&&this.trigger!==Yt.STORE&&this.dispatchRouterNavigation(i)):i instanceof bl?(this.dispatchRouterCancel(i),this.reset()):i instanceof Zs?(this.dispatchRouterError(i),this.reset()):i instanceof to&&(this.trigger!==Yt.STORE&&(t&&this.dispatchRouterNavigation(n),this.dispatchRouterNavigated(i)),this.reset())})}dispatchRouterRequest(t){this.dispatchRouterAction(qm,{event:t})}dispatchRouterNavigation(t){let n=this.serializer.serialize(t.state);this.dispatchRouterAction(Wc,{routerState:n,event:new Js(t.id,t.url,t.urlAfterRedirects,n)})}dispatchRouterCancel(t){this.dispatchRouterAction(Qc,{storeState:this.storeState,event:t})}dispatchRouterError(t){this.dispatchRouterAction(Xc,{storeState:this.storeState,event:new Zs(t.id,t.url,`${t}`)})}dispatchRouterNavigated(t){let n=this.serializer.serialize(this.router.routerState.snapshot);this.dispatchRouterAction(Wm,{event:t,routerState:n})}dispatchRouterAction(t,n){this.trigger=Yt.ROUTER;try{this.store.dispatch({type:t,payload:P(b({routerState:this.routerState},n),{event:this.config.routerState===ki.Full?n.event:{id:n.event.id,url:n.event.url,urlAfterRedirects:n.event.urlAfterRedirects}})})}finally{this.trigger=Yt.NONE}}reset(){this.trigger=Yt.NONE,this.storeState=null,this.routerState=null}static{this.\u0275fac=function(n){return new(n||r)(y(Tt),y(Hr),y(bs),y(Yi),y(Xm),y(Ll))}}static{this.\u0275prov=N({token:r,factory:r.\u0275fac})}}return r})();function qT(r,e){return Gm(r)===Gm(e)}function Gm(r){return r?.length>0&&r[r.length-1]==="/"?r.substring(0,r.length-1):r}function WT(r={}){return Rn([{provide:Ym,useValue:r},{provide:Xm,useFactory:GT,deps:[Ym]},{provide:bs,useClass:r.serializer?r.serializer:r.routerState===ki.Full?_s:Ss},{provide:xn,multi:!0,useFactory(){return()=>Se(Hm)}},Hm])}var Zm=(()=>{class r{static forRoot(t={}){return{ngModule:r,providers:[WT(t)]}}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=tt({type:r})}static{this.\u0275inj=Je({})}}return r})();var Jm={router:Qm,terms:ud,appTitle:Hl,schools:id,programs:nd,configurations:ql,peConfigurableSessions:ed,coursePrefixes:Wl,programDetails:rd,sessions:ad,programCourseList:td,courses:Ql,geCategoryDetails:Zl,geCategoryCourseList:Xl,geGroups:Jl,search:od,sectionFees:sd,simpleSyllabus:cd};var eg=[];var tg=(()=>{class r{constructor(t,n){this.actions$=t,this.coursesService=n,this.loadCourse$=Q(()=>this.actions$.pipe(Z(Ln.loadCourse),w(i=>i),Ee(i=>this.coursesService.getCourse(i.termCode,i.courseCode).pipe(w(o=>o?Ln.loadCourseSuccess({course:o,concatenatedKey:o.termCode+o.matchedCourseCode?.prefix+o.matchedCourseCode?.number+(o.sequence?o.sequence:"")}):Ln.loadNotFound({notFound:"notFound"})),ae(o=>X(Ln.loadCourseFailure({error:o})))))))}static{this.\u0275fac=function(n){return new(n||r)(y(Ne),y(_r))}}static{this.\u0275prov=N({token:r,factory:r.\u0275fac})}}return r})();var rg=(()=>{class r{constructor(t,n){this.actions$=t,this.geService=n,this.loadGeGroupsForTermCode$=Q(()=>this.actions$.pipe(Z(ao.loadGeGroupsByTermCode),w(i=>i),Ee(i=>this.geService.getByTermCode(i.termCode).pipe(w(o=>ao.loadGeGroupsByTermCodeSuccess({geGroups:o,termCode:i.termCode})),ir(5),ae(o=>X(ao.loadGeGroupsByTermCodeFailure({error:o})))))))}static{this.\u0275fac=function(n){return new(n||r)(y(Ne),y(fd))}}static{this.\u0275prov=N({token:r,factory:r.\u0275fac})}}return r})();var ng=(()=>{class r{constructor(t,n){this.actions$=t,this.coursesService=n,this.loadProgramCourseList$=Q(()=>this.actions$.pipe(Z(co.loadProgramCourseList),w(i=>i),Ee(i=>this.coursesService.getCourses(i.termCode,i.schoolCode,i.programCode).pipe(w(o=>co.loadProgramCourseListSuccess({programCourseList:o,concatenatedKey:i.termCode+i.schoolCode+i.programCode})),ae(o=>X(co.loadProgramCourseListFailure({error:o})))))))}static{this.\u0275fac=function(n){return new(n||r)(y(Ne),y(_r))}}static{this.\u0275prov=N({token:r,factory:r.\u0275fac})}}return r})();var ig=(()=>{class r{constructor(t,n){this.actions$=t,this.programsService=n,this.loadProgramsForTermCode$=Q(()=>this.actions$.pipe(Z(uo.loadProgramsByTermCode),w(i=>i),Ee(i=>this.programsService.getByTermCode(i.termCode).pipe(w(o=>uo.programsInsertedForTerm({programs:o,termCode:i.termCode})),ir(5),ae(o=>X(uo.loadProgramsByTermCodeFailure({error:o})))))))}static{this.\u0275fac=function(n){return new(n||r)(y(Ne),y(io))}}static{this.\u0275prov=N({token:r,factory:r.\u0275fac})}}return r})();var Ts=(()=>{class r{constructor(t){this.apiService=t}getByTermCode(t){return this.apiService.apiSchoolsTermCode(t||0).pipe(w(n=>n.map(i=>i.toJSON())))}static{this.\u0275fac=function(n){return new(n||r)(y(ro))}}static{this.\u0275prov=N({token:r,factory:r.\u0275fac})}}return r})();var og=(()=>{class r{constructor(t,n,i){this.actions$=t,this.schoolsService=n,this.store=i,this.loadSchoolsByTermCode$=Q(()=>this.actions$.pipe(Z(Pn.loadSchoolsByTermCode),w(o=>o),Ee(o=>this.schoolsService.getByTermCode(o.termCode).pipe(w(s=>Pn.loadSchoolsByTermCodeSuccess({schools:s,termCode:o.termCode})),ir(5),ae(s=>X(Pn.loadSchoolsByTermCodeFailure({error:s}))))))),this.removeSchoolsByTermCode$=Q(()=>this.actions$.pipe(Z(W.deleteSuccess),w(o=>o.term.termCode),hd(o=>this.store.select(pd({termCode:o}))),fe(([o,s])=>s!=null&&!!s.length),w(([o,s])=>Pn.removeSchoolsByTermCode({schools:s,termCode:o}))))}static{this.\u0275fac=function(n){return new(n||r)(y(Ne),y(Ts),y(Tt))}}static{this.\u0275prov=N({token:r,factory:r.\u0275fac})}}return r})();var sg=(()=>{class r{constructor(t,n){this.actions$=t,this.peService=n,this.loadSessionByRnrSessionId$=Q(()=>this.actions$.pipe(Z(ia.loadSessionByRnrSessionId),w(i=>i),Ee(i=>this.peService.getSessionByRnrSessionId(i.rnrSessionId).pipe(w(o=>ia.sessionInserted({session:o,rnrSessionId:i.rnrSessionId}))))))}static{this.\u0275fac=function(n){return new(n||r)(y(Ne),y(no))}}static{this.\u0275prov=N({token:r,factory:r.\u0275fac})}}return r})();var ag=(()=>{class r{constructor(t,n,i,o,s,a){this.actions$=t,this.termsService=n,this.toastNotificationService=i,this.alertService=o,this.matDialog=s,this.snackBar=a,this.loadActiveTerms$=Q(()=>this.actions$.pipe(Z(W.loadActive),bt(c=>this.termsService.getActive().pipe(w(u=>W.activeTermsInserted({terms:u})),ae(u=>X(W.loadActiveFailure({error:u}))))))),this.loadAllTerms$=Q(()=>this.actions$.pipe(Z(W.loadAll),bt(c=>this.termsService.getAll().pipe(w(u=>W.allTermsInserted({terms:u})),ir(5),ae(u=>X(W.loadAllFailure({error:u}))))))),this.loadSelectedTerm$=Q(()=>this.actions$.pipe(Z(W.loadSelectedTerm),bt(c=>this.termsService.loadSelectedTerm(c.termCode)),w(c=>W.updateSelectedTerm({selectedTerm:c})))),this.refreshTermByTermCode$=Q(()=>this.actions$.pipe(Z(W.refreshTermByTermCode),bt(c=>this.termsService.getByTermCode(c.termCode)),w(c=>W.refreshSuccess({term:c})))),this.createTerm$=Q(()=>this.actions$.pipe(Z(W.createTerm),w(c=>c),Ee(c=>this.termsService.add(c.newTerm).pipe(w(u=>W.createSuccess({term:u,dialogId:c.dialogId})),ae(u=>X(W.createFailure({term:c.newTerm,error:JSON.parse(u.response)}))))))),this.handleErrorCreating$=Q(()=>this.actions$.pipe(Z(W.createFailure),w(c=>{let u=c.term,l=`There was an error creating ${u.season} ${u.year}. Please try again shortly.`;this.alertService.error(l);let d=new hl;d.verticalPosition="top",d.horizontalPosition="center",d.panelClass="create-semester-snackbar-container",this.snackBar.open(c.error.detail,"OK",d),console.log("Error Creating Term: ",c.error.detail)})),{dispatch:!1}),this.handleSuccessCreating$=Q(()=>this.actions$.pipe(Z(W.createSuccess),w(c=>{let u=c.term,l=`Configuration for ${u.seasonName} ${u.year} has been saved`;this.alertService.success("Course scheduling remains to be done in SIS.",l),this.matDialog.getDialogById(c.dialogId)?.close(c.term)})),{dispatch:!1}),this.deleteTerm$=Q(()=>this.actions$.pipe(Z(W.deleteTerm),w(c=>c.term),Ee(c=>this.termsService.delete(c.termCode).pipe(w(u=>W.deleteSuccess({term:c})),ae(u=>X(W.deleteFailure({term:c,error:JSON.parse(u.response)}))))))),this.handleErrorDeleting$=Q(()=>this.actions$.pipe(Z(W.deleteFailure),w(c=>{let u=c.term,l=`There was an error deleting ${u.seasonName} ${u.year}. Please try again shortly.`;this.alertService.error(l),console.log("Error Deleting Term: ",c.error.detail)})),{dispatch:!1}),this.handleSuccessDeleting$=Q(()=>this.actions$.pipe(Z(W.deleteSuccess),w(c=>{let u=c.term,l=`${u.seasonName} ${u.year} has been deleted.`;return this.toastNotificationService.informational(l),Gl.removeConfigurationByTermCode({termCode:c.term.termCode})}))),this.updateTerm$=Q(()=>this.actions$.pipe(Z(W.updateTerm),w(c=>c),Ee(c=>this.termsService.update(c.term).pipe(w(u=>W.updateSuccess({term:u,dialogId:c.dialogId})),ae(u=>X(W.updateFailure({term:c.term,error:JSON.parse(u.response)}))))))),this.handleErrorUpdating$=Q(()=>this.actions$.pipe(Z(W.updateFailure),w(c=>{let u=c.term,l=`There was an error updating ${u.seasonName} ${u.year}. Please try again shortly.`;this.alertService.error(l),console.log("Error Updating Term: ",c.error.detail)})),{dispatch:!1}),this.handleSuccessUpdating$=Q(()=>this.actions$.pipe(Z(W.updateSuccess),w(c=>{let u=c.term,l=`${u.seasonName} ${u.year} has been updated.`;this.toastNotificationService.informational(l),this.matDialog.getDialogById(c.dialogId)?.close(c.term)})),{dispatch:!1}),this.refreshTermsOnChanges$=Q(()=>this.actions$.pipe(Z(W.createSuccess,W.updateSuccess,W.createSuccess,W.deleteSuccess),w(c=>W.loadAll())))}static{this.\u0275fac=function(n){return new(n||r)(y(Ne),y(Es),y(oo),y(kn),y(dl),y(Ji))}}static{this.\u0275prov=N({token:r,factory:r.\u0275fac})}}return r})();var Li=(()=>{class r{create(t,n,i,o){let s=typeof t=="string"?P(b({},o||{}),{entityName:t,entityOp:n,data:i}):t;return this.createCore(s)}createCore(t){let{entityName:n,entityOp:i,tag:o}=t;if(!n)throw new Error("Missing entity name for new action");if(i==null)throw new Error("Missing EntityOp for new action");return{type:this.formatActionType(i,o||n),payload:t}}createFromAction(t,n){return this.create(b(b({},t.payload),n))}formatActionType(t,n){return`[${n}] ${t}`}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=N({token:r,factory:r.\u0275fac})}}return r})(),As=class{constructor(e,t){this.entityName=e,this.selectId=t}mustBeEntity(e){let t=this.extractData(e);if(!t)return this.throwError(e,"should have a single entity.");let n=this.selectId(t);return this.isNotKeyType(n)&&this.throwError(e,"has a missing or invalid entity key (id)"),t}mustBeEntities(e){let t=this.extractData(e);return Array.isArray(t)?(t.forEach((n,i)=>{let o=this.selectId(n);if(this.isNotKeyType(o)){let s=`, item ${i+1}, does not have a valid entity key (id)`;this.throwError(e,s)}}),t):this.throwError(e,"should be an array of entities")}mustBeKey(e){let t=this.extractData(e);if(t===void 0)throw new Error("should be a single entity key");if(this.isNotKeyType(t))throw new Error("is not a valid key (id)");return t}mustBeKeys(e){let t=this.extractData(e);return Array.isArray(t)?(t.forEach((n,i)=>{if(this.isNotKeyType(n)){let o=`${this.entityName} ', item ${i+1}, is not a valid entity key (id)`;this.throwError(e,o)}}),t):this.throwError(e,"should be an array of entity keys (id)")}mustBeUpdate(e){let t=this.extractData(e);if(!t)return this.throwError(e,"should be a single entity update");let{id:n,changes:i}=t,o=this.selectId(i);return(this.isNotKeyType(n)||this.isNotKeyType(o))&&this.throwError(e,"has a missing or invalid entity key (id)"),t}mustBeUpdates(e){let t=this.extractData(e);return Array.isArray(t)?(t.forEach((n,i)=>{let{id:o,changes:s}=n,a=this.selectId(s);(this.isNotKeyType(o)||this.isNotKeyType(a))&&this.throwError(e,`, item ${i+1}, has a missing or invalid entity key (id)`)}),t):this.throwError(e,"should be an array of entity updates")}mustBeUpdateResponse(e){let t=this.extractData(e);if(!t)return this.throwError(e,"should be a single entity update");let{id:n,changes:i}=t,o=this.selectId(i);return(this.isNotKeyType(n)||this.isNotKeyType(o))&&this.throwError(e,"has a missing or invalid entity key (id)"),t}mustBeUpdateResponses(e){let t=this.extractData(e);return Array.isArray(t)?(t.forEach((n,i)=>{let{id:o,changes:s}=n,a=this.selectId(s);(this.isNotKeyType(o)||this.isNotKeyType(a))&&this.throwError(e,`, item ${i+1}, has a missing or invalid entity key (id)`)}),t):this.throwError(e,"should be an array of entity updates")}extractData(e){return e.payload&&e.payload.data}isNotKeyType(e){return typeof e!="string"&&typeof e!="number"}throwError(e,t){throw new Error(`${this.entityName} EntityAction guard for "${e.type}": payload ${t}`)}};function Pi(r){return r?.id}function dg(r){if(r==null)return[];if(Array.isArray(r[0])){let[e,...t]=r;r=[...e,...t]}return r}function fg(r){return r=r||Pi,function(t){let n=r(t);if(n==null)throw new Error("Primary key may not be null/undefined.");return t&&{id:n,changes:t}}}function cg(...r){let e=dg(r);switch(e.length){case 0:return fe(n=>n.payload&&n.payload.entityOp!=null);case 1:let t=e[0];return fe(n=>n.payload&&t===n.payload.entityOp);default:return fe(n=>{let i=n.payload&&n.payload.entityOp;return i&&e.some(o=>o===i)})}}function ug(...r){let e=dg(r);switch(e.length){case 0:return fe(n=>n.payload&&n.payload.entityName!=null);case 1:let t=e[0];return fe(n=>n.payload&&t===n.payload.entityName);default:return fe(n=>{let i=n.payload&&n.payload.entityName;return!!i&&e.some(o=>o===i)})}}var Xe=function(r){return r.Add="Add",r.Delete="Delete",r.Update="Update",r.Upsert="Upsert",r}(Xe||{}),Jc=class{add(e,t){return t=Array.isArray(t)?t:t?[t]:[],{entityName:e,op:Xe.Add,entities:t}}delete(e,t){let n=Array.isArray(t)?t:t?[t]:[];return{entityName:e,op:Xe.Delete,entities:n}}update(e,t){return t=Array.isArray(t)?t:t?[t]:[],{entityName:e,op:Xe.Update,entities:t}}upsert(e,t){return t=Array.isArray(t)?t:t?[t]:[],{entityName:e,op:Xe.Upsert,entities:t}}},nB=new Jc;function pg(r){r=r&&r.changes?r:{changes:[]};let e=r.changes.filter(t=>t!=null&&t.entities&&t.entities.length>0);return P(b({},r),{changes:e})}var we=function(r){return r[r.IgnoreChanges=0]="IgnoreChanges",r[r.PreserveChanges=1]="PreserveChanges",r[r.OverwriteChanges=2]="OverwriteChanges",r}(we||{}),de=function(r){return r.CLEAR_COLLECTIONS="@ngrx/data/entity-cache/clear-collections",r.LOAD_COLLECTIONS="@ngrx/data/entity-cache/load-collections",r.MERGE_QUERY_SET="@ngrx/data/entity-cache/merge-query-set",r.SET_ENTITY_CACHE="@ngrx/data/entity-cache/set-cache",r.SAVE_ENTITIES="@ngrx/data/entity-cache/save-entities",r.SAVE_ENTITIES_CANCEL="@ngrx/data/entity-cache/save-entities-cancel",r.SAVE_ENTITIES_CANCELED="@ngrx/data/entity-cache/save-entities-canceled",r.SAVE_ENTITIES_ERROR="@ngrx/data/entity-cache/save-entities-error",r.SAVE_ENTITIES_SUCCESS="@ngrx/data/entity-cache/save-entities-success",r}(de||{}),eu=class{constructor(e,t){this.type=de.CLEAR_COLLECTIONS,this.payload={collections:e,tag:t}}},tu=class{constructor(e,t){this.type=de.LOAD_COLLECTIONS,this.payload={collections:e,tag:t}}},ru=class{constructor(e,t,n){this.type=de.MERGE_QUERY_SET,this.payload={querySet:e,mergeStrategy:t===null?we.PreserveChanges:t,tag:n}}},nu=class{constructor(e,t){this.cache=e,this.type=de.SET_ENTITY_CACHE,this.payload={cache:e,tag:t}}},iu=class{constructor(e,t,n){this.type=de.SAVE_ENTITIES,n=n||{},e&&(e.tag=e.tag||n.tag),this.payload=P(b({changeSet:e,url:t},n),{tag:e.tag})}},ou=class{constructor(e,t,n,i){this.type=de.SAVE_ENTITIES_CANCEL,this.payload={correlationId:e,reason:t,entityNames:n,tag:i}}},su=class{constructor(e,t,n){this.type=de.SAVE_ENTITIES_CANCELED,this.payload={correlationId:e,reason:t,tag:n}}},au=class{constructor(e,t){this.type=de.SAVE_ENTITIES_ERROR;let n=t.payload.correlationId;this.payload={error:e,originalAction:t,correlationId:n}}},Di=class{constructor(e,t,n){this.type=de.SAVE_ENTITIES_SUCCESS,n=n||{},e&&(e.tag=e.tag||n.tag),this.payload=P(b({changeSet:e,url:t},n),{tag:e.tag})}},v=function(r){return r.CANCEL_PERSIST="@ngrx/data/cancel-persist",r.CANCELED_PERSIST="@ngrx/data/canceled-persist",r.QUERY_ALL="@ngrx/data/query-all",r.QUERY_ALL_SUCCESS="@ngrx/data/query-all/success",r.QUERY_ALL_ERROR="@ngrx/data/query-all/error",r.QUERY_LOAD="@ngrx/data/query-load",r.QUERY_LOAD_SUCCESS="@ngrx/data/query-load/success",r.QUERY_LOAD_ERROR="@ngrx/data/query-load/error",r.QUERY_MANY="@ngrx/data/query-many",r.QUERY_MANY_SUCCESS="@ngrx/data/query-many/success",r.QUERY_MANY_ERROR="@ngrx/data/query-many/error",r.QUERY_BY_KEY="@ngrx/data/query-by-key",r.QUERY_BY_KEY_SUCCESS="@ngrx/data/query-by-key/success",r.QUERY_BY_KEY_ERROR="@ngrx/data/query-by-key/error",r.SAVE_ADD_MANY="@ngrx/data/save/add-many",r.SAVE_ADD_MANY_ERROR="@ngrx/data/save/add-many/error",r.SAVE_ADD_MANY_SUCCESS="@ngrx/data/save/add-many/success",r.SAVE_ADD_ONE="@ngrx/data/save/add-one",r.SAVE_ADD_ONE_ERROR="@ngrx/data/save/add-one/error",r.SAVE_ADD_ONE_SUCCESS="@ngrx/data/save/add-one/success",r.SAVE_DELETE_MANY="@ngrx/data/save/delete-many",r.SAVE_DELETE_MANY_SUCCESS="@ngrx/data/save/delete-many/success",r.SAVE_DELETE_MANY_ERROR="@ngrx/data/save/delete-many/error",r.SAVE_DELETE_ONE="@ngrx/data/save/delete-one",r.SAVE_DELETE_ONE_SUCCESS="@ngrx/data/save/delete-one/success",r.SAVE_DELETE_ONE_ERROR="@ngrx/data/save/delete-one/error",r.SAVE_UPDATE_MANY="@ngrx/data/save/update-many",r.SAVE_UPDATE_MANY_SUCCESS="@ngrx/data/save/update-many/success",r.SAVE_UPDATE_MANY_ERROR="@ngrx/data/save/update-many/error",r.SAVE_UPDATE_ONE="@ngrx/data/save/update-one",r.SAVE_UPDATE_ONE_SUCCESS="@ngrx/data/save/update-one/success",r.SAVE_UPDATE_ONE_ERROR="@ngrx/data/save/update-one/error",r.SAVE_UPSERT_MANY="@ngrx/data/save/upsert-many",r.SAVE_UPSERT_MANY_SUCCESS="@ngrx/data/save/upsert-many/success",r.SAVE_UPSERT_MANY_ERROR="@ngrx/data/save/upsert-many/error",r.SAVE_UPSERT_ONE="@ngrx/data/save/upsert-one",r.SAVE_UPSERT_ONE_SUCCESS="@ngrx/data/save/upsert-one/success",r.SAVE_UPSERT_ONE_ERROR="@ngrx/data/save/upsert-one/error",r.ADD_ALL="@ngrx/data/add-all",r.ADD_MANY="@ngrx/data/add-many",r.ADD_ONE="@ngrx/data/add-one",r.REMOVE_ALL="@ngrx/data/remove-all",r.REMOVE_MANY="@ngrx/data/remove-many",r.REMOVE_ONE="@ngrx/data/remove-one",r.UPDATE_MANY="@ngrx/data/update-many",r.UPDATE_ONE="@ngrx/data/update-one",r.UPSERT_MANY="@ngrx/data/upsert-many",r.UPSERT_ONE="@ngrx/data/upsert-one",r.COMMIT_ALL="@ngrx/data/commit-all",r.COMMIT_MANY="@ngrx/data/commit-many",r.COMMIT_ONE="@ngrx/data/commit-one",r.UNDO_ALL="@ngrx/data/undo-all",r.UNDO_MANY="@ngrx/data/undo-many",r.UNDO_ONE="@ngrx/data/undo-one",r.SET_CHANGE_STATE="@ngrx/data/set-change-state",r.SET_COLLECTION="@ngrx/data/set-collection",r.SET_FILTER="@ngrx/data/set-filter",r.SET_LOADED="@ngrx/data/set-loaded",r.SET_LOADING="@ngrx/data/set-loading",r}(v||{}),cu="/success",mu="/error";function ZT(r){return r+mu}function hg(r){return r+cu}var yr=class extends Error{constructor(e,t){super(typeof e=="string"?e:JT(e)??void 0),this.error=e,this.requestData=t,this.name=this.constructor.name}};function JT(r){let{error:e,body:t,message:n}=r,i=null;return e?i=typeof e=="string"?e:e.message:n?i=n:t&&(i=typeof t=="string"?t:t.error),typeof i=="string"?i:i?JSON.stringify(i):null}var Cs=class{},bn=class{},mg=new Oe("@ngrx/data Plural Names"),ws=class{};var xs=class{},eA=(()=>{class r{constructor(t){this.pluralizer=t,this.knownHttpResourceUrls={}}getResourceUrls(t,n,i=!1){let o=this.knownHttpResourceUrls[t];if(!o){let s=i?n:tA(n);o={entityResourceUrl:`${s}/${t}/`.toLowerCase(),collectionResourceUrl:`${s}/${this.pluralizer.pluralize(t)}/`.toLowerCase()},this.registerHttpResourceUrls({[t]:o})}return o}entityResource(t,n,i){return this.getResourceUrls(t,n,i).entityResourceUrl}collectionResource(t,n){return this.getResourceUrls(t,n).collectionResourceUrl}registerHttpResourceUrls(t){this.knownHttpResourceUrls=b(b({},this.knownHttpResourceUrls),t||{})}static{this.\u0275fac=function(n){return new(n||r)(y(ws))}}static{this.\u0275prov=N({token:r,factory:r.\u0275fac})}}return r})();function tA(r){return r.replace(/^[/\s]+|[/\s]+$/g,"")}var uu=class{get name(){return this._name}constructor(e,t,n,i){this.http=t,this.httpUrlGenerator=n,this.getDelay=0,this.saveDelay=0,this.timeout=0,this.trailingSlashEndpoints=!1,this._name=`${e} DefaultDataService`,this.entityName=e;let{root:o="api",delete404OK:s=!0,getDelay:a=0,saveDelay:c=0,timeout:u=0,trailingSlashEndpoints:l=!1}=i||{};this.delete404OK=s,this.entityUrl=n.entityResource(e,o,l),this.entitiesUrl=n.collectionResource(e,o),this.getDelay=a,this.saveDelay=c,this.timeout=u}add(e,t){let n=e||new Error(`No "${this.entityName}" entity to add`);return this.execute("POST",this.entityUrl,n,null,t)}delete(e,t){let n;return e==null&&(n=new Error(`No "${this.entityName}" key to delete`)),this.execute("DELETE",this.entityUrl+e,n,null,t).pipe(w(i=>e))}getAll(e){return this.execute("GET",this.entitiesUrl,null,null,e)}getById(e,t){let n;return e==null&&(n=new Error(`No "${this.entityName}" key to get`)),this.execute("GET",this.entityUrl+e,n,null,t)}getWithQuery(e,t){let n=typeof e=="string"?{fromString:e}:{fromObject:e},i=new Ys(n);return this.execute("GET",this.entitiesUrl,void 0,{params:i},t)}update(e,t){let n=e&&e.id,i=n==null?new Error(`No "${this.entityName}" update data or id`):e.changes;return this.execute("PUT",this.entityUrl+n,i,null,t)}upsert(e,t){let n=e||new Error(`No "${this.entityName}" entity to upsert`);return this.execute("POST",this.entityUrl,n,null,t)}execute(e,t,n,i,o){let s;o&&(s={headers:o?.httpHeaders?new sl(o?.httpHeaders):void 0,params:o?.httpParams?new Ys(o?.httpParams):void 0});let a;(i||s)&&(Kr()&&i&&s&&console.warn("@ngrx/data: options.httpParams will be merged with queryParams when both are are provided to getWithQuery(). In the event of a conflict HttpOptions.httpParams will override queryParams`. The queryParams parameter of getWithQuery() will be removed in next major release."),a=P(b({},i),{headers:s?.headers??i?.headers,params:s?.params??i?.params}));let c={method:e,url:t,data:n,options:a};if(n instanceof Error)return this.handleError(c)(n);let u;switch(e){case"DELETE":{u=this.http.delete(t,a),this.saveDelay&&(u=u.pipe(Ht(this.saveDelay)));break}case"GET":{u=this.http.get(t,a),this.getDelay&&(u=u.pipe(Ht(this.getDelay)));break}case"POST":{u=this.http.post(t,n,a),this.saveDelay&&(u=u.pipe(Ht(this.saveDelay)));break}case"PUT":{u=this.http.put(t,n,a),this.saveDelay&&(u=u.pipe(Ht(this.saveDelay)));break}default:{let l=new Error("Unimplemented HTTP method, "+e);u=nr(l)}}return this.timeout&&(u=u.pipe(An(this.timeout+this.saveDelay))),u.pipe(ae(this.handleError(c)))}handleError(e){return t=>{let n=this.handleDelete404(t,e);if(n)return n;let i=new yr(t,e);return nr(i)}}handleDelete404(e,t){if(e.status===404&&t.method==="DELETE"&&this.delete404OK)return X({})}},gg=(()=>{class r{constructor(t,n,i){this.http=t,this.httpUrlGenerator=n,this.config=i,i=i||{},n.registerHttpResourceUrls(i.entityHttpResourceUrls)}create(t){return new uu(t,this.http,this.httpUrlGenerator,this.config)}static{this.\u0275fac=function(n){return new(n||r)(y(Mn),y(xs),y(Cs,8))}}static{this.\u0275prov=N({token:r,factory:r.\u0275fac})}}return r})();function rA(r){let e=r.entityName;if(!e)throw new Error("Missing required entityName");r.entityName=e=e.trim();let t=r.selectId||Pi,n=r.sortComparer=r.sortComparer||!1,i=Yl({selectId:t,sortComparer:n}),o=r.entityDispatcherOptions||{},s=i.getInitialState(b({entityName:e,filter:"",loaded:!1,loading:!1,changeState:{}},r.additionalCollectionState||{})),a=r.noChangeTracking===!0;return{entityName:e,entityAdapter:i,entityDispatcherOptions:o,initialState:s,metadata:r,noChangeTracking:a,selectId:t,sortComparer:n}}var vg=new Oe("@ngrx/data Entity Metadata"),Ui=(()=>{class r{constructor(t){this.definitions={},t&&t.forEach(n=>this.registerMetadataMap(n))}getDefinition(t,n=!0){t=t.trim();let i=this.definitions[t];if(!i&&n)throw new Error(`No EntityDefinition for entity type "${t}".`);return i}registerMetadata(t){if(t){let n=rA(t);this.registerDefinition(n)}}registerMetadataMap(t={}){Object.keys(t||{}).forEach(n=>this.registerMetadata(b({entityName:n},t[n])))}registerDefinition(t){this.definitions[t.entityName]=t}registerDefinitions(t){Object.assign(this.definitions,t)}static{this.\u0275fac=function(n){return new(n||r)(y(vg,8))}}static{this.\u0275prov=N({token:r,factory:r.\u0275fac})}}return r})(),lg=Xe.Update,yg=(()=>{class r{constructor(t,n,i){this.entityDefinitionService=t,this.http=n,this.idSelectors={},this.saveDelay=0,this.timeout=0;let{saveDelay:o=0,timeout:s=0}=i||{};this.saveDelay=o,this.timeout=s}saveEntities(t,n){t=this.filterChangeSet(t),t=this.flattenUpdates(t);let i=this.http.post(n,t).pipe(w(o=>this.restoreUpdates(o)),ae(this.handleError({method:"POST",url:n,data:t})));return this.timeout&&(i=i.pipe(An(this.timeout))),this.saveDelay&&(i=i.pipe(Ht(this.saveDelay))),i}handleError(t){return n=>{let i=new yr(n,t);return nr(i)}}filterChangeSet(t){return pg(t)}flattenUpdates(t){let n=t.changes;if(n.length===0)return t;let i=!1;return n=n.map(o=>o.op===lg&&o.entities.length>0?(i=!0,P(b({},o),{entities:o.entities.map(s=>s.changes)})):o),i?P(b({},t),{changes:n}):t}restoreUpdates(t){if(t==null)return t;let n=t.changes;if(n.length===0)return t;let i=!1;return n=n.map(o=>{if(o.op===lg){i=!0;let s=this.getIdSelector(o.entityName);return P(b({},o),{entities:o.entities.map(a=>({id:s(a),changes:a}))})}else return o}),i?P(b({},t),{changes:n}):t}getIdSelector(t){let n=this.idSelectors[t];return n||(n=this.entityDefinitionService.getDefinition(t).selectId,this.idSelectors[t]=n),n}static{this.\u0275fac=function(n){return new(n||r)(y(Ui),y(Mn),y(Cs,8))}}static{this.\u0275prov=N({token:r,factory:r.\u0275fac})}}return r})(),Eg=(()=>{class r{constructor(t){this.defaultDataServiceFactory=t,this.services={}}getService(t){t=t.trim();let n=this.services[t];return n||(n=this.defaultDataServiceFactory.create(t),this.services[t]=n),n}registerService(t,n){this.services[t.trim()]=n}registerServices(t){this.services=b(b({},this.services),t)}static{this.\u0275fac=function(n){return new(n||r)(y(gg))}}static{this.\u0275prov=N({token:r,factory:r.\u0275fac})}}return r})(),Rs=class{},nA=(()=>{class r{constructor(t,n){this.logger=t,this.entityActionFactory=n}handleSuccess(t){let n=hg(t.payload.entityOp);return i=>this.entityActionFactory.createFromAction(t,{entityOp:n,data:i})}handleError(t){let n=ZT(t.payload.entityOp);return i=>{let s={error:i instanceof yr?i:new yr(i,null),originalAction:t};return this.logger.error(s),this.entityActionFactory.createFromAction(t,{entityOp:n,data:s})}}static{this.\u0275fac=function(n){return new(n||r)(y(bn),y(Li))}}static{this.\u0275prov=N({token:r,factory:r.\u0275fac})}}return r})(),Is=class{constructor(e){this.message=e,this.message=e||"Canceled by user"}},gu=(()=>{class r{constructor(){this.seed=0,this.prefix="CRID"}next(){return this.seed+=1,this.prefix+this.seed}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=N({token:r,factory:r.\u0275fac})}}return r})(),vu=(()=>{class r{constructor(){this.optimisticAdd=!1,this.optimisticDelete=!0,this.optimisticUpdate=!1,this.optimisticUpsert=!1,this.optimisticSaveEntities=!1}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=N({token:r,factory:r.\u0275fac})}}return r})(),iA=(()=>{class r{constructor(t,n,i,o){this.correlationIdGenerator=t,this.defaultDispatcherOptions=n,this.store=o,this.reducedActions$=i.pipe(Ke(1)),this.raSubscription=this.reducedActions$.subscribe()}dispatch(t){return this.store.dispatch(t),t}cancelSaveEntities(t,n,i,o){if(!t)throw new Error("Missing correlationId");let s=new ou(t,n,i,o);this.dispatch(s)}clearCollections(t,n){this.dispatch(new eu(t,n))}loadCollections(t,n){this.dispatch(new tu(t,n))}mergeQuerySet(t,n,i){this.dispatch(new ru(t,n,i))}setEntityCache(t,n){this.dispatch(new nu(t,n))}saveEntities(t,n,i){let o=Array.isArray(t)?{changes:t}:t;i=i||{};let s=i.correlationId==null?this.correlationIdGenerator.next():i.correlationId,a=i.isOptimistic==null?this.defaultDispatcherOptions.optimisticSaveEntities||!1:i.isOptimistic===!0,c=i.tag||"Save Entities";i=P(b({},i),{correlationId:s,isOptimistic:a,tag:c});let u=new iu(o,n,i);return this.dispatch(u),this.getSaveEntitiesResponseData$(i.correlationId).pipe(Ke(1))}getSaveEntitiesResponseData$(t){return this.reducedActions$.pipe(fe(n=>n.type===de.SAVE_ENTITIES_SUCCESS||n.type===de.SAVE_ENTITIES_ERROR||n.type===de.SAVE_ENTITIES_CANCEL),fe(n=>t===n.payload.correlationId),wn(1),Ee(n=>n.type===de.SAVE_ENTITIES_CANCEL?nr(new Is(n.payload.reason)):n.type===de.SAVE_ENTITIES_SUCCESS?X(n.payload.changeSet):nr(n.payload)))}static{this.\u0275fac=function(n){return new(n||r)(y(gu),y(vu),y(Dn),y(Tt))}}static{this.\u0275prov=N({token:r,factory:r.\u0275fac})}}return r})(),lu=class{constructor(e,t,n,i=Pi,o,s,a,c){this.entityName=e,this.entityActionFactory=t,this.store=n,this.selectId=i,this.defaultDispatcherOptions=o,this.reducedActions$=s,this.correlationIdGenerator=c,this.guard=new As(e,i),this.toUpdate=fg(i);let u=sr(a,l=>l[e]);this.entityCollection$=n.select(u)}createEntityAction(e,t,n){return this.entityActionFactory.create(b({entityName:this.entityName,entityOp:e,data:t},n))}createAndDispatch(e,t,n){let i=this.createEntityAction(e,t,n);return this.dispatch(i),i}dispatch(e){return this.store.dispatch(e),e}add(e,t){t=this.setSaveEntityActionOptions(t,this.defaultDispatcherOptions.optimisticAdd);let n=this.createEntityAction(v.SAVE_ADD_ONE,e,t);return t.isOptimistic&&this.guard.mustBeEntity(n),this.dispatch(n),this.getResponseData$(t.correlationId).pipe(ut(this.entityCollection$),w(([i,o])=>o.entities[this.selectId(i)]),Ke(1))}cancel(e,t,n){if(!e)throw new Error("Missing correlationId");this.createAndDispatch(v.CANCEL_PERSIST,t,{correlationId:e})}delete(e,t){t=this.setSaveEntityActionOptions(t,this.defaultDispatcherOptions.optimisticDelete);let n=this.getKey(e),i=this.createEntityAction(v.SAVE_DELETE_ONE,n,t);return this.guard.mustBeKey(i),this.dispatch(i),this.getResponseData$(t.correlationId).pipe(w(()=>n),Ke(1))}getAll(e){e=this.setQueryEntityActionOptions(e);let t=this.createEntityAction(v.QUERY_ALL,null,e);return this.dispatch(t),this.getResponseData$(e.correlationId).pipe(ut(this.entityCollection$),w(([n,i])=>n.reduce((o,s)=>{let a=i.entities[this.selectId(s)];return a&&o.push(a),o},[])),Ke(1))}getByKey(e,t){t=this.setQueryEntityActionOptions(t);let n=this.createEntityAction(v.QUERY_BY_KEY,e,t);return this.dispatch(n),this.getResponseData$(t.correlationId).pipe(ut(this.entityCollection$),w(([i,o])=>o.entities[this.selectId(i)]),Ke(1))}getWithQuery(e,t){t=this.setQueryEntityActionOptions(t);let n=this.createEntityAction(v.QUERY_MANY,e,t);return this.dispatch(n),this.getResponseData$(t.correlationId).pipe(ut(this.entityCollection$),w(([i,o])=>i.reduce((s,a)=>{let c=o.entities[this.selectId(a)];return c&&s.push(c),s},[])),Ke(1))}load(e){e=this.setQueryEntityActionOptions(e);let t=this.createEntityAction(v.QUERY_LOAD,null,e);return this.dispatch(t),this.getResponseData$(e.correlationId).pipe(Ke(1))}loadWithQuery(e,t){t=this.setQueryEntityActionOptions(t);let n=this.createEntityAction(v.QUERY_MANY,e,t);return this.dispatch(n),this.getResponseData$(t.correlationId).pipe(Ke(1))}update(e,t){let n=this.toUpdate(e);t=this.setSaveEntityActionOptions(t,this.defaultDispatcherOptions.optimisticUpdate);let i=this.createEntityAction(v.SAVE_UPDATE_ONE,n,t);return t.isOptimistic&&this.guard.mustBeUpdate(i),this.dispatch(i),this.getResponseData$(t.correlationId).pipe(w(o=>o.changes),ut(this.entityCollection$),w(([o,s])=>s.entities[this.selectId(o)]),Ke(1))}upsert(e,t){t=this.setSaveEntityActionOptions(t,this.defaultDispatcherOptions.optimisticUpsert);let n=this.createEntityAction(v.SAVE_UPSERT_ONE,e,t);return t.isOptimistic&&this.guard.mustBeEntity(n),this.dispatch(n),this.getResponseData$(t.correlationId).pipe(ut(this.entityCollection$),w(([i,o])=>o.entities[this.selectId(i)]),Ke(1))}addAllToCache(e,t){this.createAndDispatch(v.ADD_ALL,e,t)}addOneToCache(e,t){this.createAndDispatch(v.ADD_ONE,e,t)}addManyToCache(e,t){this.createAndDispatch(v.ADD_MANY,e,t)}clearCache(e){this.createAndDispatch(v.REMOVE_ALL,void 0,e)}removeOneFromCache(e,t){this.createAndDispatch(v.REMOVE_ONE,this.getKey(e),t)}removeManyFromCache(e,t){if(!e||e.length===0)return;let n=typeof e[0]=="object"?e.map(i=>this.getKey(i)):e;this.createAndDispatch(v.REMOVE_MANY,n,t)}updateOneInCache(e,t){let n=this.toUpdate(e);this.createAndDispatch(v.UPDATE_ONE,n,t)}updateManyInCache(e,t){if(!e||e.length===0)return;let n=e.map(i=>this.toUpdate(i));this.createAndDispatch(v.UPDATE_MANY,n,t)}upsertOneInCache(e,t){this.createAndDispatch(v.UPSERT_ONE,e,t)}upsertManyInCache(e,t){!e||e.length===0||this.createAndDispatch(v.UPSERT_MANY,e,t)}setFilter(e){this.createAndDispatch(v.SET_FILTER,e)}setLoaded(e){this.createAndDispatch(v.SET_LOADED,!!e)}setLoading(e){this.createAndDispatch(v.SET_LOADING,!!e)}getKey(e){return typeof e=="object"?this.selectId(e):e}getResponseData$(e){return this.reducedActions$.pipe(fe(t=>!!t.payload),fe(t=>{let{correlationId:n,entityName:i,entityOp:o}=t.payload;return i===this.entityName&&n===e&&(o.endsWith(cu)||o.endsWith(mu)||o===v.CANCEL_PERSIST)}),wn(1),Ee(t=>{let{entityOp:n}=t.payload;return n===v.CANCEL_PERSIST?nr(new Is(t.payload.data)):n.endsWith(cu)?X(t.payload.data):nr(t.payload.data.error)}))}setQueryEntityActionOptions(e){e=e||{};let t=e.correlationId==null?this.correlationIdGenerator.next():e.correlationId;return P(b({},e),{correlationId:t})}setSaveEntityActionOptions(e,t){e=e||{};let n=e.correlationId==null?this.correlationIdGenerator.next():e.correlationId,i=e.isOptimistic==null?t||!1:e.isOptimistic===!0;return P(b({},e),{correlationId:n,isOptimistic:i})}},Ns="entityCache",yu=new Oe("@ngrx/data Entity Cache Name"),Sg=new Oe("@ngrx/data Entity Cache Meta Reducers"),_g=new Oe("@ngrx/data Entity Collection Meta Reducers"),oA=new Oe("@ngrx/data Initial Entity Cache State"),Ms=new Oe("@ngrx/data Entity Cache Selector"),sA={provide:Ms,useFactory:bg,deps:[[new Wu,yu]]};function bg(r){return r=r||Ns,na(r)}var Eu=(()=>{class r{constructor(t,n,i,o,s,a){this.entityActionFactory=t,this.store=n,this.entityDispatcherDefaultOptions=i,this.entityCacheSelector=s,this.correlationIdGenerator=a,this.reducedActions$=o.pipe(Ke(1)),this.raSubscription=this.reducedActions$.subscribe()}create(t,n=Pi,i={}){let o=b(b({},this.entityDispatcherDefaultOptions),i);return new lu(t,this.entityActionFactory,this.store,n,o,this.reducedActions$,this.entityCacheSelector,this.correlationIdGenerator)}ngOnDestroy(){this.raSubscription.unsubscribe()}static{this.\u0275fac=function(n){return new(n||r)(y(Li),y(Tt),y(vu),y(Dn),y(Ms),y(gu))}}static{this.\u0275prov=N({token:r,factory:r.\u0275fac})}}return r})(),Tg=new Oe("@ngrx/data Entity Effects Scheduler"),Ag=(()=>{class r{constructor(t,n,i,o,s){this.actions=t,this.dataService=n,this.entityActionFactory=i,this.logger=o,this.scheduler=s,this.responseDelay=10,this.saveEntitiesCancel$=Q(()=>this.actions.pipe(Z(de.SAVE_ENTITIES_CANCEL),fe(a=>a.payload.correlationId!=null)),{dispatch:!1}),this.saveEntities$=Q(()=>this.actions.pipe(Z(de.SAVE_ENTITIES),Ee(a=>this.saveEntities(a))))}saveEntities(t){let n=t.payload.error;if(n)return this.handleSaveEntitiesError$(t)(n);try{let i=pg(t.payload.changeSet),{correlationId:o,mergeStrategy:s,tag:a,url:c}=t.payload,u={correlationId:o,mergeStrategy:s,tag:a};if(i.changes.length===0)return X(new Di(i,c,u));let l=this.saveEntitiesCancel$.pipe(fe(f=>o===f.payload.correlationId),w(f=>new su(o,f.payload.reason,f.payload.tag))),d=this.dataService.saveEntities(i,c).pipe(bt(f=>this.handleSaveEntitiesSuccess$(t,this.entityActionFactory)(f)),ae(this.handleSaveEntitiesError$(t)));return Vs(l,d)}catch(i){return this.handleSaveEntitiesError$(t)(i)}}handleSaveEntitiesError$(t){return n=>{let i=n instanceof yr?n:new yr(n,null);return X(new au(i,t)).pipe(Ht(this.responseDelay,this.scheduler||zi))}}handleSaveEntitiesSuccess$(t,n){let{url:i,correlationId:o,mergeStrategy:s,tag:a}=t.payload,c={correlationId:o,mergeStrategy:s,tag:a};return u=>{if(u)return X(new Di(u,i,c));if(u=t.payload.changeSet,!t.payload.isOptimistic)return X(new Di(u,i,c));let l=u.changes.reduce((d,f)=>d.indexOf(f.entityName)===-1?d.concat(f.entityName):d,[]);return Cn(l.map(d=>n.create(d,v.SET_LOADING,!1)))}}static{this.\u0275fac=function(n){return new(n||r)(y(Ne),y(yg),y(Li),y(bn),y(Tg,8))}}static{this.\u0275prov=N({token:r,factory:r.\u0275fac})}}return r})(),aA=[v.QUERY_ALL,v.QUERY_LOAD,v.QUERY_BY_KEY,v.QUERY_MANY,v.SAVE_ADD_ONE,v.SAVE_DELETE_ONE,v.SAVE_UPDATE_ONE,v.SAVE_UPSERT_ONE],Cg=(()=>{class r{constructor(t,n,i,o,s){this.actions=t,this.dataService=n,this.entityActionFactory=i,this.resultHandler=o,this.scheduler=s,this.responseDelay=10,this.cancel$=Q(()=>this.actions.pipe(cg(v.CANCEL_PERSIST),w(a=>a.payload.correlationId),fe(a=>a!=null)),{dispatch:!1}),this.persist$=Q(()=>this.actions.pipe(cg(aA),Ee(a=>this.persist(a))))}persist(t){if(t.payload.skip)return this.handleSkipSuccess$(t);if(t.payload.error)return this.handleError$(t)(t.payload.error);try{let n=this.cancel$.pipe(fe(o=>t.payload.correlationId===o),w(o=>this.entityActionFactory.createFromAction(t,{entityOp:v.CANCELED_PERSIST}))),i=this.callDataService(t).pipe(w(this.resultHandler.handleSuccess(t)),ae(this.handleError$(t)));return Vs(n,i)}catch(n){return this.handleError$(t)(n)}}callDataService(t){let{entityName:n,entityOp:i,data:o,httpOptions:s}=t.payload,a=this.dataService.getService(n);switch(i){case v.QUERY_ALL:case v.QUERY_LOAD:return a.getAll(s);case v.QUERY_BY_KEY:return a.getById(o,s);case v.QUERY_MANY:return a.getWithQuery(o,s);case v.SAVE_ADD_ONE:return a.add(o,s);case v.SAVE_DELETE_ONE:return a.delete(o,s);case v.SAVE_UPDATE_ONE:let{id:c,changes:u}=o;return a.update(o,s).pipe(w(l=>l&&Object.keys(l).length>0?{id:c,changes:b(b({},u),l),changed:!0}:{id:c,changes:u,changed:!1}));case v.SAVE_UPSERT_ONE:return a.upsert(o,s).pipe(w(l=>l&&Object.keys(l).length>0?l:o));default:throw new Error(`Persistence action "${i}" is not implemented.`)}}handleError$(t){return n=>X(this.resultHandler.handleError(t)(n)).pipe(Ht(this.responseDelay,this.scheduler||zi))}handleSkipSuccess$(t){let n=hg(t.payload.entityOp),i=this.entityActionFactory.createFromAction(t,{entityOp:n});return X(i).pipe(Ht(this.responseDelay,this.scheduler||zi))}static{this.\u0275fac=function(n){return new(n||r)(y(Ne),y(Eg),y(Li),y(Rs),y(Tg,8))}}static{this.\u0275prov=N({token:r,factory:r.\u0275fac})}}return r})();var du=class{constructor(e,t){this.entityName=e,e=e.trim();let{dispatcher:n,selectors:i,selectors$:o}=t.create(e);this.entityName=e,this.dispatcher=n,this.guard=n.guard,this.selectId=n.selectId,this.toUpdate=n.toUpdate,this.selectors=i,this.selectors$=o,this.collection$=o.collection$,this.count$=o.count$,this.entities$=o.entities$,this.entityActions$=o.entityActions$,this.entityMap$=o.entityMap$,this.errors$=o.errors$,this.filter$=o.filter$,this.filteredEntities$=o.filteredEntities$,this.keys$=o.keys$,this.loaded$=o.loaded$,this.loading$=o.loading$,this.changeState$=o.changeState$}createEntityAction(e,t,n){return this.dispatcher.createEntityAction(e,t,n)}createAndDispatch(e,t,n){return this.dispatcher.createAndDispatch(e,t,n)}dispatch(e){return this.dispatcher.dispatch(e)}get store(){return this.dispatcher.store}add(e,t){return this.dispatcher.add(e,t)}cancel(e,t,n){this.dispatcher.cancel(e,t,n)}delete(e,t){return this.dispatcher.delete(e,t)}getAll(e){return this.dispatcher.getAll(e)}getByKey(e,t){return this.dispatcher.getByKey(e,t)}getWithQuery(e,t){return this.dispatcher.getWithQuery(e,t)}load(e){return this.dispatcher.load(e)}loadWithQuery(e,t){return this.dispatcher.loadWithQuery(e,t)}update(e,t){return this.dispatcher.update(e,t)}upsert(e,t){return this.dispatcher.upsert(e,t)}addAllToCache(e,t){this.dispatcher.addAllToCache(e,t)}addOneToCache(e,t){this.dispatcher.addOneToCache(e,t)}addManyToCache(e,t){this.dispatcher.addManyToCache(e,t)}clearCache(){this.dispatcher.clearCache()}removeOneFromCache(e,t){this.dispatcher.removeOneFromCache(e,t)}removeManyFromCache(e,t){this.dispatcher.removeManyFromCache(e,t)}updateOneInCache(e,t){this.dispatcher.updateOneInCache(e,t)}updateManyInCache(e,t){this.dispatcher.updateManyInCache(e,t)}upsertOneInCache(e,t){this.dispatcher.upsertOneInCache(e,t)}upsertManyInCache(e,t){this.dispatcher.upsertManyInCache(e,t)}setFilter(e){this.dispatcher.setFilter(e)}setLoaded(e){this.dispatcher.setLoaded(!!e)}setLoading(e){this.dispatcher.setLoading(!!e)}},Os=(()=>{class r{constructor(t){this.entityDefinitionService=t}create(t){let n=this.entityDefinitionService&&this.entityDefinitionService.getDefinition(t,!1);return n&&n.initialState||cA(t)}static{this.\u0275fac=function(n){return new(n||r)(y(Ui,8))}}static{this.\u0275prov=N({token:r,factory:r.\u0275fac})}}return r})();function cA(r){return{entityName:r,ids:[],entities:{},filter:void 0,loaded:!1,loading:!1,changeState:{}}}var wg=(()=>{class r{constructor(t,n){this.entityCollectionCreator=t||new Os,this.selectEntityCache=n||bg(Ns)}createCollectionSelector(t){let n=(i={})=>i[t]||this.entityCollectionCreator.create(t);return sr(this.selectEntityCache,n)}createCollectionSelectors(t){let n=typeof t=="string"?{entityName:t}:t,i=g=>g.ids,o=g=>g.entities,s=sr(i,o,(g,E)=>g.map(x=>E[x])),a=sr(i,g=>g.length),c=g=>g.filter,u=n.filterFn,l=u?sr(s,c,(g,E)=>u(g,E)):s,d=g=>g.loaded,f=g=>g.loading,p=g=>g.changeState,h=n.additionalCollectionState||{},m={};return Object.keys(h).forEach(g=>{m["select"+g[0].toUpperCase()+g.slice(1)]=E=>E[g]}),b({selectCount:a,selectEntities:s,selectEntityMap:o,selectFilter:c,selectFilteredEntities:l,selectKeys:i,selectLoaded:d,selectLoading:f,selectChangeState:p},m)}create(t){let n=typeof t=="string"?{entityName:t}:t,i=n.entityName,o=this.createCollectionSelector(i),s=this.createCollectionSelectors(n),a={};return Object.keys(s).forEach(c=>{a[c]=sr(o,s[c])}),b({entityName:i,selectCollection:o,selectEntityCache:this.selectEntityCache},a)}static{this.\u0275fac=function(n){return new(n||r)(y(Os,8),y(Ms,8))}}static{this.\u0275prov=N({token:r,factory:r.\u0275fac})}}return r})(),Su=(()=>{class r{constructor(t,n,i){this.store=t,this.actions=n,this.selectEntityCache=i,this.entityCache$=this.store.select(this.selectEntityCache),this.entityActionErrors$=n.pipe(fe(o=>o.payload&&o.payload.entityOp&&o.payload.entityOp.endsWith(mu)),Ke(1))}create(t,n){let i={entityName:t};return Object.keys(n).forEach(o=>{if(o.startsWith("select")){let s=o[6].toLowerCase()+o.substring(7)+"$";i[s]=this.store.select(n[o])}}),i.entityActions$=this.actions.pipe(ug(t)),i.errors$=this.entityActionErrors$.pipe(ug(t)),i}static{this.\u0275fac=function(n){return new(n||r)(y(Tt),y(Ne),y(Ms))}}static{this.\u0275prov=N({token:r,factory:r.\u0275fac})}}return r})(),xg=(()=>{class r{constructor(t,n,i,o){this.entityDispatcherFactory=t,this.entityDefinitionService=n,this.entitySelectorsFactory=i,this.entitySelectors$Factory=o}create(t){t=t.trim();let n=this.entityDefinitionService.getDefinition(t),i=this.entityDispatcherFactory.create(t,n.selectId,n.entityDispatcherOptions),o=this.entitySelectorsFactory.create(n.metadata),s=this.entitySelectors$Factory.create(t,o);return{dispatcher:i,entityName:t,selectors:o,selectors$:s}}static{this.\u0275fac=function(n){return new(n||r)(y(Eu),y(Ui),y(wg),y(Su))}}static{this.\u0275prov=N({token:r,factory:r.\u0275fac})}}return r})(),Rg=(()=>{class r{constructor(t){this.entityCollectionServiceElementsFactory=t}create(t){return new du(t,this.entityCollectionServiceElementsFactory)}static{this.\u0275fac=function(n){return new(n||r)(y(xg))}}static{this.\u0275prov=N({token:r,factory:r.\u0275fac})}}return r})(),Ig=(()=>{class r{constructor(t,n,i,o){this.entityCollectionServiceFactory=t,this.store=o,this.entityActionErrors$=i.entityActionErrors$,this.entityCache$=i.entityCache$,this.reducedActions$=n.reducedActions$}static{this.\u0275fac=function(n){return new(n||r)(y(Rg),y(Eu),y(Su),y(Tt))}}static{this.\u0275prov=N({token:r,factory:r.\u0275fac})}}return r})(),uA=(()=>{class r{constructor(t){this.entityServicesElements=t,this.EntityCollectionServices={}}get entityActionErrors$(){return this.entityServicesElements.entityActionErrors$}get entityCache$(){return this.entityServicesElements.entityCache$}get entityCollectionServiceFactory(){return this.entityServicesElements.entityCollectionServiceFactory}get reducedActions$(){return this.entityServicesElements.reducedActions$}get store(){return this.entityServicesElements.store}dispatch(t){this.store.dispatch(t)}createEntityCollectionService(t){return this.entityCollectionServiceFactory.create(t)}getEntityCollectionService(t){let n=this.EntityCollectionServices[t];return n||(n=this.createEntityCollectionService(t),this.EntityCollectionServices[t]=n),n}registerEntityCollectionService(t,n){this.EntityCollectionServices[n||t.entityName]=t}registerEntityCollectionServices(t){Array.isArray(t)?t.forEach(n=>this.registerEntityCollectionService(n)):Object.keys(t||{}).forEach(n=>{this.registerEntityCollectionService(t[n],n)})}static{this.\u0275fac=function(n){return new(n||r)(y(Ig))}}static{this.\u0275prov=N({token:r,factory:r.\u0275fac})}}return r})(),fu=class{},Ue=function(r){return r[r.Unchanged=0]="Unchanged",r[r.Added=1]="Added",r[r.Deleted=2]="Deleted",r[r.Updated=3]="Updated",r}(Ue||{}),pu=class{constructor(e,t){this.adapter=e,this.selectId=t,this.selectId=t||Pi}commitAll(e){return Object.keys(e.changeState).length===0?e:P(b({},e),{changeState:{}})}commitMany(e,t){if(e==null||e.length===0)return t;let n=!1,i=e.reduce((o,s)=>{let a=typeof s=="object"?this.selectId(s):s;return o[a]&&(n||(o=b({},o),n=!0),delete o[a]),o},t.changeState);return n?P(b({},t),{changeState:i}):t}commitOne(e,t){return e==null?t:this.commitMany([e],t)}mergeQueryResults(e,t,n){return this.mergeServerUpserts(e,t,we.PreserveChanges,n)}mergeSaveAdds(e,t,n){return this.mergeServerUpserts(e,t,we.OverwriteChanges,n)}mergeSaveDeletes(e,t,n){n=n??we.OverwriteChanges;let i=e;return t=n===we.IgnoreChanges?t:this.commitMany(i,t),this.adapter.removeMany(i,t)}mergeSaveUpdates(e,t,n,i=!1){if(e==null||e.length===0)return t;let o=!1,s=t.changeState;n=n??we.OverwriteChanges;let a;switch(n){case we.IgnoreChanges:return a=c(e),this.adapter.updateMany(a,t);case we.OverwriteChanges:return s=e.reduce((u,l)=>{let d=l.id;return u[d]&&(o||(u=b({},u),o=!0),delete u[d]),u},t.changeState),t=o?P(b({},t),{changeState:s}):t,a=c(e),this.adapter.updateMany(a,t);case we.PreserveChanges:{let u=[];return s=e.reduce((l,d)=>{let f=d.id,p=l[f];if(p){o||(l=b({},l),o=!0);let h=this.selectId(d.changes),m=p;h!==f&&delete l[f];let g=b(b({},m.originalValue),d.changes);l[h]=P(b({},m),{originalValue:g})}else u.push(d);return l},t.changeState),t=o?P(b({},t),{changeState:s}):t,a=c(u),this.adapter.updateMany(a,t)}}function c(u){return i===!0&&(u=u.filter(l=>l.changed===!0)),u.map(l=>({id:l.id,changes:l.changes}))}}mergeSaveUpserts(e,t,n){return this.mergeServerUpserts(e,t,we.OverwriteChanges,n)}mergeServerUpserts(e,t,n,i){if(e==null||e.length===0)return t;let o=!1,s=t.changeState;switch(i=i??n,i){case we.IgnoreChanges:return this.adapter.upsertMany(e,t);case we.OverwriteChanges:return t=this.adapter.upsertMany(e,t),s=e.reduce((a,c)=>{let u=this.selectId(c);return a[u]&&(o||(a=b({},a),o=!0),delete a[u]),a},t.changeState),o?P(b({},t),{changeState:s}):t;case we.PreserveChanges:{let a=[];return s=e.reduce((c,u)=>{let l=this.selectId(u);return c[l]?o||(c=P(b({},c),{[l]:P(b({},c[l]),{originalValue:u})}),o=!0):a.push(u),c},t.changeState),t=this.adapter.upsertMany(a,t),o?P(b({},t),{changeState:s}):t}}}trackAddMany(e,t,n){if(n===we.IgnoreChanges||e==null||e.length===0)return t;let i=!1,o=e.reduce((s,a)=>{let c=this.selectId(a);if(c==null||c==="")throw new Error(`${t.entityName} entity add requires a key to be tracked`);return s[c]||(i||(i=!0,s=b({},s)),s[c]={changeType:Ue.Added}),s},t.changeState);return i?P(b({},t),{changeState:o}):t}trackAddOne(e,t,n){return e==null?t:this.trackAddMany([e],t,n)}trackDeleteMany(e,t,n){if(n===we.IgnoreChanges||e==null||e.length===0)return t;let i=!1,o=t.entities,s=e.reduce((a,c)=>{let u=o[c];if(u){let d=a[c];d?d.changeType===Ue.Added?(l(),delete a[c]):d.changeType===Ue.Updated&&(l(),a[c]=P(b({},a[c]),{changeType:Ue.Deleted})):(l(),a[c]={changeType:Ue.Deleted,originalValue:u})}return a;function l(){i||(i=!0,a=b({},a))}},t.changeState);return i?P(b({},t),{changeState:s}):t}trackDeleteOne(e,t,n){return e==null?t:this.trackDeleteMany([e],t,n)}trackUpdateMany(e,t,n){if(n===we.IgnoreChanges||e==null||e.length===0)return t;let i=!1,o=t.entities,s=e.reduce((a,c)=>{let{id:u,changes:l}=c;if(u==null||u==="")throw new Error(`${t.entityName} entity update requires a key to be tracked`);let d=o[u];return d&&(a[u]||(i||(i=!0,a=b({},a)),a[u]={changeType:Ue.Updated,originalValue:d})),a},t.changeState);return i?P(b({},t),{changeState:s}):t}trackUpdateOne(e,t,n){return e==null?t:this.trackUpdateMany([e],t,n)}trackUpsertMany(e,t,n){if(n===we.IgnoreChanges||e==null||e.length===0)return t;let i=!1,o=t.entities,s=e.reduce((a,c)=>{let u=this.selectId(c);if(u==null||u==="")throw new Error(`${t.entityName} entity upsert requires a key to be tracked`);if(!a[u]){i||(i=!0,a=b({},a));let d=o[u];a[u]=d==null?{changeType:Ue.Added}:{changeType:Ue.Updated,originalValue:d}}return a},t.changeState);return i?P(b({},t),{changeState:s}):t}trackUpsertOne(e,t,n){return e==null?t:this.trackUpsertMany([e],t,n)}undoAll(e){let t=Object.keys(e.changeState),{remove:n,upsert:i}=t.reduce((o,s)=>{let a=o.chgState[s];switch(a.changeType){case Ue.Added:o.remove.push(s);break;case Ue.Deleted:let c=a.originalValue;c&&o.upsert.push(c);break;case Ue.Updated:o.upsert.push(a.originalValue);break}return o},{remove:[],upsert:[],chgState:e.changeState});return e=this.adapter.removeMany(n,e),e=this.adapter.upsertMany(i,e),P(b({},e),{changeState:{}})}undoMany(e,t){if(e==null||e.length===0)return t;let n=!1,{changeState:i,remove:o,upsert:s}=e.reduce((a,c)=>{let u=a.changeState,l=typeof c=="object"?this.selectId(c):c,d=u[l];if(d)switch(n||(u=b({},u),n=!0),delete u[l],a.changeState=u,d.changeType){case Ue.Added:a.remove.push(l);break;case Ue.Deleted:let f=d.originalValue;f&&a.upsert.push(f);break;case Ue.Updated:a.upsert.push(d.originalValue);break}return a},{remove:[],upsert:[],changeState:t.changeState});return t=this.adapter.removeMany(o,t),t=this.adapter.upsertMany(s,t),n?P(b({},t),{changeState:i}):t}undoOne(e,t){return e==null?t:this.undoMany([e],t)}},hu=class{constructor(e,t,n){this.entityName=e,this.definition=t,this.methods={[v.CANCEL_PERSIST]:this.cancelPersist.bind(this),[v.QUERY_ALL]:this.queryAll.bind(this),[v.QUERY_ALL_ERROR]:this.queryAllError.bind(this),[v.QUERY_ALL_SUCCESS]:this.queryAllSuccess.bind(this),[v.QUERY_BY_KEY]:this.queryByKey.bind(this),[v.QUERY_BY_KEY_ERROR]:this.queryByKeyError.bind(this),[v.QUERY_BY_KEY_SUCCESS]:this.queryByKeySuccess.bind(this),[v.QUERY_LOAD]:this.queryLoad.bind(this),[v.QUERY_LOAD_ERROR]:this.queryLoadError.bind(this),[v.QUERY_LOAD_SUCCESS]:this.queryLoadSuccess.bind(this),[v.QUERY_MANY]:this.queryMany.bind(this),[v.QUERY_MANY_ERROR]:this.queryManyError.bind(this),[v.QUERY_MANY_SUCCESS]:this.queryManySuccess.bind(this),[v.SAVE_ADD_MANY]:this.saveAddMany.bind(this),[v.SAVE_ADD_MANY_ERROR]:this.saveAddManyError.bind(this),[v.SAVE_ADD_MANY_SUCCESS]:this.saveAddManySuccess.bind(this),[v.SAVE_ADD_ONE]:this.saveAddOne.bind(this),[v.SAVE_ADD_ONE_ERROR]:this.saveAddOneError.bind(this),[v.SAVE_ADD_ONE_SUCCESS]:this.saveAddOneSuccess.bind(this),[v.SAVE_DELETE_MANY]:this.saveDeleteMany.bind(this),[v.SAVE_DELETE_MANY_ERROR]:this.saveDeleteManyError.bind(this),[v.SAVE_DELETE_MANY_SUCCESS]:this.saveDeleteManySuccess.bind(this),[v.SAVE_DELETE_ONE]:this.saveDeleteOne.bind(this),[v.SAVE_DELETE_ONE_ERROR]:this.saveDeleteOneError.bind(this),[v.SAVE_DELETE_ONE_SUCCESS]:this.saveDeleteOneSuccess.bind(this),[v.SAVE_UPDATE_MANY]:this.saveUpdateMany.bind(this),[v.SAVE_UPDATE_MANY_ERROR]:this.saveUpdateManyError.bind(this),[v.SAVE_UPDATE_MANY_SUCCESS]:this.saveUpdateManySuccess.bind(this),[v.SAVE_UPDATE_ONE]:this.saveUpdateOne.bind(this),[v.SAVE_UPDATE_ONE_ERROR]:this.saveUpdateOneError.bind(this),[v.SAVE_UPDATE_ONE_SUCCESS]:this.saveUpdateOneSuccess.bind(this),[v.SAVE_UPSERT_MANY]:this.saveUpsertMany.bind(this),[v.SAVE_UPSERT_MANY_ERROR]:this.saveUpsertManyError.bind(this),[v.SAVE_UPSERT_MANY_SUCCESS]:this.saveUpsertManySuccess.bind(this),[v.SAVE_UPSERT_ONE]:this.saveUpsertOne.bind(this),[v.SAVE_UPSERT_ONE_ERROR]:this.saveUpsertOneError.bind(this),[v.SAVE_UPSERT_ONE_SUCCESS]:this.saveUpsertOneSuccess.bind(this),[v.ADD_ALL]:this.addAll.bind(this),[v.ADD_MANY]:this.addMany.bind(this),[v.ADD_ONE]:this.addOne.bind(this),[v.REMOVE_ALL]:this.removeAll.bind(this),[v.REMOVE_MANY]:this.removeMany.bind(this),[v.REMOVE_ONE]:this.removeOne.bind(this),[v.UPDATE_MANY]:this.updateMany.bind(this),[v.UPDATE_ONE]:this.updateOne.bind(this),[v.UPSERT_MANY]:this.upsertMany.bind(this),[v.UPSERT_ONE]:this.upsertOne.bind(this),[v.COMMIT_ALL]:this.commitAll.bind(this),[v.COMMIT_MANY]:this.commitMany.bind(this),[v.COMMIT_ONE]:this.commitOne.bind(this),[v.UNDO_ALL]:this.undoAll.bind(this),[v.UNDO_MANY]:this.undoMany.bind(this),[v.UNDO_ONE]:this.undoOne.bind(this),[v.SET_CHANGE_STATE]:this.setChangeState.bind(this),[v.SET_COLLECTION]:this.setCollection.bind(this),[v.SET_FILTER]:this.setFilter.bind(this),[v.SET_LOADED]:this.setLoaded.bind(this),[v.SET_LOADING]:this.setLoading.bind(this)},this.adapter=t.entityAdapter,this.isChangeTracking=t.noChangeTracking!==!0,this.selectId=t.selectId,this.guard=new As(e,this.selectId),this.toUpdate=fg(this.selectId),this.entityChangeTracker=n||new pu(this.adapter,this.selectId)}cancelPersist(e){return this.setLoadingFalse(e)}queryAll(e){return this.setLoadingTrue(e)}queryAllError(e,t){return this.setLoadingFalse(e)}queryAllSuccess(e,t){let n=this.extractData(t),i=this.extractMergeStrategy(t);return P(b({},this.entityChangeTracker.mergeQueryResults(n,e,i)),{loaded:!0,loading:!1})}queryByKey(e,t){return this.setLoadingTrue(e)}queryByKeyError(e,t){return this.setLoadingFalse(e)}queryByKeySuccess(e,t){let n=this.extractData(t),i=this.extractMergeStrategy(t);return e=n==null?e:this.entityChangeTracker.mergeQueryResults([n],e,i),this.setLoadingFalse(e)}queryLoad(e){return this.setLoadingTrue(e)}queryLoadError(e,t){return this.setLoadingFalse(e)}queryLoadSuccess(e,t){let n=this.extractData(t);return P(b({},this.adapter.setAll(n,e)),{loading:!1,loaded:!0,changeState:{}})}queryMany(e,t){return this.setLoadingTrue(e)}queryManyError(e,t){return this.setLoadingFalse(e)}queryManySuccess(e,t){let n=this.extractData(t),i=this.extractMergeStrategy(t);return P(b({},this.entityChangeTracker.mergeQueryResults(n,e,i)),{loaded:!0,loading:!1})}saveAddMany(e,t){if(this.isOptimistic(t)){let n=this.guard.mustBeEntities(t),i=this.extractMergeStrategy(t);e=this.entityChangeTracker.trackAddMany(n,e,i),e=this.adapter.addMany(n,e)}return this.setLoadingTrue(e)}saveAddManyError(e,t){return this.setLoadingFalse(e)}saveAddManySuccess(e,t){let n=this.guard.mustBeEntities(t),i=this.extractMergeStrategy(t);return this.isOptimistic(t)?e=this.entityChangeTracker.mergeSaveUpserts(n,e,i):e=this.entityChangeTracker.mergeSaveAdds(n,e,i),this.setLoadingFalse(e)}saveAddOne(e,t){if(this.isOptimistic(t)){let n=this.guard.mustBeEntity(t),i=this.extractMergeStrategy(t);e=this.entityChangeTracker.trackAddOne(n,e,i),e=this.adapter.addOne(n,e)}return this.setLoadingTrue(e)}saveAddOneError(e,t){return this.setLoadingFalse(e)}saveAddOneSuccess(e,t){let n=this.guard.mustBeEntity(t),i=this.extractMergeStrategy(t);if(this.isOptimistic(t)){let o=this.toUpdate(n);e=this.entityChangeTracker.mergeSaveUpdates([o],e,i,!1)}else e=this.entityChangeTracker.mergeSaveAdds([n],e,i);return this.setLoadingFalse(e)}saveDeleteOne(e,t){let n=this.extractData(t),i=typeof n=="object"?this.selectId(n):n,o=e.changeState[i];if(o&&(o.changeType===Ue.Added?(e=this.adapter.removeOne(i,e),e=this.entityChangeTracker.commitOne(i,e),t.payload.skip=!0):e=this.entityChangeTracker.trackDeleteOne(i,e)),this.isOptimistic(t)){let s=this.extractMergeStrategy(t);e=this.entityChangeTracker.trackDeleteOne(i,e,s),e=this.adapter.removeOne(i,e)}return this.setLoadingTrue(e)}saveDeleteOneError(e,t){return this.setLoadingFalse(e)}saveDeleteOneSuccess(e,t){let n=this.extractData(t);if(this.isOptimistic(t)){let i=this.extractMergeStrategy(t);e=this.entityChangeTracker.mergeSaveDeletes([n],e,i)}else e=this.adapter.removeOne(n,e),e=this.entityChangeTracker.commitOne(n,e);return this.setLoadingFalse(e)}saveDeleteMany(e,t){let n=this.extractData(t).map(i=>typeof i=="object"?this.selectId(i):i);if(n.forEach(i=>{let o=e.changeState[i];o&&(o.changeType===Ue.Added?(e=this.adapter.removeOne(i,e),e=this.entityChangeTracker.commitOne(i,e),t.payload.skip=!0):e=this.entityChangeTracker.trackDeleteOne(i,e))}),this.isOptimistic(t)){let i=this.extractMergeStrategy(t);e=this.entityChangeTracker.trackDeleteMany(n,e,i),e=this.adapter.removeMany(n,e)}return this.setLoadingTrue(e)}saveDeleteManyError(e,t){return this.setLoadingFalse(e)}saveDeleteManySuccess(e,t){let n=this.extractData(t);if(this.isOptimistic(t)){let i=this.extractMergeStrategy(t);e=this.entityChangeTracker.mergeSaveDeletes(n,e,i)}else e=this.adapter.removeMany(n,e),e=this.entityChangeTracker.commitMany(n,e);return this.setLoadingFalse(e)}saveUpdateOne(e,t){let n=this.guard.mustBeUpdate(t);if(this.isOptimistic(t)){let i=this.extractMergeStrategy(t);e=this.entityChangeTracker.trackUpdateOne(n,e,i),e=this.adapter.updateOne(n,e)}return this.setLoadingTrue(e)}saveUpdateOneError(e,t){return this.setLoadingFalse(e)}saveUpdateOneSuccess(e,t){let n=this.guard.mustBeUpdateResponse(t),i=this.isOptimistic(t),o=this.extractMergeStrategy(t);return e=this.entityChangeTracker.mergeSaveUpdates([n],e,o,i),this.setLoadingFalse(e)}saveUpdateMany(e,t){let n=this.guard.mustBeUpdates(t);if(this.isOptimistic(t)){let i=this.extractMergeStrategy(t);e=this.entityChangeTracker.trackUpdateMany(n,e,i),e=this.adapter.updateMany(n,e)}return this.setLoadingTrue(e)}saveUpdateManyError(e,t){return this.setLoadingFalse(e)}saveUpdateManySuccess(e,t){let n=this.guard.mustBeUpdateResponses(t),i=this.isOptimistic(t),o=this.extractMergeStrategy(t);return e=this.entityChangeTracker.mergeSaveUpdates(n,e,o,!1),this.setLoadingFalse(e)}saveUpsertOne(e,t){if(this.isOptimistic(t)){let n=this.guard.mustBeEntity(t),i=this.extractMergeStrategy(t);e=this.entityChangeTracker.trackUpsertOne(n,e,i),e=this.adapter.upsertOne(n,e)}return this.setLoadingTrue(e)}saveUpsertOneError(e,t){return this.setLoadingFalse(e)}saveUpsertOneSuccess(e,t){let n=this.guard.mustBeEntity(t),i=this.extractMergeStrategy(t);return e=this.entityChangeTracker.mergeSaveUpserts([n],e,i),this.setLoadingFalse(e)}saveUpsertMany(e,t){if(this.isOptimistic(t)){let n=this.guard.mustBeEntities(t),i=this.extractMergeStrategy(t);e=this.entityChangeTracker.trackUpsertMany(n,e,i),e=this.adapter.upsertMany(n,e)}return this.setLoadingTrue(e)}saveUpsertManyError(e,t){return this.setLoadingFalse(e)}saveUpsertManySuccess(e,t){let n=this.guard.mustBeEntities(t),i=this.extractMergeStrategy(t);return e=this.entityChangeTracker.mergeSaveUpserts(n,e,i),this.setLoadingFalse(e)}addAll(e,t){let n=this.guard.mustBeEntities(t);return P(b({},this.adapter.setAll(n,e)),{loading:!1,loaded:!0,changeState:{}})}addMany(e,t){let n=this.guard.mustBeEntities(t),i=this.extractMergeStrategy(t);return e=this.entityChangeTracker.trackAddMany(n,e,i),this.adapter.addMany(n,e)}addOne(e,t){let n=this.guard.mustBeEntity(t),i=this.extractMergeStrategy(t);return e=this.entityChangeTracker.trackAddOne(n,e,i),this.adapter.addOne(n,e)}removeMany(e,t){let n=this.guard.mustBeKeys(t),i=this.extractMergeStrategy(t);return e=this.entityChangeTracker.trackDeleteMany(n,e,i),this.adapter.removeMany(n,e)}removeOne(e,t){let n=this.guard.mustBeKey(t),i=this.extractMergeStrategy(t);return e=this.entityChangeTracker.trackDeleteOne(n,e,i),this.adapter.removeOne(n,e)}removeAll(e,t){return P(b({},this.adapter.removeAll(e)),{loaded:!1,loading:!1,changeState:{}})}updateMany(e,t){let n=this.guard.mustBeUpdates(t),i=this.extractMergeStrategy(t);return e=this.entityChangeTracker.trackUpdateMany(n,e,i),this.adapter.updateMany(n,e)}updateOne(e,t){let n=this.guard.mustBeUpdate(t),i=this.extractMergeStrategy(t);return e=this.entityChangeTracker.trackUpdateOne(n,e,i),this.adapter.updateOne(n,e)}upsertMany(e,t){let n=this.guard.mustBeEntities(t),i=this.extractMergeStrategy(t);return e=this.entityChangeTracker.trackUpsertMany(n,e,i),this.adapter.upsertMany(n,e)}upsertOne(e,t){let n=this.guard.mustBeEntity(t),i=this.extractMergeStrategy(t);return e=this.entityChangeTracker.trackUpsertOne(n,e,i),this.adapter.upsertOne(n,e)}commitAll(e){return this.entityChangeTracker.commitAll(e)}commitMany(e,t){return this.entityChangeTracker.commitMany(this.extractData(t),e)}commitOne(e,t){return this.entityChangeTracker.commitOne(this.extractData(t),e)}undoAll(e){return this.entityChangeTracker.undoAll(e)}undoMany(e,t){return this.entityChangeTracker.undoMany(this.extractData(t),e)}undoOne(e,t){return this.entityChangeTracker.undoOne(this.extractData(t),e)}setChangeState(e,t){let n=this.extractData(t);return e.changeState===n?e:P(b({},e),{changeState:n})}setCollection(e,t){let n=this.extractData(t);return e===n?e:n}setFilter(e,t){let n=this.extractData(t);return e.filter===n?e:P(b({},e),{filter:n})}setLoaded(e,t){let n=this.extractData(t)===!0||!1;return e.loaded===n?e:P(b({},e),{loaded:n})}setLoading(e,t){return this.setLoadingFlag(e,this.extractData(t))}setLoadingFalse(e){return this.setLoadingFlag(e,!1)}setLoadingTrue(e){return this.setLoadingFlag(e,!0)}setLoadingFlag(e,t){return t=t===!0,e.loading===t?e:P(b({},e),{loading:t})}extractData(e){return e.payload&&e.payload.data}extractMergeStrategy(e){return this.isChangeTracking?e.payload&&e.payload.mergeStrategy:we.IgnoreChanges}isOptimistic(e){return e.payload&&e.payload.isOptimistic===!0}},Og=(()=>{class r{constructor(t){this.entityDefinitionService=t}create(t){let n=this.entityDefinitionService.getDefinition(t);return new hu(t,n).methods}static{this.\u0275fac=function(n){return new(n||r)(y(Ui))}}static{this.\u0275prov=N({token:r,factory:r.\u0275fac})}}return r})(),Ng=(()=>{class r{constructor(t){this.methodsFactory=t}create(t){let n=this.methodsFactory.create(t);return function(o,s){let a=n[s.payload.entityOp];return a?a(o,s):o}}static{this.\u0275fac=function(n){return new(n||r)(y(Og))}}static{this.\u0275prov=N({token:r,factory:r.\u0275fac})}}return r})(),Mg=(()=>{class r{constructor(t,n){this.entityCollectionReducerFactory=t,this.entityCollectionReducers={},this.entityCollectionMetaReducer=Ul.apply(null,n||[])}getOrCreateReducer(t){let n=this.entityCollectionReducers[t];return n||(n=this.entityCollectionReducerFactory.create(t),n=this.registerReducer(t,n),this.entityCollectionReducers[t]=n),n}registerReducer(t,n){return n=this.entityCollectionMetaReducer(n),this.entityCollectionReducers[t.trim()]=n}registerReducers(t){(t?Object.keys(t):[]).forEach(i=>this.registerReducer(i,t[i]))}static{this.\u0275fac=function(n){return new(n||r)(y(Ng),y(_g,8))}}static{this.\u0275prov=N({token:r,factory:r.\u0275fac})}}return r})(),kg=(()=>{class r{constructor(t,n,i){this.entityCollectionCreator=t,this.entityCollectionReducerRegistry=n,this.logger=i}create(){return t.bind(this);function t(n={},i){switch(i.type){case de.CLEAR_COLLECTIONS:return this.clearCollectionsReducer(n,i);case de.LOAD_COLLECTIONS:return this.loadCollectionsReducer(n,i);case de.MERGE_QUERY_SET:return this.mergeQuerySetReducer(n,i);case de.SAVE_ENTITIES:return this.saveEntitiesReducer(n,i);case de.SAVE_ENTITIES_CANCEL:return this.saveEntitiesCancelReducer(n,i);case de.SAVE_ENTITIES_ERROR:return this.saveEntitiesErrorReducer(n,i);case de.SAVE_ENTITIES_SUCCESS:return this.saveEntitiesSuccessReducer(n,i);case de.SET_ENTITY_CACHE:return i.payload.cache}let o=i.payload;return o&&o.entityName&&o.entityOp&&!o.error?this.applyCollectionReducer(n,i):n}}clearCollectionsReducer(t,n){let{collections:i,tag:o}=n.payload,s=v.REMOVE_ALL;return i||(i=Object.keys(t)),t=i.reduce((a,c)=>{let u={entityName:c,entityOp:s},l={type:`[${c}] ${n.type}`,payload:u};return a=this.applyCollectionReducer(a,l),a},t),t}loadCollectionsReducer(t,n){let{collections:i,tag:o}=n.payload,s=v.ADD_ALL;return t=Object.keys(i).reduce((c,u)=>{let l={entityName:u,entityOp:s,data:i[u]},d={type:`[${u}] ${n.type}`,payload:l};return c=this.applyCollectionReducer(c,d),c},t),t}mergeQuerySetReducer(t,n){let{mergeStrategy:i,querySet:o,tag:s}=n.payload;i=i===null?we.PreserveChanges:i;let a=v.QUERY_MANY_SUCCESS;return t=Object.keys(o).reduce((u,l)=>{let d={entityName:l,entityOp:a,data:o[l],mergeStrategy:i},f={type:`[${l}] ${n.type}`,payload:d};return u=this.applyCollectionReducer(u,f),u},t),t}saveEntitiesReducer(t,n){let{changeSet:i,correlationId:o,isOptimistic:s,mergeStrategy:a,tag:c}=n.payload;try{i.changes.forEach(l=>{let d=l.entityName,f={entityName:d,entityOp:u(l),data:l.entities,correlationId:o,isOptimistic:s,mergeStrategy:a,tag:c},p={type:`[${d}] ${n.type}`,payload:f};if(t=this.applyCollectionReducer(t,p),p.payload.error)throw p.payload.error})}catch(l){n.payload.error=l}return t;function u(l){switch(l.op){case Xe.Add:return v.SAVE_ADD_MANY;case Xe.Delete:return v.SAVE_DELETE_MANY;case Xe.Update:return v.SAVE_UPDATE_MANY;case Xe.Upsert:return v.SAVE_UPSERT_MANY}}}saveEntitiesCancelReducer(t,n){return this.clearLoadingFlags(t,n.payload.entityNames||[])}saveEntitiesErrorReducer(t,n){let s=n.payload.originalAction.payload.changeSet.changes.map(a=>a.entityName);return this.clearLoadingFlags(t,s)}saveEntitiesSuccessReducer(t,n){let{changeSet:i,correlationId:o,isOptimistic:s,mergeStrategy:a,tag:c}=n.payload;return i.changes.forEach(l=>{let d=l.entityName,f={entityName:d,entityOp:u(l),data:l.entities,correlationId:o,isOptimistic:s,mergeStrategy:a,tag:c},p={type:`[${d}] ${n.type}`,payload:f};t=this.applyCollectionReducer(t,p)}),t;function u(l){switch(l.op){case Xe.Add:return v.SAVE_ADD_MANY_SUCCESS;case Xe.Delete:return v.SAVE_DELETE_MANY_SUCCESS;case Xe.Update:return v.SAVE_UPDATE_MANY_SUCCESS;case Xe.Upsert:return v.SAVE_UPSERT_MANY_SUCCESS}}}applyCollectionReducer(t={},n){let i=n.payload.entityName,o=t[i],s=this.entityCollectionReducerRegistry.getOrCreateReducer(i),a;try{a=s(o||this.entityCollectionCreator.create(i),n)}catch(c){this.logger.error(c),n.payload.error=c}return n.payload.error||o===a?t:P(b({},t),{[i]:a})}clearLoadingFlags(t,n){let i=!1;return n.forEach(o=>{let s=t[o];s.loading&&(i||(t=b({},t),i=!0),t[o]=P(b({},s),{loading:!1}))}),t}static{this.\u0275fac=function(n){return new(n||r)(y(Os),y(Mg),y(bn))}}static{this.\u0275prov=N({token:r,factory:r.\u0275fac})}}return r})(),lA=(()=>{class r{error(t,n){t&&(n?console.error(t,n):console.error(t))}log(t,n){t&&(n?console.log(t,n):console.log(t))}warn(t,n){t&&(n?console.warn(t,n):console.warn(t))}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=N({token:r,factory:r.\u0275fac})}}return r})(),dA=["equipment","information","money","series"],fA=(()=>{class r{constructor(t){this.pluralNames={},t&&t.forEach(n=>this.registerPluralNames(n))}pluralize(t){let n=this.pluralNames[t];return n||(dA.indexOf(t.toLowerCase())>=0?t:/[aeiou]y$/.test(t)?t+"s":t.endsWith("y")?t.substring(0,t.length-1)+"ies":/[s|ss|sh|ch|x|z]$/.test(t)?t+"es":t+"s")}registerPluralNames(t){this.pluralNames=b(b({},this.pluralNames),t||{})}static{this.\u0275fac=function(n){return new(n||r)(y(mg,8))}}static{this.\u0275prov=N({token:r,factory:r.\u0275fac})}}return r})();var pA=[gu,vu,Li,iA,kg,sA,Os,Ng,Og,Mg,xg,Rg,Ui,Eu,wg,Su,Ig,{provide:yu,useValue:Ns},{provide:fu,useClass:uA},{provide:bn,useClass:lA},{provide:xn,multi:!0,useValue:()=>hA()}];function hA(){let r=Se(Vl),e=Se(kg),t=Se(yu,{optional:!0}),n=Se(oA,{optional:!0}),i=Se(Sg,{optional:!0}),o=t||Ns,s=(i||[]).map(u=>u instanceof Oe?Se(u):u),a=typeof n=="function"?n():n,c={key:o,reducers:e.create(),reducerFactory:Pl,initialState:a||{},metaReducers:s};r.addFeature(c)}var mA=[gg,yg,Eg,Ag,Cg,{provide:xs,useClass:eA},{provide:Rs,useClass:nA},{provide:ws,useClass:fA},{provide:xn,multi:!0,useValue:()=>gA()}];function gA(){let r=Se(ld),e=Se(Ag),t=Se(Cg);r.addEffects(e),r.addEffects(t)}function Dg(r){return[{provide:Sg,useValue:r.entityCacheMetaReducers?r.entityCacheMetaReducers:[]},{provide:_g,useValue:r.entityCollectionMetaReducers?r.entityCollectionMetaReducers:[]},{provide:mg,multi:!0,useValue:r.pluralNames?r.pluralNames:{}},{provide:vg,multi:!0,useValue:r.entityMetadata?r.entityMetadata:[]}]}var vA=(()=>{class r{static forRoot(t){return{ngModule:r,providers:[Dg(t)]}}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=tt({type:r})}static{this.\u0275inj=Je({providers:[pA]})}}return r})(),Lg=(()=>{class r{static forRoot(t){return{ngModule:r,providers:[Dg(t)]}}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=tt({type:r})}static{this.\u0275inj=Je({providers:[mA],imports:[vA]})}}return r})();var Bi="PERFORM_ACTION",yA="REFRESH",zg="RESET",jg="ROLLBACK",$g="COMMIT",Kg="SWEEP",Yg="TOGGLE_ACTION",EA="SET_ACTIONS_ACTIVE",Hg="JUMP_TO_STATE",Gg="JUMP_TO_ACTION",ku="IMPORT_STATE",qg="LOCK_CHANGES",Wg="PAUSE_RECORDING",Tn=class{constructor(e,t){if(this.action=e,this.timestamp=t,this.type=Bi,typeof e.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}},_u=class{constructor(){this.type=yA}},bu=class{constructor(e){this.timestamp=e,this.type=zg}},Tu=class{constructor(e){this.timestamp=e,this.type=jg}},Au=class{constructor(e){this.timestamp=e,this.type=$g}},Cu=class{constructor(){this.type=Kg}},wu=class{constructor(e){this.id=e,this.type=Yg}};var xu=class{constructor(e){this.index=e,this.type=Hg}},Ru=class{constructor(e){this.actionId=e,this.type=Gg}},Iu=class{constructor(e){this.nextLiftedState=e,this.type=ku}},Ou=class{constructor(e){this.status=e,this.type=qg}},Nu=class{constructor(e){this.status=e,this.type=Wg}};var Ps=new Oe("@ngrx/store-devtools Options"),Pg=new Oe("@ngrx/store-devtools Initial Config");function Qg(){return null}var SA="NgRx Store DevTools";function _A(r){let e={maxAge:!1,monitor:Qg,actionSanitizer:void 0,stateSanitizer:void 0,name:SA,serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0},connectInZone:!1},t=typeof r=="function"?r():r,n=t.logOnly?{pause:!0,export:!0,test:!0}:!1,i=t.features||n||e.features;i.import===!0&&(i.import="custom");let o=Object.assign({},e,{features:i},t);if(o.maxAge&&o.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${o.maxAge}`);return o}function Ug(r,e){return r.filter(t=>e.indexOf(t)<0)}function Xg(r){let{computedStates:e,currentStateIndex:t}=r;if(t>=e.length){let{state:i}=e[e.length-1];return i}let{state:n}=e[t];return n}function Fi(r){return new Tn(r,+Date.now())}function bA(r,e){return Object.keys(e).reduce((t,n)=>{let i=Number(n);return t[i]=Zg(r,e[i],i),t},{})}function Zg(r,e,t){return P(b({},e),{action:r(e.action,t)})}function TA(r,e){return e.map((t,n)=>({state:Jg(r,t.state,n),error:t.error}))}function Jg(r,e,t){return r(e,t)}function ev(r){return r.predicate||r.actionsSafelist||r.actionsBlocklist}function AA(r,e,t,n){let i=[],o={},s=[];return r.stagedActionIds.forEach((a,c)=>{let u=r.actionsById[a];u&&(c&&Du(r.computedStates[c],u,e,t,n)||(o[a]=u,i.push(a),s.push(r.computedStates[c])))}),P(b({},r),{stagedActionIds:i,actionsById:o,computedStates:s})}function Du(r,e,t,n,i){let o=t&&!t(r,e.action),s=n&&!e.action.type.match(n.map(c=>Fg(c)).join("|")),a=i&&e.action.type.match(i.map(c=>Fg(c)).join("|"));return o||s||a}function Fg(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function tv(r){return{ngZone:r?Se(Ki):null,connectInZone:r}}var Us=(()=>{class r extends so{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=$i(r)))(i||r)}})()}static{this.\u0275prov=N({token:r,factory:r.\u0275fac})}}return r})(),ks={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},Mu=new Oe("@ngrx/store-devtools Redux Devtools Extension"),rv=(()=>{class r{constructor(t,n,i){this.config=n,this.dispatcher=i,this.zoneConfig=tv(this.config.connectInZone),this.devtoolsExtension=t,this.createActionStreams()}notify(t,n){if(this.devtoolsExtension)if(t.type===Bi){if(n.isLocked||n.isPaused)return;let i=Xg(n);if(ev(this.config)&&Du(i,t,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;let o=this.config.stateSanitizer?Jg(this.config.stateSanitizer,i,n.currentStateIndex):i,s=this.config.actionSanitizer?Zg(this.config.actionSanitizer,t,n.nextActionId):t;this.sendToReduxDevtools(()=>this.extensionConnection.send(s,o))}else{let i=P(b({},n),{stagedActionIds:n.stagedActionIds,actionsById:this.config.actionSanitizer?bA(this.config.actionSanitizer,n.actionsById):n.actionsById,computedStates:this.config.stateSanitizer?TA(this.config.stateSanitizer,n.computedStates):n.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,i,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new Bs(t=>{let n=this.zoneConfig.connectInZone?this.zoneConfig.ngZone.runOutsideAngular(()=>this.devtoolsExtension.connect(this.getExtensionConfig(this.config))):this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=n,n.init(),n.subscribe(i=>t.next(i)),n.unsubscribe}):Vu}createActionStreams(){let t=this.createChangesObservable().pipe(Hu()),n=t.pipe(fe(u=>u.type===ks.START)),i=t.pipe(fe(u=>u.type===ks.STOP)),o=t.pipe(fe(u=>u.type===ks.DISPATCH),w(u=>this.unwrapAction(u.payload)),bt(u=>u.type===ku?this.dispatcher.pipe(fe(l=>l.type===ra),An(1e3),ju(1e3),w(()=>u),ae(()=>X(u)),wn(1)):X(u))),a=t.pipe(fe(u=>u.type===ks.ACTION),w(u=>this.unwrapAction(u.payload))).pipe(ji(i)),c=o.pipe(ji(i));this.start$=n.pipe(ji(i)),this.actions$=this.start$.pipe(zs(()=>a)),this.liftedActions$=this.start$.pipe(zs(()=>c))}unwrapAction(t){return typeof t=="string"?(0,eval)(`(${t})`):t}getExtensionConfig(t){let n={name:t.name,features:t.features,serialize:t.serialize,autoPause:t.autoPause??!1,trace:t.trace??!1,traceLimit:t.traceLimit??75};return t.maxAge!==!1&&(n.maxAge=t.maxAge),n}sendToReduxDevtools(t){try{t()}catch(n){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",n)}}static{this.\u0275fac=function(n){return new(n||r)(y(Mu),y(Ps),y(Us))}}static{this.\u0275prov=N({token:r,factory:r.\u0275fac})}}return r})(),Ls={type:ta},CA="@ngrx/store-devtools/recompute",wA={type:CA};function nv(r,e,t,n,i){if(n)return{state:t,error:"Interrupted by an error up the chain"};let o=t,s;try{o=r(t,e)}catch(a){s=a.toString(),i.handleError(a)}return{state:o,error:s}}function Ds(r,e,t,n,i,o,s,a,c){if(e>=r.length&&r.length===o.length)return r;let u=r.slice(0,e),l=o.length-(c?1:0);for(let d=e;d<l;d++){let f=o[d],p=i[f].action,h=u[d-1],m=h?h.state:n,g=h?h.error:void 0,x=s.indexOf(f)>-1?h:nv(t,p,m,g,a);u.push(x)}return c&&u.push(r[r.length-1]),u}function xA(r,e){return{monitorState:e(void 0,{}),nextActionId:1,actionsById:{0:Fi(Ls)},stagedActionIds:[0],skippedActionIds:[],committedState:r,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function RA(r,e,t,n,i={}){return o=>(s,a)=>{let{monitorState:c,actionsById:u,nextActionId:l,stagedActionIds:d,skippedActionIds:f,committedState:p,currentStateIndex:h,computedStates:m,isLocked:g,isPaused:E}=s||e;s||(u=Object.create(u));function x(S){let C=S,V=d.slice(1,C+1);for(let z=0;z<V.length;z++)if(m[z+1].error){C=z,V=d.slice(1,C+1);break}else delete u[V[z]];f=f.filter(z=>V.indexOf(z)===-1),d=[0,...d.slice(C+1)],p=m[C].state,m=m.slice(C),h=h>C?h-C:0}function k(){u={0:Fi(Ls)},l=1,d=[0],f=[],p=m[h].state,h=0,m=[]}let A=0;switch(a.type){case qg:{g=a.status,A=1/0;break}case Wg:{E=a.status,E?(d=[...d,l],u[l]=new Tn({type:"@ngrx/devtools/pause"},+Date.now()),l++,A=d.length-1,m=m.concat(m[m.length-1]),h===d.length-2&&h++,A=1/0):k();break}case zg:{u={0:Fi(Ls)},l=1,d=[0],f=[],p=r,h=0,m=[];break}case $g:{k();break}case jg:{u={0:Fi(Ls)},l=1,d=[0],f=[],h=0,m=[];break}case Yg:{let{id:S}=a;f.indexOf(S)===-1?f=[S,...f]:f=f.filter(V=>V!==S),A=d.indexOf(S);break}case EA:{let{start:S,end:C,active:V}=a,z=[];for(let T=S;T<C;T++)z.push(T);V?f=Ug(f,z):f=[...f,...z],A=d.indexOf(S);break}case Hg:{h=a.index,A=1/0;break}case Gg:{let S=d.indexOf(a.actionId);S!==-1&&(h=S),A=1/0;break}case Kg:{d=Ug(d,f),f=[],h=Math.min(h,d.length-1);break}case Bi:{if(g)return s||e;if(E||s&&Du(s.computedStates[h],a,i.predicate,i.actionsSafelist,i.actionsBlocklist)){let C=m[m.length-1];m=[...m.slice(0,-1),nv(o,a.action,C.state,C.error,t)],A=1/0;break}i.maxAge&&d.length===i.maxAge&&x(1),h===d.length-1&&h++;let S=l++;u[S]=a,d=[...d,S],A=d.length-1;break}case ku:{({monitorState:c,actionsById:u,nextActionId:l,stagedActionIds:d,skippedActionIds:f,committedState:p,currentStateIndex:h,computedStates:m,isLocked:g,isPaused:E}=a.nextLiftedState);break}case ta:{A=0,i.maxAge&&d.length>i.maxAge&&(m=Ds(m,A,o,p,u,d,f,t,E),x(d.length-i.maxAge),A=1/0);break}case ra:{if(m.filter(C=>C.error).length>0)A=0,i.maxAge&&d.length>i.maxAge&&(m=Ds(m,A,o,p,u,d,f,t,E),x(d.length-i.maxAge),A=1/0);else{if(!E&&!g){h===d.length-1&&h++;let C=l++;u[C]=new Tn(a,+Date.now()),d=[...d,C],A=d.length-1,m=Ds(m,A,o,p,u,d,f,t,E)}m=m.map(C=>P(b({},C),{state:o(C.state,wA)})),h=d.length-1,i.maxAge&&d.length>i.maxAge&&x(d.length-i.maxAge),A=1/0}break}default:{A=1/0;break}}return m=Ds(m,A,o,p,u,d,f,t,E),c=n(c,a),{monitorState:c,actionsById:u,nextActionId:l,stagedActionIds:d,skippedActionIds:f,committedState:p,currentStateIndex:h,computedStates:m,isLocked:g,isPaused:E}}}var Bg=(()=>{class r{constructor(t,n,i,o,s,a,c,u){let l=xA(c,u.monitor),d=RA(c,l,a,u.monitor,u),f=Cn(Cn(n.asObservable().pipe(Gu(1)),o.actions$).pipe(w(Fi)),t,o.liftedActions$).pipe(zu(Bu)),p=i.pipe(w(d)),h=tv(u.connectInZone),m=new Fu(1);this.liftedStateSubscription=f.pipe(ut(p),Vg(h),Yu(({state:x},[k,A])=>{let S=A(x,k);return k.type!==Bi&&ev(u)&&(S=AA(S,u.predicate,u.actionsSafelist,u.actionsBlocklist)),o.notify(k,S),{state:S,action:k}},{state:l,action:null})).subscribe(({state:x,action:k})=>{if(m.next(x),k.type===Bi){let A=k.action;s.next(A)}}),this.extensionStartSubscription=o.start$.pipe(Vg(h)).subscribe(()=>{this.refresh()});let g=m.asObservable(),E=g.pipe(w(Xg));Object.defineProperty(E,"state",{value:kl(E,{manualCleanup:!0,requireSync:!0})}),this.dispatcher=t,this.liftedState=g,this.state=E}ngOnDestroy(){this.liftedStateSubscription.unsubscribe(),this.extensionStartSubscription.unsubscribe()}dispatch(t){this.dispatcher.next(t)}next(t){this.dispatcher.next(t)}error(t){}complete(){}performAction(t){this.dispatch(new Tn(t,+Date.now()))}refresh(){this.dispatch(new _u)}reset(){this.dispatch(new bu(+Date.now()))}rollback(){this.dispatch(new Tu(+Date.now()))}commit(){this.dispatch(new Au(+Date.now()))}sweep(){this.dispatch(new Cu)}toggleAction(t){this.dispatch(new wu(t))}jumpToAction(t){this.dispatch(new Ru(t))}jumpToState(t){this.dispatch(new xu(t))}importState(t){this.dispatch(new Iu(t))}lockChanges(t){this.dispatch(new Ou(t))}pauseRecording(t){this.dispatch(new Nu(t))}static{this.\u0275fac=function(n){return new(n||r)(y(Us),y(so),y(Fl),y(rv),y(Dn),y(Yi),y(Dl),y(Ps))}}static{this.\u0275prov=N({token:r,factory:r.\u0275fac})}}return r})();function Vg({ngZone:r,connectInZone:e}){return t=>e?new Bs(n=>t.subscribe({next:i=>r.run(()=>n.next(i)),error:i=>r.run(()=>n.error(i)),complete:()=>r.run(()=>n.complete())})):t}var IA=new Oe("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function OA(r,e){return!!r||e.monitor!==Qg}function NA(){let r="__REDUX_DEVTOOLS_EXTENSION__";return typeof window=="object"&&typeof window[r]<"u"?window[r]:null}function MA(r){return r.state}function kA(r={}){return Rn([rv,Us,Bg,{provide:Pg,useValue:r},{provide:IA,deps:[Mu,Ps],useFactory:OA},{provide:Mu,useFactory:NA},{provide:Ps,deps:[Pg],useFactory:_A},{provide:zl,deps:[Bg],useFactory:MA},{provide:Bl,useExisting:Us}])}var iv=(()=>{class r{static instrument(t={}){return{ngModule:r,providers:[kA(t)]}}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=tt({type:r})}static{this.\u0275inj=Je({})}}return r})();var Lu=(r,e,t=Se(Tt),n=Se(Xi))=>{let i=Se(Nl),o=Se(Hr);n=n??"",n.charAt(n.length-1)=="/"&&(n=n.slice(0,-1));let s=!1;return i.getIsAuthenticated().pipe(w(a=>{if(!s&&!a){s=!0;let c=`${n}${e.url}`;return window.location.assign(`bff/login?returnUrl=${c}`),!1}return a}),bt(a=>i.getIsAdmin().pipe(qu(c=>a&&c?!0:(o.navigate(["/home"]),!1)))),$u(!1),ae(a=>(console.log("error in auth guard: ",a),X(!1))),Ku(()=>(s=!1,!1)))};var DA=[{path:"admin",canActivate:[Lu],canActivateChild:[Lu],loadChildren:()=>import("./chunk-ZI67D66C.js").then(r=>r.AdminModule)},{path:"",loadChildren:()=>import("./chunk-WAOTEP3Y.js").then(r=>r.MainModule)},{path:"**",redirectTo:"home"}],ov=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=tt({type:r})}static{this.\u0275inj=Je({imports:[ea.forRoot(DA,{anchorScrolling:"enabled",scrollPositionRestoration:"enabled",paramsInheritanceStrategy:"always"}),ea]})}}return r})();var PA=r=>[r],sv=(()=>{class r{constructor(t,n,i,o,s){this.router=t,this.matIconRegistry=n,this.domSanitizer=i,this.loggerService=o,this.navService=s,this.skipLinkUrl="",this.setSkipLinkUrl(),this.registerMatIcons()}ngOnInit(){}setSkipLinkUrl(){let t=this.router.url.split("/")[1];this.router.events.subscribe(n=>{n instanceof to&&(n.url!=""?this.skipLinkUrl=n.url:this.skipLinkUrl="")})}registerMatIcons(){this.matIconRegistry.addSvgIcon("chevron_down",this.domSanitizer.bypassSecurityTrustResourceUrl("assets/images/icons/chevron_down.svg"))}static{this.\u0275fac=function(n){return new(n||r)($r(Hr),$r(gl),$r(ll),$r(ys),$r(gd))}}static{this.\u0275cmp=Hi({type:r,selectors:[["app-root"]],standalone:!1,decls:4,vars:4,consts:[["id","skipLinksContainer"],["role","link","aria-label","Skip to main content","aria-hidden","true",1,"skip-link",3,"routerLink","fragment"]],template:function(n,i){n&1&&(dt(0,"div",0)(1,"a",1),Sr(2,"Skip to main content "),Ot()(),Nn(3,"router-outlet")),n&2&&(et(),lt("routerLink",rl(2,PA,i.skipLinkUrl))("fragment","main"))},dependencies:[Al,Cl],styles:[`#skipLinksContainer[_ngcontent-%COMP%]{position:absolute;top:auto;left:-999px;background-color:#f1f1f1;padding:10px;z-index:999;overflow:hidden}#skipLinksContainer[_ngcontent-%COMP%]   .skip-link[_ngcontent-%COMP%]{display:block;text-decoration:none;padding:3px}#skipLinksContainer[_ngcontent-%COMP%]   .skip-link[_ngcontent-%COMP%]:hover{text-decoration:underline}#skipLinksContainer[_ngcontent-%COMP%]   .skip-link[_ngcontent-%COMP%]:focus{outline:solid 4px #4E96DE;text-decoration:underline}#skipLinksContainer[_ngcontent-%COMP%]:focus-within{background-color:#fff;left:0;top:auto;width:auto;padding:15px;height:auto;overflow:auto;margin:10px;border-radius:4px;box-shadow:0 3px 6px #00000029;text-align:center;font-size:1.2em;z-index:999}
/*# sourceMappingURL=app.component-D6CGRSJ6.css.map */`]})}}return r})();var av=(()=>{class r{constructor(){}intercept(t,n){return t.url.includes("usc.edu")&&!t.headers.has("X-CSRF")&&(t=t.clone({headers:t.headers.set("X-CSRF","1")})),n.handle(t)}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=N({token:r,factory:r.\u0275fac})}}return r})();var UA={},FA={},cv={entityMetadata:UA,pluralNames:FA};function BA(r){return()=>r.load()}var uv=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=tt({type:r,bootstrap:[sv]})}static{this.\u0275inj=Je({providers:[{provide:xl,useValue:or.apiBaseUrl},{provide:Hs,useClass:av,multi:!0},{provide:Hs,useClass:Qd,multi:!0},{provide:Xi,useValue:or.apiBaseHref},Qs,el(()=>BA(Se(Qs))()),Es,Ts,_r,Ml,vd,kn,oo,_l({toastComponent:qd,positionClass:"toast-bottom-right"}),El,Ji,io,xo,{provide:pl,useValue:{subscriptSizing:"dynamic"}},no,ys,wl,_r,Gs(),Qu(md.forRoot()),Gs(al())],imports:[Zi,ov,ol,Gd,Kl.forRoot(Jm,{metaReducers:eg}),dd.forRoot([ag,og,ig,sg,ng,tg,rg]),Zm.forRoot({stateKey:"router",routerState:ki.Minimal}),iv.instrument({maxAge:25,logOnly:!Kr()}),Lg.forRoot(cv),fl]})}}return r})();or.production&&(window.console.log=()=>{});ul().bootstrapModule(uv).catch(r=>console.error(r));
//# sourceMappingURL=main-SXNIIRVU.js.map
